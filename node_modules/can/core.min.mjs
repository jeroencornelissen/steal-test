(function(e,t){"undefined"==typeof process&&(e.process={argv:[],cwd:function(){return""},browser:!0,env:{NODE_ENV:t||"development"},version:"",platform:e.navigator&&e.navigator.userAgent&&/Windows/.test(e.navigator.userAgent)?"win":""})})("object"==typeof self&&self.Object==Object?self:"object"==typeof process&&"[object process]"===Object.prototype.toString.call(process)?global:window,"development");var canNamespace_1_0_0_canNamespace={},CanSymbol;if("undefined"!=typeof Symbol&&"function"==typeof Symbol.for)CanSymbol=Symbol;else{var symbolNum=0;CanSymbol=function(e){var t="@@symbol"+symbolNum++ +e,a={};return Object.defineProperties(a,{toString:{value:function(){return t}}}),a};var descriptionToSymbol={},symbolToDescription={};CanSymbol.for=function(e){var t=descriptionToSymbol[e];return t||(t=descriptionToSymbol[e]=CanSymbol(e),symbolToDescription[t]=e),t},CanSymbol.keyFor=function(e){return symbolToDescription[e]},["hasInstance","isConcatSpreadable","iterator","match","prototype","replace","search","species","split","toPrimitive","toStringTag","unscopables"].forEach(function(e){CanSymbol[e]=CanSymbol("Symbol."+e)})}["isMapLike","isListLike","isValueLike","isFunctionLike","getOwnKeys","getOwnKeyDescriptor","proto","getOwnEnumerableKeys","hasOwnKey","hasKey","size","getName","getIdentity","assignDeep","updateDeep","getValue","setValue","getKeyValue","setKeyValue","updateValues","addValue","removeValues","apply","new","onValue","offValue","onKeyValue","offKeyValue","getKeyDependencies","getValueDependencies","keyHasDependencies","valueHasDependencies","onKeys","onKeysAdded","onKeysRemoved","onPatches"].forEach(function(e){CanSymbol.for("can."+e)});var canSymbol_1_6_1_canSymbol=canNamespace_1_0_0_canNamespace.Symbol=CanSymbol,helpers={makeGetFirstSymbolValue:function(e){var t=e.map(function(e){return canSymbol_1_6_1_canSymbol.for(e)}),a=t.length;return function(e){for(var n=-1;++n<a;)if(e[t[n]]!==void 0)return e[t[n]]}},hasLength:function(e){var t=typeof e;if("string"==t||Array.isArray(e))return!0;var a=e&&"boolean"!=t&&"number"!=t&&"length"in e&&e.length;return"function"!=typeof e&&(0===a||"number"==typeof a&&0<a&&a-1 in e)}},plainFunctionPrototypePropertyNames=Object.getOwnPropertyNames(function(){}.prototype),plainFunctionPrototypeProto=Object.getPrototypeOf(function(){}.prototype);function isConstructorLike(e){var t=e[canSymbol_1_6_1_canSymbol.for("can.new")];if(t!==void 0)return t;if("function"!=typeof e)return!1;var a=e.prototype;if(!a)return!1;if(plainFunctionPrototypeProto!==Object.getPrototypeOf(a))return!0;var n=Object.getOwnPropertyNames(a);if(n.length===plainFunctionPrototypePropertyNames.length){for(var r=0,s=n.length;r<s;r++)if(n[r]!==plainFunctionPrototypePropertyNames[r])return!0;return!1}return!0}var getNewOrApply=helpers.makeGetFirstSymbolValue(["can.new","can.apply"]);function isFunctionLike(e){var t=!!e&&e[canSymbol_1_6_1_canSymbol.for("can.isFunctionLike")],a;return void 0===t?(a=getNewOrApply(e),void 0===a?"function"==typeof e:!!a):t}function isPrimitive(e){var t=typeof e;return!(null!=e&&("function"==t||"object"==t))}function isBuiltIn(e){return!!(isPrimitive(e)||Array.isArray(e)||isPlainObject(e)||"[object Object]"!==Object.prototype.toString.call(e)&&-1!==Object.prototype.toString.call(e).indexOf("[object "))}function isValueLike(e){var t;if(isPrimitive(e))return!0;if(t=e[canSymbol_1_6_1_canSymbol.for("can.isValueLike")],"undefined"!=typeof t)return t;var a=e[canSymbol_1_6_1_canSymbol.for("can.getValue")];if(void 0!==a)return!!a}function isMapLike(e){if(isPrimitive(e))return!1;var t=e[canSymbol_1_6_1_canSymbol.for("can.isMapLike")];if("undefined"!=typeof t)return!!t;var a=e[canSymbol_1_6_1_canSymbol.for("can.getKeyValue")];return!(void 0!==a)||!!a}var onValueSymbol=canSymbol_1_6_1_canSymbol.for("can.onValue"),onKeyValueSymbol=canSymbol_1_6_1_canSymbol.for("can.onKeyValue"),onPatchesSymbol=canSymbol_1_6_1_canSymbol.for("can.onPatches");function isObservableLike(e){return!isPrimitive(e)&&!!(e[onValueSymbol]||e[onKeyValueSymbol]||e[onPatchesSymbol])}function isListLike(e){var t;if("string"==typeof e)return!0;if(isPrimitive(e))return!1;if(t=e[canSymbol_1_6_1_canSymbol.for("can.isListLike")],"undefined"!=typeof t)return t;var a=e[canSymbol_1_6_1_canSymbol.iterator];return void 0===a?!!Array.isArray(e)||helpers.hasLength(e):!!a}var supportsSymbols="undefined"!=typeof Symbol&&"function"==typeof Symbol.for,isSymbolLike;if(supportsSymbols)isSymbolLike=function(e){return"symbol"==typeof e};else{var symbolStart="@@symbol";isSymbolLike=function(e){return!("object"!=typeof e||Array.isArray(e))&&e.toString().substr(0,symbolStart.length)===symbolStart}}var coreHasOwn=Object.prototype.hasOwnProperty,funcToString=Function.prototype.toString,objectCtorString=funcToString.call(Object);function isPlainObject(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(t===Object.prototype||null===t)return!0;var a=coreHasOwn.call(t,"constructor")&&t.constructor;return"function"==typeof a&&a instanceof a&&funcToString.call(a)===objectCtorString}var type={isConstructorLike:isConstructorLike,isFunctionLike:isFunctionLike,isListLike:isListLike,isMapLike:isMapLike,isObservableLike:isObservableLike,isPrimitive:isPrimitive,isBuiltIn:isBuiltIn,isValueLike:isValueLike,isSymbolLike:isSymbolLike,isMoreListLikeThanMapLike:function(e){if(Array.isArray(e))return!0;if(e instanceof Array)return!0;if(null==e)return!1;var t=e[canSymbol_1_6_1_canSymbol.for("can.isMoreListLikeThanMapLike")];if(t!==void 0)return t;var a=this.isListLike(e),n=this.isMapLike(e);if(a&&!n)return!0;return void 0},isIteratorLike:function(e){return e&&"object"==typeof e&&"function"==typeof e.next&&0===e.next.length},isPromise:function(e){return e instanceof Promise||"[object Promise]"===Object.prototype.toString.call(e)},isPlainObject:isPlainObject},call={call:function(e,t){var a=[].slice.call(arguments,2),n=e[canSymbol_1_6_1_canSymbol.for("can.apply")];return n?n.call(e,t,a):e.apply(t,a)},apply:function(e,t,a){var n=e[canSymbol_1_6_1_canSymbol.for("can.apply")];return n?n.call(e,t,a):e.apply(t,a)},new:function(e){var t=[].slice.call(arguments,1),a=e[canSymbol_1_6_1_canSymbol.for("can.new")];if(a)return a.apply(e,t);var n=Object.create(e.prototype),r=e.apply(n,t);return type.isPrimitive(r)?n:r}},setKeyValueSymbol=canSymbol_1_6_1_canSymbol.for("can.setKeyValue"),getKeyValueSymbol=canSymbol_1_6_1_canSymbol.for("can.getKeyValue"),getValueSymbol=canSymbol_1_6_1_canSymbol.for("can.getValue"),setValueSymbol=canSymbol_1_6_1_canSymbol.for("can.setValue"),reflections={setKeyValue:function(e,t,a){if(type.isSymbolLike(t))return void("symbol"==typeof t?e[t]=a:Object.defineProperty(e,t,{enumerable:!1,configurable:!0,value:a,writable:!0}));var n=e[setKeyValueSymbol];return void 0===n?void(e[t]=a):n.call(e,t,a)},getKeyValue:function(e,t){var a=e[getKeyValueSymbol];return a?a.call(e,t):e[t]},deleteKeyValue:function(e,t){var a=e[canSymbol_1_6_1_canSymbol.for("can.deleteKeyValue")];return a?a.call(e,t):void delete e[t]},getValue:function(e){if(type.isPrimitive(e))return e;var t=e[getValueSymbol];return t?t.call(e):e},setValue:function(e,t){var a=e&&e[setValueSymbol];if(a)return a.call(e,t);throw new Error("can-reflect.setValue - Can not set value.")},splice:function(e,t,a,n){var r;if("number"!=typeof a){var s=e[canSymbol_1_6_1_canSymbol.for("can.updateValues")];if(s)return s.call(e,t,a,n);r=a.length}else r=a;3>=arguments.length&&(n=[]);var o=e[canSymbol_1_6_1_canSymbol.for("can.splice")];return o?o.call(e,t,r,n):[].splice.apply(e,[t,r].concat(n))},addValues:function(e,t,a){var n=e[canSymbol_1_6_1_canSymbol.for("can.addValues")];return n?n.call(e,t,a):Array.isArray(e)&&void 0===a?e.push.apply(e,t):reflections.splice(e,a,[],t)},removeValues:function(e,t,a){var n=e[canSymbol_1_6_1_canSymbol.for("can.removeValues")];return n?n.call(e,t,a):Array.isArray(e)&&void 0===a?void t.forEach(function(t){var a=e.indexOf(t);0<=a&&e.splice(a,1)}):reflections.splice(e,a,t,[])}};reflections.get=reflections.getKeyValue,reflections.set=reflections.setKeyValue,reflections["delete"]=reflections.deleteKeyValue;var getSet=reflections,slice=[].slice;function makeFallback(e,t){return function(a,n,r,s){var o=a[canSymbol_1_6_1_canSymbol.for(e)];return void 0===o?this[t].apply(this,arguments):o.call(a,n,r,s)}}function makeErrorIfMissing(e,t){return function(a){var n=a[canSymbol_1_6_1_canSymbol.for(e)];if(n!==void 0){var r=slice.call(arguments,1);return n.apply(a,r)}throw new Error(t)}}var observe={onKeyValue:makeFallback("can.onKeyValue","onEvent"),offKeyValue:makeFallback("can.offKeyValue","offEvent"),onKeys:makeErrorIfMissing("can.onKeys","can-reflect: can not observe an onKeys event"),onKeysAdded:makeErrorIfMissing("can.onKeysAdded","can-reflect: can not observe an onKeysAdded event"),onKeysRemoved:makeErrorIfMissing("can.onKeysRemoved","can-reflect: can not unobserve an onKeysRemoved event"),getKeyDependencies:makeErrorIfMissing("can.getKeyDependencies","can-reflect: can not determine dependencies"),getWhatIChange:makeErrorIfMissing("can.getWhatIChange","can-reflect: can not determine dependencies"),getChangesDependencyRecord:function(e){var t=e[canSymbol_1_6_1_canSymbol.for("can.getChangesDependencyRecord")];if("function"==typeof t)return t()},keyHasDependencies:makeErrorIfMissing("can.keyHasDependencies","can-reflect: can not determine if this has key dependencies"),onValue:makeErrorIfMissing("can.onValue","can-reflect: can not observe value change"),offValue:makeErrorIfMissing("can.offValue","can-reflect: can not unobserve value change"),getValueDependencies:makeErrorIfMissing("can.getValueDependencies","can-reflect: can not determine dependencies"),valueHasDependencies:makeErrorIfMissing("can.valueHasDependencies","can-reflect: can not determine if value has dependencies"),onPatches:makeErrorIfMissing("can.onPatches","can-reflect: can not observe patches on object"),offPatches:makeErrorIfMissing("can.offPatches","can-reflect: can not unobserve patches on object"),onInstancePatches:makeErrorIfMissing("can.onInstancePatches","can-reflect: can not observe onInstancePatches on Type"),offInstancePatches:makeErrorIfMissing("can.offInstancePatches","can-reflect: can not unobserve onInstancePatches on Type"),onInstanceBoundChange:makeErrorIfMissing("can.onInstanceBoundChange","can-reflect: can not observe bound state change in instances."),offInstanceBoundChange:makeErrorIfMissing("can.offInstanceBoundChange","can-reflect: can not unobserve bound state change"),isBound:makeErrorIfMissing("can.isBound","can-reflect: cannot determine if object is bound"),onEvent:function(e,t,a,n){if(e){var r=e[canSymbol_1_6_1_canSymbol.for("can.onEvent")];if(r!==void 0)return r.call(e,t,a,n);e.addEventListener&&e.addEventListener(t,a,n)}},offEvent:function(e,t,a,n){if(e){var r=e[canSymbol_1_6_1_canSymbol.for("can.offEvent")];if(r!==void 0)return r.call(e,t,a,n);e.removeEventListener&&e.removeEventListener(t,a,n)}},setPriority:function(e,t){if(e){var a=e[canSymbol_1_6_1_canSymbol.for("can.setPriority")];if(void 0!==a)return a.call(e,t),!0}return!1},getPriority:function(e){if(e){var t=e[canSymbol_1_6_1_canSymbol.for("can.getPriority")];if(t!==void 0)return t.call(e)}}},getPrototypeOfWorksWithPrimitives=!0;try{}catch(t){getPrototypeOfWorksWithPrimitives=!1}var ArrayMap;if("function"==typeof Map)ArrayMap=Map;else{var isEven=function(e){return!(e%2)};ArrayMap=function(){this.contents=[]},ArrayMap.prototype={_getIndex:function(e){var t;do t=this.contents.indexOf(e,t);while(-1!==t&&!isEven(t));return t},has:function(e){return-1!==this._getIndex(e)},get:function(e){var t=this._getIndex(e);if(-1!==t)return this.contents[t+1]},set:function(e,t){var a=this._getIndex(e);-1===a?(this.contents.push(e),this.contents.push(t)):this.contents[a+1]=t},delete:function(e){var t=this._getIndex(e);-1!==t&&this.contents.splice(t,2)}}}var shiftFirstArgumentToThis=function(e){return function(){var t=[this];return t.push.apply(t,arguments),e.apply(null,t)}},getKeyValueSymbol$1=canSymbol_1_6_1_canSymbol.for("can.getKeyValue"),shiftedGetKeyValue=shiftFirstArgumentToThis(getSet.getKeyValue),setKeyValueSymbol$1=canSymbol_1_6_1_canSymbol.for("can.setKeyValue"),shiftedSetKeyValue=shiftFirstArgumentToThis(getSet.setKeyValue),sizeSymbol=canSymbol_1_6_1_canSymbol.for("can.size"),hasUpdateSymbol=helpers.makeGetFirstSymbolValue(["can.updateDeep","can.assignDeep","can.setKeyValue"]),shouldUpdateOrAssign=function(e){return type.isPlainObject(e)||Array.isArray(e)||!!hasUpdateSymbol(e)},shapeReflections;function isSerializedHelper(e){return!!type.isPrimitive(e)||!hasUpdateSymbol(e)&&type.isBuiltIn(e)&&!type.isPlainObject(e)&&!Array.isArray(e)}var Object_Keys;try{Object_Keys=Object.keys}catch(t){Object_Keys=function(e){return type.isPrimitive(e)?[]:Object.keys(e)}}function makeSerializer(e,t){function a(e){this.first=!r,this.first&&(r=n(e)),this.map=r,this.result=null}function n(e){var t=e||ArrayMap;return{unwrap:new t,serialize:new t,isSerializing:{unwrap:new t,serialize:new t},circularReferenceIsSerializing:{unwrap:new t,serialize:new t}}}var r=null;return a.prototype.end=function(){return this.first&&(r=null),this.result},function n(r,s){if(isSerializedHelper(r))return r;var o=new a(s);if(type.isValueLike(r))o.result=this[e](getSet.getValue(r));else{var l=type.isIteratorLike(r)||type.isMoreListLikeThanMapLike(r);if(o.result=l?[]:{},o.map[e].has(r))return o.map.isSerializing[e].has(r)&&o.map.circularReferenceIsSerializing[e].set(r,!0),o.map[e].get(r);o.map[e].set(r,o.result);for(var d=0,p=t.length,n;d<p;d++)if(n=r[t[d]],n){o.map.isSerializing[e].set(r,!0);var c=o.result;if(o.result=n.call(r,c),o.map.isSerializing[e].delete(r),o.result!==c){if(o.map.circularReferenceIsSerializing[e].has(r))throw o.end(),new Error("Cannot serialize cirular reference!");o.map[e].set(r,o.result)}return o.end()}"function"==typeof obj?(o.map[e].set(r,r),o.result=r):l?this.eachIndex(r,function(t,a){o.result[a]=this[e](t)},this):this.eachKey(r,function(t,a){o.result[a]=this[e](t)},this)}return o.end()}}var makeMap="undefined"==typeof Map?function(e){var t={};return e.forEach(function(e){t[e]=!0}),{get:function(e){return t[e]},set:function(e,a){t[e]=a},keys:function(){return e}}}:function(e){var t=new Map;return shapeReflections.eachIndex(e,function(e){t.set(e,!0)}),t};var fastHasOwnKey=function(e){var t=e[canSymbol_1_6_1_canSymbol.for("can.hasOwnKey")];if(t)return t.bind(e);var a=makeMap(shapeReflections.getOwnEnumerableKeys(e));return function(e){return a.get(e)}};function addPatch(e,t){var a=e[e.length-1];return a&&a.deleteCount===a.insert.length&&t.index-a.index===a.deleteCount?(a.insert.push.apply(a.insert,t.insert),void(a.deleteCount+=t.deleteCount)):void e.push(t)}function updateDeepList(e,t,a){var n=this.toArray(t),r=[],s=-1;this.eachIndex(e,function(t,o){if(s=o,o>=n.length)return a||addPatch(r,{index:o,deleteCount:e.length-o+1,insert:[]}),!1;var i=n[o];type.isPrimitive(t)||type.isPrimitive(i)||!1===shouldUpdateOrAssign(t)?addPatch(r,{index:o,deleteCount:1,insert:[i]}):this.updateDeep(t,i)},this),n.length>s&&addPatch(r,{index:s+1,deleteCount:0,insert:n.slice(s+1)});for(var o=0,l=r.length,d;o<l;o++)d=r[o],getSet.splice(e,d.index,d.deleteCount,d.insert);return e}shapeReflections={each:function(e,t,a){return type.isIteratorLike(e)||type.isMoreListLikeThanMapLike(e)?shapeReflections.eachIndex(e,t,a):shapeReflections.eachKey(e,t,a)},eachIndex:function(e,t,a){if(Array.isArray(e))return shapeReflections.eachListLike(e,t,a);var n=e[canSymbol_1_6_1_canSymbol.iterator],r;if(type.isIteratorLike(e)?r=e:n&&(r=n.call(e)),r)for(var s=0,o;!(o=r.next()).done&&!1!==t.call(a||e,o.value,s++,e););else shapeReflections.eachListLike(e,t,a);return e},eachListLike:function(e,t,a){var n=-1,r=e.length;if(r===void 0){var s=e[sizeSymbol];if(s)r=s.call(e);else throw new Error("can-reflect: unable to iterate.")}for(;++n<r;){var o=e[n];if(!1===t.call(a||o,o,n,e))break}return e},toArray:function(e){var t=[];return shapeReflections.each(e,function(e){t.push(e)}),t},eachKey:function(e,t,a){if(e){var n=shapeReflections.getOwnEnumerableKeys(e),r=e[getKeyValueSymbol$1]||shiftedGetKeyValue;return shapeReflections.eachIndex(n,function(n){var s=r.call(e,n);return t.call(a||e,s,n,e)})}return e},hasOwnKey:function(e,t){var a=e[canSymbol_1_6_1_canSymbol.for("can.hasOwnKey")];if(a)return a.call(e,t);var n=e[canSymbol_1_6_1_canSymbol.for("can.getOwnKeys")];if(n){var r=!1;return shapeReflections.eachIndex(n.call(e),function(e){if(e===t)return r=!0,!1}),r}return e.hasOwnProperty(t)},getOwnEnumerableKeys:function(e){var t=e[canSymbol_1_6_1_canSymbol.for("can.getOwnEnumerableKeys")];if(t)return t.call(e);if(e[canSymbol_1_6_1_canSymbol.for("can.getOwnKeys")]&&e[canSymbol_1_6_1_canSymbol.for("can.getOwnKeyDescriptor")]){var a=[];return shapeReflections.eachIndex(shapeReflections.getOwnKeys(e),function(t){var n=shapeReflections.getOwnKeyDescriptor(e,t);n.enumerable&&a.push(t)},this),a}return Object_Keys(e)},getOwnKeys:function(e){var t=e[canSymbol_1_6_1_canSymbol.for("can.getOwnKeys")];return t?t.call(e):Object.getOwnPropertyNames(e)},getOwnKeyDescriptor:function(e,t){var a=e[canSymbol_1_6_1_canSymbol.for("can.getOwnKeyDescriptor")];return a?a.call(e,t):Object.getOwnPropertyDescriptor(e,t)},unwrap:makeSerializer("unwrap",[canSymbol_1_6_1_canSymbol.for("can.unwrap")]),serialize:makeSerializer("serialize",[canSymbol_1_6_1_canSymbol.for("can.serialize"),canSymbol_1_6_1_canSymbol.for("can.unwrap")]),assignMap:function(e,t){var a=fastHasOwnKey(e),n=e[getKeyValueSymbol$1]||shiftedGetKeyValue,r=e[setKeyValueSymbol$1]||shiftedSetKeyValue;return shapeReflections.eachKey(t,function(t,s){a(s)&&n.call(e,s)===t||r.call(e,s,t)}),e},assignList:function(e,t){var a=shapeReflections.toArray(t);return getSet.splice(e,0,a,a),e},assign:function(e,t){return type.isIteratorLike(t)||type.isMoreListLikeThanMapLike(t)?shapeReflections.assignList(e,t):shapeReflections.assignMap(e,t),e},assignDeepMap:function(e,t){var a=fastHasOwnKey(e),n=e[getKeyValueSymbol$1]||shiftedGetKeyValue,r=e[setKeyValueSymbol$1]||shiftedSetKeyValue;return shapeReflections.eachKey(t,function(t,s){if(!a(s))getSet.setKeyValue(e,s,t);else{var o=n.call(e,s);t===o||(type.isPrimitive(o)||type.isPrimitive(t)||!1===shouldUpdateOrAssign(o)?r.call(e,s,t):shapeReflections.assignDeep(o,t))}},this),e},assignDeepList:function(e,t){return updateDeepList.call(this,e,t,!0)},assignDeep:function(e,t){var a=e[canSymbol_1_6_1_canSymbol.for("can.assignDeep")];return a?a.call(e,t):type.isMoreListLikeThanMapLike(t)?shapeReflections.assignDeepList(e,t):shapeReflections.assignDeepMap(e,t),e},updateMap:function(e,t){var a=makeMap(shapeReflections.getOwnEnumerableKeys(t)),n=t[getKeyValueSymbol$1]||shiftedGetKeyValue,r=e[setKeyValueSymbol$1]||shiftedSetKeyValue;return shapeReflections.eachKey(e,function(s,o){if(!a.get(o))return void getSet.deleteKeyValue(e,o);a.set(o,!1);var i=n.call(t,o);i!==s&&r.call(e,o,i)},this),shapeReflections.eachIndex(a.keys(),function(s){a.get(s)&&r.call(e,s,n.call(t,s))}),e},updateList:function(e,t){var a=shapeReflections.toArray(t);return getSet.splice(e,0,e,a),e},update:function(e,t){return type.isIteratorLike(t)||type.isMoreListLikeThanMapLike(t)?shapeReflections.updateList(e,t):shapeReflections.updateMap(e,t),e},updateDeepMap:function(e,t){var a=makeMap(shapeReflections.getOwnEnumerableKeys(t)),n=t[getKeyValueSymbol$1]||shiftedGetKeyValue,r=e[setKeyValueSymbol$1]||shiftedSetKeyValue;return shapeReflections.eachKey(e,function(s,o){if(!a.get(o))return void getSet.deleteKeyValue(e,o);a.set(o,!1);var i=n.call(t,o);type.isPrimitive(s)||type.isPrimitive(i)||!1===shouldUpdateOrAssign(s)?r.call(e,o,i):shapeReflections.updateDeep(s,i)},this),shapeReflections.eachIndex(a.keys(),function(s){a.get(s)&&r.call(e,s,n.call(t,s))}),e},updateDeepList:function(e,t){return updateDeepList.call(this,e,t)},updateDeep:function(e,t){var a=e[canSymbol_1_6_1_canSymbol.for("can.updateDeep")];return a?a.call(e,t):type.isMoreListLikeThanMapLike(t)?shapeReflections.updateDeepList(e,t):shapeReflections.updateDeepMap(e,t),e},hasKey:function(e,t){if(null==e)return!1;if(type.isPrimitive(e)){if(Object.prototype.hasOwnProperty.call(e,t))return!0;var a;return a=getPrototypeOfWorksWithPrimitives?Object.getPrototypeOf(e):e.__proto__,void 0===a?void 0!==e[t]:t in a}var n=e[canSymbol_1_6_1_canSymbol.for("can.hasKey")];if(n)return n.call(e,t);var r=shapeReflections.hasOwnKey(e,t);return r||t in e},getAllEnumerableKeys:function(){},getAllKeys:function(){},assignSymbols:function(e,t){return shapeReflections.eachKey(t,function(t,a){var n=type.isSymbolLike(canSymbol_1_6_1_canSymbol[a])?canSymbol_1_6_1_canSymbol[a]:canSymbol_1_6_1_canSymbol.for(a);getSet.setKeyValue(e,n,t)}),e},isSerialized:isSerializedHelper,size:function(e){if(null==e)return 0;var t=e[sizeSymbol],a=0;return t?t.call(e):helpers.hasLength(e)?e.length:type.isListLike(e)?(shapeReflections.eachIndex(e,function(){a++}),a):e?shapeReflections.getOwnEnumerableKeys(e).length:void 0},defineInstanceKey:function(e,t,a){var n=e[canSymbol_1_6_1_canSymbol.for("can.defineInstanceKey")];if(n)return n.call(e,t,a);var r=e.prototype;n=r[canSymbol_1_6_1_canSymbol.for("can.defineInstanceKey")],n?n.call(r,t,a):Object.defineProperty(r,t,shapeReflections.assign({configurable:!0,enumerable:!type.isSymbolLike(t),writable:!0},a))}},shapeReflections.isSerializable=shapeReflections.isSerialized,shapeReflections.keys=shapeReflections.getOwnEnumerableKeys;var shape=shapeReflections,getSchemaSymbol=canSymbol_1_6_1_canSymbol.for("can.getSchema"),isMemberSymbol=canSymbol_1_6_1_canSymbol.for("can.isMember"),newSymbol=canSymbol_1_6_1_canSymbol.for("can.new");function comparator(e,t){return e.localeCompare(t)}function sort(e){if(type.isPrimitive(e))return e;var t;return type.isListLike(e)?(t=[],shape.eachKey(e,function(e){t.push(sort(e))}),t):type.isMapLike(e)?(t={},shape.getOwnKeys(e).sort(comparator).forEach(function(a){t[a]=sort(getSet.getKeyValue(e,a))}),t):e}function isPrimitiveConverter(e){return e===Number||e===String||e===Boolean}var schemaReflections={getSchema:function(e){if(void 0!==e){var t=e[getSchemaSymbol];return void 0===t&&(e=e.constructor,t=e&&e[getSchemaSymbol]),void 0===t?void 0:t.call(e)}},getIdentity:function(e,t){if(t=t||schemaReflections.getSchema(e),void 0===t)throw new Error("can-reflect.getIdentity - Unable to find a schema for the given value.");var a=t.identity;if(!a||0===a.length)throw new Error("can-reflect.getIdentity - Provided schema lacks an identity property.");else{if(1===a.length)return getSet.getKeyValue(e,a[0]);var n={};return a.forEach(function(t){n[t]=getSet.getKeyValue(e,t)}),JSON.stringify(schemaReflections.cloneKeySort(n))}},cloneKeySort:function(e){return sort(e)},convert:function(e,t){if(isPrimitiveConverter(t))return t(e);var a=t[isMemberSymbol],n=!1,r=typeof t,s=t[newSymbol];if(void 0===a?"function"==r&&type.isConstructorLike(t)&&(n=e instanceof t):n=a.call(t,e),n)return e;if(void 0!==s)return s.call(t,e);if("function"==r)return type.isConstructorLike(t)?new t(e):t(e);throw new Error("can-reflect: Can not convert values into type. Type must provide `can.new` symbol.")}},schema=schemaReflections,getNameSymbol=canSymbol_1_6_1_canSymbol.for("can.getName");function setName(e,t){if("function"!=typeof t){var a=t;t=function(){return a}}Object.defineProperty(e,getNameSymbol,{value:t})}function getName(e){var t=typeof e;if(null===e||"object"!=t&&"function"!=t)return""+e;var a=e[getNameSymbol];if(a)return a.call(e);if("function"==t)return e.name;if(e.constructor&&e!==e.constructor){var n=getName(e.constructor);if(n){if(type.isValueLike(e))return n+"<>";if(type.isMoreListLikeThanMapLike(e))return n+"[]";if(type.isMapLike(e))return n+"{}"}}}var getName_1={setName:setName,getName:getName};function keysPolyfill(){var e=[],t=0;return this.forEach(function(t,a){e.push(a)}),{next:function(){return{value:e[t],done:t++===e.length}}}}"undefined"!=typeof Map&&(shape.assignSymbols(Map.prototype,{"can.getOwnEnumerableKeys":Map.prototype.keys,"can.setKeyValue":Map.prototype.set,"can.getKeyValue":Map.prototype.get,"can.deleteKeyValue":Map.prototype["delete"],"can.hasOwnKey":Map.prototype.has}),"function"!=typeof Map.prototype.keys&&(Map.prototype.keys=Map.prototype[canSymbol_1_6_1_canSymbol.for("can.getOwnEnumerableKeys")]=keysPolyfill)),"undefined"!=typeof WeakMap&&shape.assignSymbols(WeakMap.prototype,{"can.getOwnEnumerableKeys":function(){throw new Error("can-reflect: WeakMaps do not have enumerable keys.")},"can.setKeyValue":WeakMap.prototype.set,"can.getKeyValue":WeakMap.prototype.get,"can.deleteKeyValue":WeakMap.prototype["delete"],"can.hasOwnKey":WeakMap.prototype.has}),"undefined"!=typeof Set&&(shape.assignSymbols(Set.prototype,{"can.isMoreListLikeThanMapLike":!0,"can.updateValues":function(e,t,a){t!==a&&shape.each(t,function(e){this.delete(e)},this),shape.each(a,function(e){this.add(e)},this)},"can.size":function(){return this.size}}),"function"!=typeof Set.prototype[canSymbol_1_6_1_canSymbol.iterator]&&(Set.prototype[canSymbol_1_6_1_canSymbol.iterator]=function(){var e=[],t=0;return this.forEach(function(t){e.push(t)}),{next:function(){return{value:e[t],done:t++===e.length}}}})),"undefined"!=typeof WeakSet&&shape.assignSymbols(WeakSet.prototype,{"can.isListLike":!0,"can.isMoreListLikeThanMapLike":!0,"can.updateValues":function(e,t,a){t!==a&&shape.each(t,function(e){this.delete(e)},this),shape.each(a,function(e){this.add(e)},this)},"can.size":function(){throw new Error("can-reflect: WeakSets do not have enumerable keys.")}});var reflect={};[call,getSet,observe,shape,type,getName_1,schema].forEach(function(e){for(var t in e)reflect[t]=e[t]});var canReflect_1_17_4_canReflect=canNamespace_1_0_0_canNamespace.Reflect=reflect,commonjsGlobal="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?{}:self:global:window;function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function createCommonjsModule(e,t){return t={exports:{}},e(t,t.exports),t.exports}var warnTimeout=5e3,logLevel=0,warn=function(){var e=this.logLevel;2>e&&("undefined"!=typeof console&&console.warn?this._logger("warn",Array.prototype.slice.call(arguments)):"undefined"!=typeof console&&console.log&&this._logger("log",Array.prototype.slice.call(arguments)))},log=function(){var e=this.logLevel;1>e&&"undefined"!=typeof console&&console.log&&this._logger("log",Array.prototype.slice.call(arguments))},error=function(){var e=this.logLevel;1>e&&"undefined"!=typeof console&&console.error&&this._logger("error",Array.prototype.slice.call(arguments))},_logger=function(t,a){try{console[t].apply(console,a)}catch(n){console[t](a)}},canLog_1_0_0_canLog={warnTimeout:5000,logLevel:logLevel,warn:warn,log:log,error:error,_logger:_logger},dev={warnTimeout:5e3,logLevel:0,stringify:function(e){return JSON.stringify(e,function(e,t){return t===void 0?"/* void(undefined) */":t},"  ").replace(/"\/\* void\(undefined\) \*\/"/g,"undefined")},warn:function(){},log:function(){},error:function(){},_logger:canLog_1_0_0_canLog._logger},canQueues_1_1_3_queueState={lastTask:null},canAssign_1_3_1_canAssign=canNamespace_1_0_0_canNamespace.assign=function(e,t){for(var a in t){var n=Object.getOwnPropertyDescriptor(e,a);n&&!1===n.writable||(e[a]=t[a])}return e};function noOperation(){}var Queue=function(e,t){this.callbacks=canAssign_1_3_1_canAssign({onFirstTask:noOperation,onComplete:function(){canQueues_1_1_3_queueState.lastTask=null}},t||{}),this.name=e,this.index=0,this.tasks=[],this._log=!1};Queue.prototype.constructor=Queue,Queue.noop=noOperation,Queue.prototype.enqueue=function(e,t,a,n){var r=this.tasks.push({fn:e,context:t,args:a,meta:n||{}});1===r&&this.callbacks.onFirstTask(this)},Queue.prototype.flush=function(){for(;this.index<this.tasks.length;){var e=this.tasks[this.index++];e.fn.apply(e.context,e.args)}this.index=0,this.tasks=[],this.callbacks.onComplete(this)},Queue.prototype.log=function(){this._log=!arguments.length||arguments[0]};var canQueues_1_1_3_queue=Queue,PriorityQueue=function(){canQueues_1_1_3_queue.apply(this,arguments),this.taskMap=new Map,this.taskContainersByPriority=[],this.curPriorityIndex=1/0,this.curPriorityMax=0,this.isFlushing=!1,this.tasksRemaining=0};PriorityQueue.prototype=Object.create(canQueues_1_1_3_queue.prototype),PriorityQueue.prototype.constructor=PriorityQueue,PriorityQueue.prototype.enqueue=function(e,t,a,n){if(!this.taskMap.has(e)){this.tasksRemaining++;var r=0===this.taskContainersByPriority.length,s={fn:e,context:t,args:a,meta:n||{}},o=this.getTaskContainerAndUpdateRange(s);o.tasks.push(s),this.taskMap.set(e,s),r&&this.callbacks.onFirstTask(this)}},PriorityQueue.prototype.getTaskContainerAndUpdateRange=function(e){var t=e.meta.priority||0;t<this.curPriorityIndex&&(this.curPriorityIndex=t),t>this.curPriorityMax&&(this.curPriorityMax=t);var a=this.taskContainersByPriority,n=a[t];return n||(n=a[t]={tasks:[],index:0}),n},PriorityQueue.prototype.flush=function(){if(!this.isFlushing)for(this.isFlushing=!0;;)if(this.curPriorityIndex<=this.curPriorityMax){var e=this.taskContainersByPriority[this.curPriorityIndex];if(e&&e.tasks.length>e.index){var t=e.tasks[e.index++];this.tasksRemaining--,this.taskMap["delete"](t.fn),t.fn.apply(t.context,t.args)}else this.curPriorityIndex++}else return this.taskMap=new Map,this.curPriorityIndex=1/0,this.curPriorityMax=0,this.taskContainersByPriority=[],this.isFlushing=!1,void this.callbacks.onComplete(this)},PriorityQueue.prototype.isEnqueued=function(e){return this.taskMap.has(e)},PriorityQueue.prototype.flushQueuedTask=function(e){var t=this.dequeue(e);t&&t.fn.apply(t.context,t.args)},PriorityQueue.prototype.dequeue=function(e){var t=this.taskMap.get(e);if(t){var a=t.meta.priority||0,n=this.taskContainersByPriority[a],r=n.tasks.indexOf(t,n.index);if(0<=r)return n.tasks.splice(r,1),this.tasksRemaining--,this.taskMap["delete"](t.fn),t;console.warn("Task",e,"has already run")}},PriorityQueue.prototype.tasksRemainingCount=function(){return this.tasksRemaining};var canQueues_1_1_3_priorityQueue=PriorityQueue,CompletionQueue=function(){canQueues_1_1_3_queue.apply(this,arguments),this.flushCount=0};CompletionQueue.prototype=Object.create(canQueues_1_1_3_queue.prototype),CompletionQueue.prototype.constructor=CompletionQueue,CompletionQueue.prototype.flush=function(){if(0===this.flushCount){for(this.flushCount++;this.index<this.tasks.length;){var e=this.tasks[this.index++];e.fn.apply(e.context,e.args)}this.index=0,this.tasks=[],this.flushCount--,this.callbacks.onComplete(this)}};var canQueues_1_1_3_completionQueue=CompletionQueue,canQueues_1_1_3_canQueues=createCommonjsModule(function(e){var t=0,a=!1,n=0,r=["notify","derive","domUI","mutate"],s,o,i,l,d;o=new canQueues_1_1_3_queue("NOTIFY",{onComplete:function(){i.flush()},onFirstTask:function(){t?a=!0:o.flush()}}),i=new canQueues_1_1_3_priorityQueue("DERIVE",{onComplete:function(){l.flush()},onFirstTask:function(){a=!0}}),l=new canQueues_1_1_3_completionQueue("DOM_UI",{onComplete:function(){d.flush()},onFirstTask:function(){a=!0}}),d=new canQueues_1_1_3_queue("MUTATE",{onComplete:function(){canQueues_1_1_3_queueState.lastTask=null},onFirstTask:function(){a=!0}});var p={Queue:canQueues_1_1_3_queue,PriorityQueue:canQueues_1_1_3_priorityQueue,CompletionQueue:canQueues_1_1_3_completionQueue,notifyQueue:o,deriveQueue:i,domUIQueue:l,mutateQueue:d,batch:{start:function(){t++,1==t&&(n++,s={number:n})},stop:function(){t--,0==t&&a&&(a=!1,o.flush())},isCollecting:function(){return 0<t},number:function(){return n},data:function(){return s}},enqueueByQueue:function(e,t,a,n,s){e&&(p.batch.start(),r.forEach(function(r){var o=p[r+"Queue"],i=e[r];i!==void 0&&i.forEach(function(e){var r=null==n?{}:n(e,t,a);r.reasonLog=s,o.enqueue(e,t,a,r)})}),p.batch.stop())},stack:function(){for(var e=canQueues_1_1_3_queueState.lastTask,t=[];e;)t.unshift(e),e=e.meta.parentTask;return t},logStack:function(){var e=this.stack();e.forEach(function(e,t){var a=e.meta;0===t&&a&&a.reasonLog&&dev.log.apply(dev,a.reasonLog);var n=a&&a.log?a.log:[e.fn.name,e];dev.log.apply(dev,[e.meta.stack.name+" ran task:"].concat(n))})},taskCount:function(){return o.tasks.length+i.tasks.length+l.tasks.length+d.tasks.length},flush:function(){o.flush()},log:function(){o.log.apply(o,arguments),i.log.apply(i,arguments),l.log.apply(l,arguments),d.log.apply(d,arguments)}};if(canNamespace_1_0_0_canNamespace.queues)throw new Error("You can't have two versions of can-queues, check your dependencies");else e.exports=canNamespace_1_0_0_canNamespace.queues=p}),canObservationRecorder_1_2_0_canObservationRecorder=createCommonjsModule(function(e){var t=[],a=canSymbol_1_6_1_canSymbol.for("can.addParent"),n={stack:t,start:function(){var e={keyDependencies:new Map,valueDependencies:new Set,childDependencies:new Set,traps:null,ignore:0};return t.push(e),e},stop:function(){return t.pop()},add:function(e,a){var n=t[t.length-1];if(n&&0===n.ignore)if(n.traps)n.traps.push([e,a]);else if(void 0===a)n.valueDependencies.add(e);else{var r=n.keyDependencies.get(e);r||(r=new Set,n.keyDependencies.set(e,r)),r.add(a)}},addMany:function(e){var a=t[t.length-1];if(a)if(a.traps)a.traps.push.apply(a.traps,e);else for(var n=0,r=e.length;n<r;n++)this.add(e[n][0],e[n][1])},created:function(e){var n=t[t.length-1];n&&(n.childDependencies.add(e),e[a]&&e[a](n))},ignore:function(e){return function(){if(t.length){var a=t[t.length-1];a.ignore++;var n=e.apply(this,arguments);return a.ignore--,n}return e.apply(this,arguments)}},isRecording:function(){var e=t.length,a=e&&t[e-1];return a&&0===a.ignore&&a},makeDependenciesRecord:function(){return{traps:null,keyDependencies:new Map,valueDependencies:new Set,ignore:0}},makeDependenciesRecorder:function(){return n.makeDependenciesRecord()},trap:function(){if(t.length){var e=t[t.length-1],a=e.traps,n=e.traps=[];return function(){return e.traps=a,n}}return function(){return[]}},trapsCount:function(){if(t.length){var e=t[t.length-1];return e.traps.length}return 0}};if(canNamespace_1_0_0_canNamespace.ObservationRecorder)throw new Error("You can't have two versions of can-observation-recorder, check your dependencies");else e.exports=canNamespace_1_0_0_canNamespace.ObservationRecorder=n});function isBuiltInPrototype(e){if(e===Object.prototype)return!0;var t=Object.prototype.toString.call(e),a=-1!==t.indexOf("[object ");return"[object Object]"!==t&&a}function getDeepSize(e,t){if(0===t)return canReflect_1_17_4_canReflect.size(e);if(0===canReflect_1_17_4_canReflect.size(e))return 0;var a=0;return canReflect_1_17_4_canReflect.each(e,function(e){a+=getDeepSize(e,t-1)}),a}function getDeep(e,t,a,n){if(e)if(n!==a)canReflect_1_17_4_canReflect.each(e,function(e){getDeep(e,t,a+1,n)});else if(canReflect_1_17_4_canReflect.isMoreListLikeThanMapLike(e))canReflect_1_17_4_canReflect.addValues(t,canReflect_1_17_4_canReflect.toArray(e));else throw new Error("can-key-tree: Map-type leaf containers are not supported yet.")}function clearDeep(e,t,a,n){if(!(a===t.length))canReflect_1_17_4_canReflect.each(e,function(r,s){clearDeep(r,t.concat(s),a,n),canReflect_1_17_4_canReflect.deleteKeyValue(e,s)});else if(canReflect_1_17_4_canReflect.isMoreListLikeThanMapLike(e)){var r=canReflect_1_17_4_canReflect.toArray(e);n&&r.forEach(function(e){n.apply(null,t.concat(e))}),canReflect_1_17_4_canReflect.removeValues(e,r)}else throw new Error("can-key-tree: Map-type leaf containers are not supported yet.")}var KeyTree=function(e,t){var a=e[0];this.root=canReflect_1_17_4_canReflect.isConstructorLike(a)?new a:a,this.callbacks=t||{},this.treeStructure=e,this.empty=!0};canReflect_1_17_4_canReflect.assign(KeyTree.prototype,{add:function(e){if(e.length>this.treeStructure.length)throw new Error("can-key-tree: Can not add path deeper than tree.");for(var t=this.root,a=!0===this.empty,n=0;n<e.length-1;n++){var r=e[n],s=canReflect_1_17_4_canReflect.getKeyValue(t,r);if(!s){var o=this.treeStructure[n+1];s=isBuiltInPrototype(o.prototype)?new o:new o(r),canReflect_1_17_4_canReflect.setKeyValue(t,r,s)}t=s}if(canReflect_1_17_4_canReflect.isMoreListLikeThanMapLike(t))canReflect_1_17_4_canReflect.addValues(t,[e[e.length-1]]);else throw new Error("can-key-tree: Map types are not supported yet.");return a&&(this.empty=!1,this.callbacks.onFirst&&this.callbacks.onFirst.call(this)),this},getNode:function(e){for(var t=this.root,a=0,n;a<e.length;a++)if(n=e[a],t=canReflect_1_17_4_canReflect.getKeyValue(t,n),!t)return;return t},get:function(e){var t=this.getNode(e);if(this.treeStructure.length===e.length)return t;var a=this.treeStructure[this.treeStructure.length-1],n=new a;return getDeep(t,n,e.length,this.treeStructure.length-1),n},delete:function(e,t){for(var a=this.root,n=[this.root],r=e[e.length-1],s=0;s<e.length-1;s++){var o=e[s],l=canReflect_1_17_4_canReflect.getKeyValue(a,o);if(void 0===l)return!1;n.push(l),a=l}if(!e.length)clearDeep(a,[],this.treeStructure.length-1,t);else if(e.length!==this.treeStructure.length){var d=canReflect_1_17_4_canReflect.getKeyValue(a,r);if(void 0!==d)clearDeep(d,e,this.treeStructure.length-1,t),canReflect_1_17_4_canReflect.deleteKeyValue(a,r);else return!1}else if(canReflect_1_17_4_canReflect.isMoreListLikeThanMapLike(a))t&&t.apply(null,e.concat(r)),canReflect_1_17_4_canReflect.removeValues(a,[r]);else throw new Error("can-key-tree: Map types are not supported yet.");for(s=n.length-2;0<=s&&0===canReflect_1_17_4_canReflect.size(a);s--)a=n[s],canReflect_1_17_4_canReflect.deleteKeyValue(a,e[s]);return 0===canReflect_1_17_4_canReflect.size(this.root)&&(this.empty=!0,this.callbacks.onEmpty&&this.callbacks.onEmpty.call(this)),!0},size:function(){return getDeepSize(this.root,this.treeStructure.length-1)},isEmpty:function(){return this.empty}});var canKeyTree_1_2_0_canKeyTree=KeyTree,canDefineLazyValue_1_1_0_defineLazyValue=function(e,t,a,n){Object.defineProperty(e,t,{configurable:!0,get:function(){Object.defineProperty(this,t,{value:void 0,writable:!0});var r=a.call(this,e,t);return Object.defineProperty(this,t,{value:r,writable:!!n}),r},set:function(e){return Object.defineProperty(this,t,{value:e,writable:!!n}),e}})},properties={on:function(e,t){this.handlers.add([t||"mutate",e])},off:function(e,t){e===void 0?t===void 0?this.handlers.delete([]):this.handlers.delete([t]):this.handlers.delete([t||"mutate",e])}},symbols={"can.onValue":properties.on,"can.offValue":properties.off,"can.dispatch":function(e,t){var a=[];a=[this.handlers.getNode([]),this,[e,t]],canQueues_1_1_3_canQueues.enqueueByQueue.apply(canQueues_1_1_3_canQueues,a)},"can.getWhatIChange":function(){},"can.isBound":function(){return!this.handlers.isEmpty()}};function defineLazyHandlers(){return new canKeyTree_1_2_0_canKeyTree([Object,Array],{onFirst:this.onBound!==void 0&&this.onBound.bind(this),onEmpty:this.onUnbound!==void 0&&this.onUnbound.bind(this)})}var mixinValueEventBindings=function(e){return canReflect_1_17_4_canReflect.assign(e,properties),canReflect_1_17_4_canReflect.assignSymbols(e,symbols),canDefineLazyValue_1_1_0_defineLazyValue(e,"handlers",defineLazyHandlers,!0),e};mixinValueEventBindings.addHandlers=function(e,t){return console.warn("can-event-queue/value: Avoid using addHandlers. Add onBound and onUnbound methods instead."),e.handlers=new canKeyTree_1_2_0_canKeyTree([Object,Array],t),e};var value=mixinValueEventBindings;function addNewKeyDependenciesIfNotInOld(e){(this.oldEventSet===void 0||!1===this.oldEventSet["delete"](e))&&canReflect_1_17_4_canReflect.onKeyValue(this.observable,e,this.onDependencyChange,"notify")}function addObservablesNewKeyDependenciesIfNotInOld(e,t){e.forEach(addNewKeyDependenciesIfNotInOld,{onDependencyChange:this.onDependencyChange,observable:t,oldEventSet:this.oldDependencies.keyDependencies.get(t)})}function removeKeyDependencies(e){canReflect_1_17_4_canReflect.offKeyValue(this.observable,e,this.onDependencyChange,"notify")}function removeObservablesKeyDependencies(e,t){e.forEach(removeKeyDependencies,{onDependencyChange:this.onDependencyChange,observable:t})}function addValueDependencies(e){!1===this.oldDependencies.valueDependencies.delete(e)&&canReflect_1_17_4_canReflect.onValue(e,this.onDependencyChange,"notify")}function removeValueDependencies(e){canReflect_1_17_4_canReflect.offValue(e,this.onDependencyChange,"notify")}var canObservation_4_1_0_recorderDependencyHelpers={updateObservations:function(e){e.newDependencies.keyDependencies.forEach(addObservablesNewKeyDependenciesIfNotInOld,e),e.oldDependencies.keyDependencies.forEach(removeObservablesKeyDependencies,e),e.newDependencies.valueDependencies.forEach(addValueDependencies,e),e.oldDependencies.valueDependencies.forEach(removeValueDependencies,e)},stopObserving:function(e,t){e.keyDependencies.forEach(removeObservablesKeyDependencies,{onDependencyChange:t}),e.valueDependencies.forEach(removeValueDependencies,{onDependencyChange:t})}},temporarilyBoundNoOperation=function(){},unbindTemporarilyBoundValue=function(){for(var e=0,t=observables.length;e<t;e++)canReflect_1_17_4_canReflect.offValue(observables[e],temporarilyBoundNoOperation);observables=null},observables;function temporarilyBind(e){var t=e.computeInstance||e;canReflect_1_17_4_canReflect.onValue(t,temporarilyBoundNoOperation),observables||(observables=[],setTimeout(unbindTemporarilyBoundValue,10)),observables.push(t)}var canObservation_4_1_0_temporarilyBind=temporarilyBind,dispatchSymbol=canSymbol_1_6_1_canSymbol.for("can.dispatch"),getChangesSymbol=canSymbol_1_6_1_canSymbol.for("can.getChangesDependencyRecord"),getValueDependenciesSymbol=canSymbol_1_6_1_canSymbol.for("can.getValueDependencies");function Observation(e,t,a){this.func=e,this.context=t,this.options=a||{priority:0,isObservable:!0},this.bound=!1,this._value=void 0,this.newDependencies=canObservationRecorder_1_2_0_canObservationRecorder.makeDependenciesRecord(),this.oldDependencies=null;var n=this;this.onDependencyChange=function(e){n.dependencyChange(this,e)},this.update=this.update.bind(this)}value(Observation.prototype),canReflect_1_17_4_canReflect.assign(Observation.prototype,{onBound:function(){this.bound=!0,this.oldDependencies=this.newDependencies,canObservationRecorder_1_2_0_canObservationRecorder.start(),this._value=this.func.call(this.context),this.newDependencies=canObservationRecorder_1_2_0_canObservationRecorder.stop(),canObservation_4_1_0_recorderDependencyHelpers.updateObservations(this)},dependencyChange:function(){if(!0===this.bound){var e=[];e=[this.update,this,[],{priority:this.options.priority}],canQueues_1_1_3_canQueues.deriveQueue.enqueue.apply(canQueues_1_1_3_canQueues.deriveQueue,e)}},update:function(){if(!0===this.bound){var e=this._value;this.oldValue=null,this.onBound(),e!==this._value&&this[dispatchSymbol](this._value,e)}},onUnbound:function(){this.bound=!1,canObservation_4_1_0_recorderDependencyHelpers.stopObserving(this.newDependencies,this.onDependencyChange),this.newDependencies=canObservationRecorder_1_2_0_canObservationRecorder.makeDependenciesRecorder()},get:function(){return this.options.isObservable&&canObservationRecorder_1_2_0_canObservationRecorder.isRecording()&&(canObservationRecorder_1_2_0_canObservationRecorder.add(this),!this.bound&&Observation.temporarilyBind(this)),!0===this.bound?(0<canQueues_1_1_3_canQueues.deriveQueue.tasksRemainingCount()&&Observation.updateChildrenAndSelf(this),this._value):this.func.call(this.context)},hasDependencies:function(){var e=this.newDependencies;return this.bound?0<e.valueDependencies.size+e.keyDependencies.size:void 0},log:function(){}}),Object.defineProperty(Observation.prototype,"value",{get:function(){return this.get()}});var observationProto={"can.getValue":Observation.prototype.get,"can.isValueLike":!0,"can.isMapLike":!1,"can.isListLike":!1,"can.valueHasDependencies":Observation.prototype.hasDependencies,"can.getValueDependencies":function(){if(!0===this.bound){var e=this.newDependencies,t={};return e.keyDependencies.size&&(t.keyDependencies=e.keyDependencies),e.valueDependencies.size&&(t.valueDependencies=e.valueDependencies),t}},"can.getPriority":function(){return this.options.priority},"can.setPriority":function(e){this.options.priority=e}};canReflect_1_17_4_canReflect.assignSymbols(Observation.prototype,observationProto),Observation.updateChildrenAndSelf=function(e){if(void 0!==e.update&&!0===canQueues_1_1_3_canQueues.deriveQueue.isEnqueued(e.update))return canQueues_1_1_3_canQueues.deriveQueue.flushQueuedTask(e.update),!0;if(e[getValueDependenciesSymbol]){var t=!1,a=e[getValueDependenciesSymbol]().valueDependencies||[];return a.forEach(function(e){!0===Observation.updateChildrenAndSelf(e)&&(t=!0)}),t}return!1};var alias={addAll:"addMany"};["add","addAll","ignore","trap","trapsCount","isRecording"].forEach(function(e){Observation[e]=function(){var t=alias[e]?alias[e]:e;return console.warn("can-observation: Call "+t+"() on can-observation-recorder."),canObservationRecorder_1_2_0_canObservationRecorder[t].apply(this,arguments)}}),Observation.prototype.start=function(){return console.warn("can-observation: Use .on and .off to bind."),this.onBound()},Observation.prototype.stop=function(){return console.warn("can-observation: Use .on and .off to bind."),this.onUnbound()},Observation.temporarilyBind=canObservation_4_1_0_temporarilyBind;var canObservation_4_1_0_canObservation=canNamespace_1_0_0_canNamespace.Observation=Observation,canSimpleObservable_2_2_0_log=function(){},dispatchSymbol$1=canSymbol_1_6_1_canSymbol.for("can.dispatch");function SimpleObservable(e){this.value=e}value(SimpleObservable.prototype),Object.assign(SimpleObservable.prototype,{log:canSimpleObservable_2_2_0_log,get:function(){return canObservationRecorder_1_2_0_canObservationRecorder.add(this),this.value},set:function(e){var t=this.value;this.value=e,this[dispatchSymbol$1](e,t)}});var simpleObservableProto={"can.getValue":SimpleObservable.prototype.get,"can.setValue":SimpleObservable.prototype.set,"can.isMapLike":!1,"can.valueHasDependencies":function(){return!0}};canReflect_1_17_4_canReflect.assignSymbols(SimpleObservable.prototype,simpleObservableProto);var canSimpleObservable_2_2_0_canSimpleObservable=canNamespace_1_0_0_canNamespace.SimpleObservable=SimpleObservable,peek=canObservationRecorder_1_2_0_canObservationRecorder.ignore(canReflect_1_17_4_canReflect.getValue.bind(canReflect_1_17_4_canReflect));function SettableObservable(e,t,a){this.lastSetValue=new canSimpleObservable_2_2_0_canSimpleObservable(a),this.handler=this.handler.bind(this),this.observation=new canObservation_4_1_0_canObservation(function(){return e.call(t,this.lastSetValue.get())},this)}value(SettableObservable.prototype),Object.assign(SettableObservable.prototype,{log:canSimpleObservable_2_2_0_log,constructor:SettableObservable,handler:function(e){var t=this.value;this.value=e,canQueues_1_1_3_canQueues.enqueueByQueue(this.handlers.getNode([]),this,[e,t],function(){return{}})},onBound:function(){this.bound||(this.bound=!0,this.activate())},activate:function(){canReflect_1_17_4_canReflect.onValue(this.observation,this.handler,"notify"),this.value=peek(this.observation)},onUnbound:function(){this.bound=!1,canReflect_1_17_4_canReflect.offValue(this.observation,this.handler,"notify")},set:function(e){var t=this.lastSetValue.get();canReflect_1_17_4_canReflect.isObservableLike(t)&&canReflect_1_17_4_canReflect.isValueLike(t)&&!canReflect_1_17_4_canReflect.isObservableLike(e)?canReflect_1_17_4_canReflect.setValue(t,e):e!==t&&this.lastSetValue.set(e)},get:function(){return canObservationRecorder_1_2_0_canObservationRecorder.isRecording()&&(canObservationRecorder_1_2_0_canObservationRecorder.add(this),!this.bound&&this.onBound()),!0===this.bound?this.value:this.observation.get()},hasDependencies:function(){return canReflect_1_17_4_canReflect.valueHasDependencies(this.observation)},getValueDependencies:function(){return canReflect_1_17_4_canReflect.getValueDependencies(this.observation)}}),canReflect_1_17_4_canReflect.assignSymbols(SettableObservable.prototype,{"can.getValue":SettableObservable.prototype.get,"can.setValue":SettableObservable.prototype.set,"can.isMapLike":!1,"can.getPriority":function(){return canReflect_1_17_4_canReflect.getPriority(this.observation)},"can.setPriority":function(e){canReflect_1_17_4_canReflect.setPriority(this.observation,e)},"can.valueHasDependencies":SettableObservable.prototype.hasDependencies,"can.getValueDependencies":SettableObservable.prototype.getValueDependencies});var settable=SettableObservable;function AsyncObservable(e,t,a){this.resolve=this.resolve.bind(this),this.lastSetValue=new canSimpleObservable_2_2_0_canSimpleObservable(a),this.handler=this.handler.bind(this),this.observation=new canObservation_4_1_0_canObservation(function(){this.resolveCalled=!1,this.inGetter=!0;var a=e.call(t,this.lastSetValue.get(),!0===this.bound?this.resolve:void 0);if(this.inGetter=!1,void 0===a?this.resolveCalled&&this.resolve(this.value):this.resolve(a),!0!==this.bound)return a},this)}AsyncObservable.prototype=Object.create(settable.prototype),AsyncObservable.prototype.constructor=AsyncObservable,AsyncObservable.prototype.handler=function(e){e!==void 0&&settable.prototype.handler.apply(this,arguments)};var peek$1=canObservationRecorder_1_2_0_canObservationRecorder.ignore(canReflect_1_17_4_canReflect.getValue.bind(canReflect_1_17_4_canReflect));AsyncObservable.prototype.activate=function(){canReflect_1_17_4_canReflect.onValue(this.observation,this.handler,"notify"),this.resolveCalled||(this.value=peek$1(this.observation))},AsyncObservable.prototype.resolve=function(e){this.resolveCalled=!0;var t=this.value;if(this.value=e,!this.inGetter){var a=[this.handlers.getNode([]),this,[e,t],null];canQueues_1_1_3_canQueues.enqueueByQueue.apply(canQueues_1_1_3_canQueues,a)}};var async=AsyncObservable;function dispatch(e){var t=this.eventHandlers[e];if(t)for(var a=t.slice(),n=this.getKeyValue(e),r=0;r<a.length;r++)a[r](n)}function Globals(){this.eventHandlers={},this.properties={}}Globals.prototype.define=function(e,t,a){return void 0===a&&(a=!0),this.properties[e]||(this.properties[e]={default:t,value:t,enableCache:a}),this},Globals.prototype.getKeyValue=function(e){var t=this.properties[e];if(t)return"function"==typeof t.value?t.cachedValue?t.cachedValue:t.enableCache?(t.cachedValue=t.value(),t.cachedValue):t.value():t.value},Globals.prototype.makeExport=function(e){return function(t){return 0===arguments.length?this.getKeyValue(e):"undefined"==typeof t||null===t?void this.deleteKeyValue(e):("function"==typeof t?this.setKeyValue(e,function(){return t}):this.setKeyValue(e,t),t)}.bind(this)},Globals.prototype.offKeyValue=function(e,t){if(this.properties[e]){var a=this.eventHandlers[e];if(a){var n=a.indexOf(t);a.splice(n,1)}}return this},Globals.prototype.onKeyValue=function(e,t){return this.properties[e]&&(!this.eventHandlers[e]&&(this.eventHandlers[e]=[]),this.eventHandlers[e].push(t)),this},Globals.prototype.deleteKeyValue=function(e){var t=this.properties[e];return void 0!==t&&(t.value=t.default,t.cachedValue=void 0,dispatch.call(this,e)),this},Globals.prototype.setKeyValue=function(e,t){if(!this.properties[e])return this.define(e,t);var a=this.properties[e];return a.value=t,a.cachedValue=void 0,dispatch.call(this,e),this},Globals.prototype.reset=function(){for(var e in this.properties)this.properties.hasOwnProperty(e)&&(this.properties[e].value=this.properties[e].default,this.properties[e].cachedValue=void 0,dispatch.call(this,e));return this},canReflect_1_17_4_canReflect.assignSymbols(Globals.prototype,{"can.getKeyValue":Globals.prototype.getKeyValue,"can.setKeyValue":Globals.prototype.setKeyValue,"can.deleteKeyValue":Globals.prototype.deleteKeyValue,"can.onKeyValue":Globals.prototype.onKeyValue,"can.offKeyValue":Globals.prototype.offKeyValue});var canGlobals_1_2_0_canGlobalsProto=Globals,canGlobals_1_2_0_canGlobalsInstance=createCommonjsModule(function(e){var t=new canGlobals_1_2_0_canGlobalsProto;if(canNamespace_1_0_0_canNamespace.globals)throw new Error("You can't have two versions of can-globals, check your dependencies");else e.exports=canNamespace_1_0_0_canNamespace.globals=t});canGlobals_1_2_0_canGlobalsInstance.define("global",function(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:"object"==typeof process&&"[object process]"==={}.toString.call(process)?commonjsGlobal:window});var global_1=canGlobals_1_2_0_canGlobalsInstance.makeExport("global");canGlobals_1_2_0_canGlobalsInstance.define("document",function(){return canGlobals_1_2_0_canGlobalsInstance.getKeyValue("global").document});var document$1=canGlobals_1_2_0_canGlobalsInstance.makeExport("document");canGlobals_1_2_0_canGlobalsInstance.define("isNode",function(){return"object"==typeof process&&"[object process]"==={}.toString.call(process)});var isNode=canGlobals_1_2_0_canGlobalsInstance.makeExport("isNode");canGlobals_1_2_0_canGlobalsInstance.define("isBrowserWindow",function(){var e=canGlobals_1_2_0_canGlobalsInstance.getKeyValue("isNode");return"undefined"!=typeof window&&"undefined"!=typeof document&&!1===e});var isBrowserWindow=canGlobals_1_2_0_canGlobalsInstance.makeExport("isBrowserWindow");function getTargetDocument(e){return e.ownerDocument||document$1()}function createEvent(e,t,a,n){var r=getTargetDocument(e),s=r.createEvent("HTMLEvents"),o;if("string"==typeof t)o=t;else for(var i in o=t.type,t)void 0===s[i]&&(s[i]=t[i]);return void 0===a&&(a=!0),s.initEvent(o,a,n),s}function isDomEventTarget(e){if(!(e&&e.nodeName))return e===window;var t=e.nodeType;return 1===t||9===t||11===t}function addDomContext(e,t){return isDomEventTarget(e)&&(t=Array.prototype.slice.call(t,0),t.unshift(e)),t}function removeDomContext(e,t){return isDomEventTarget(e)||(t=Array.prototype.slice.call(t,0),e=t.shift()),{context:e,args:t}}var fixSyntheticEventsOnDisabled=!1;(function(){if(isBrowserWindow()){var e=document.createElement("input");e.disabled=!0;var t=setTimeout(function(){fixSyntheticEventsOnDisabled=!0},50),a=function a(){clearTimeout(t),e.removeEventListener("fix_synthetic_events_on_disabled_test",a)};e.addEventListener("fix_synthetic_events_on_disabled_test",a);try{var n=document.create("HTMLEvents");n.initEvent("fix_synthetic_events_on_disabled_test",!1),e.dispatchEvent(n)}catch(t){a(),fixSyntheticEventsOnDisabled=!0}}})();function isDispatchingOnDisabled(e,t){var a=t.type,n=!!e.disabled;return("inserted"===a||"removed"===a)&&n}function forceEnabledForDispatch(e,t){return fixSyntheticEventsOnDisabled&&isDispatchingOnDisabled(e,t)}var util={createEvent:createEvent,addDomContext:addDomContext,removeDomContext:removeDomContext,isDomEventTarget:isDomEventTarget,getTargetDocument:getTargetDocument,forceEnabledForDispatch:forceEnabledForDispatch};function EventRegistry(){this._registry={}}var makeEventRegistry=function(){return new EventRegistry};EventRegistry.prototype.has=function(e){return!!this._registry[e]},EventRegistry.prototype.get=function(e){return this._registry[e]},EventRegistry.prototype.add=function(e,t){if(!e)throw new Error("An EventDefinition must be provided");if("function"!=typeof e.addEventListener)throw new TypeError("EventDefinition addEventListener must be a function");if("function"!=typeof e.removeEventListener)throw new TypeError("EventDefinition removeEventListener must be a function");if(t=t||e.defaultEventType,"string"!=typeof t)throw new TypeError("Event type must be a string, not "+t);if(this.has(t))throw new Error("Event \""+t+"\" is already registered");this._registry[t]=e;var a=this;return function(){a._registry[t]=void 0}};var useCapture=function(e){return"focus"===e||"blur"===e};function makeDelegator(e){var t=function(e){this.element=e,this.events={},this.delegated={}};return canReflect_1_17_4_canReflect.assignSymbols(t.prototype,{"can.setKeyValue":function(t,a){var n=this.delegated[t]=function(e){canReflect_1_17_4_canReflect.each(a,function(t,a){var n=e.target;do{var r=n===document?document.documentElement:n,s=r.matches||r.msMatchesSelector;s.call(r,a)&&t.forEach(function(t){t.call(r,e)}),n=n.parentNode}while(n&&n!==e.currentTarget)})};this.events[t]=a,e.addEventListener(this.element,t,n,useCapture(t))},"can.getKeyValue":function(e){return this.events[e]},"can.deleteKeyValue":function(t){e.removeEventListener(this.element,t,this.delegated[t],useCapture(t)),delete this.delegated[t],delete this.events[t]},"can.getOwnEnumerableKeys":function(){return Object.keys(this.events)}}),t}var MakeDelegateEventTree=function(e){var t=makeDelegator(e);return new canKeyTree_1_2_0_canKeyTree([Map,t,Object,Array])},domEvents={_eventRegistry:makeEventRegistry(),addEvent:function(e,t){return this._eventRegistry.add(e,t)},addEventListener:function(e,t){var a=domEvents._eventRegistry.has(t);if(a){var n=domEvents._eventRegistry.get(t);return n.addEventListener.apply(domEvents,arguments)}var r=Array.prototype.slice.call(arguments,1);return e.addEventListener.apply(e,r)},removeEventListener:function(e,t){var a=domEvents._eventRegistry.has(t);if(a){var n=domEvents._eventRegistry.get(t);return n.removeEventListener.apply(domEvents,arguments)}var r=Array.prototype.slice.call(arguments,1);return e.removeEventListener.apply(e,r)},addDelegateListener:function(e,t,a,n){domEvents._eventTree.add([e,t,a,n])},removeDelegateListener:function(e,t,a,n){domEvents._eventTree.delete([e,t,a,n])},dispatch:function(e,t,a,n){var r=util.createEvent(e,t,a,n),s=util.forceEnabledForDispatch(e,r);s&&(e.disabled=!1);var o=e.dispatchEvent(r);return s&&(e.disabled=!0),o}};domEvents._eventTree=MakeDelegateEventTree(domEvents);var canDomEvents_1_3_0_canDomEvents=canNamespace_1_0_0_canNamespace.domEvents=domEvents,isDomEventTarget$1=util.isDomEventTarget,metaSymbol=canSymbol_1_6_1_canSymbol.for("can.meta"),dispatchBoundChangeSymbol=canSymbol_1_6_1_canSymbol.for("can.dispatchInstanceBoundChange"),dispatchInstanceOnPatchesSymbol=canSymbol_1_6_1_canSymbol.for("can.dispatchInstanceOnPatches"),onKeyValueSymbol$1=canSymbol_1_6_1_canSymbol.for("can.onKeyValue"),offKeyValueSymbol=canSymbol_1_6_1_canSymbol.for("can.offKeyValue"),onEventSymbol=canSymbol_1_6_1_canSymbol.for("can.onEvent"),offEventSymbol=canSymbol_1_6_1_canSymbol.for("can.offEvent"),onValueSymbol$1=canSymbol_1_6_1_canSymbol.for("can.onValue"),offValueSymbol=canSymbol_1_6_1_canSymbol.for("can.offValue"),legacyMapBindings;function addHandlers(e,t){t.handlers||(t.handlers=new canKeyTree_1_2_0_canKeyTree([Object,Object,Object,Array],{onFirst:function(){e._eventSetup!==void 0&&e._eventSetup(),e.constructor[dispatchBoundChangeSymbol]&&e.constructor[dispatchBoundChangeSymbol](e,!0)},onEmpty:function(){e._eventTeardown!==void 0&&e._eventTeardown(),e.constructor[dispatchBoundChangeSymbol]&&e.constructor[dispatchBoundChangeSymbol](e,!1)}})),t.listenHandlers||(t.listenHandlers=new canKeyTree_1_2_0_canKeyTree([Map,Map,Object,Array]))}var ensureMeta=function(e){var t=e[metaSymbol];return t||(t={},canReflect_1_17_4_canReflect.setKeyValue(e,metaSymbol,t)),addHandlers(e,t),t};function stopListeningArgumentsToKeys(e,t,a,n){arguments.length&&canReflect_1_17_4_canReflect.isPrimitive(e)&&(n=a,a=t,t=e,e=this.context),"function"==typeof t&&(n=a,a=t,t=void 0),"string"==typeof a&&(n=a,a=void 0);var r=[];return e&&(r.push(e),(t||a||n)&&(r.push(t),(n||a)&&(r.push(n||this.defaultQueue),a&&r.push(a)))),r}var props={dispatch:function(e,t){if(!this.__inSetup){"string"==typeof e&&(e={type:e});var a=ensureMeta(this),n=a.handlers,r=void 0!==e.type&&n.getNode([e.type]),s=e.patches&&this.constructor[dispatchInstanceOnPatchesSymbol],o=void 0!==e.patches&&n.getNode(["can.patches","onKeyValue"]),i=void 0!==e.keyChanged&&n.getNode(["can.keys","onKeyValue"]),l=s||r||o||i;if(l&&canQueues_1_1_3_canQueues.batch.start(),r&&(r.onKeyValue&&canQueues_1_1_3_canQueues.enqueueByQueue(r.onKeyValue,this,t,e.makeMeta,e.reasonLog),r.event)){e.batchNum=canQueues_1_1_3_canQueues.batch.number();var d=[e].concat(t);canQueues_1_1_3_canQueues.enqueueByQueue(r.event,this,d,e.makeMeta,e.reasonLog)}i&&canQueues_1_1_3_canQueues.enqueueByQueue(i,this,[e.keyChanged],e.makeMeta,e.reasonLog),o&&canQueues_1_1_3_canQueues.enqueueByQueue(o,this,[e.patches],e.makeMeta,e.reasonLog),s&&this.constructor[dispatchInstanceOnPatchesSymbol](this,e.patches),l&&canQueues_1_1_3_canQueues.batch.stop()}return e},addEventListener:function(e,t,a){return ensureMeta(this).handlers.add([e,"event",a||"mutate",t]),this},removeEventListener:function(e,t,a){if(e===void 0){var n=ensureMeta(this).handlers,r=n.getNode([]);Object.keys(r).forEach(function(e){n.delete([e,"event"])})}else t||a?t?ensureMeta(this).handlers.delete([e,"event",a||"mutate",t]):ensureMeta(this).handlers.delete([e,"event",a||"mutate"]):ensureMeta(this).handlers.delete([e,"event"]);return this},one:function(e,t){var a=function(){return legacyMapBindings.off.call(this,e,a),t.apply(this,arguments)};return legacyMapBindings.on.call(this,e,a),this},listenTo:function(e,t,a,n){return canReflect_1_17_4_canReflect.isPrimitive(e)&&(n=a,a=t,t=e,e=this),"function"==typeof t&&(n=a,a=t,t=void 0),ensureMeta(this).listenHandlers.add([e,t,n||"mutate",a]),legacyMapBindings.on.call(e,t,a,n||"mutate"),this},stopListening:function(){function e(e,t,a,n){legacyMapBindings.off.call(e,t,n,a)}var t=stopListeningArgumentsToKeys.apply({context:this,defaultQueue:"mutate"},arguments),a=ensureMeta(this).listenHandlers;return a.delete(t,e),this},on:function(e,t,a){var n=isDomEventTarget$1(this);if(n)"string"==typeof t?canDomEvents_1_3_0_canDomEvents.addDelegateListener(this,e,t,a):canDomEvents_1_3_0_canDomEvents.addEventListener(this,e,t,a);else if("addEventListener"in this)this.addEventListener(e,t,a);else if(this[onKeyValueSymbol$1])canReflect_1_17_4_canReflect.onKeyValue(this,e,t,a);else if(this[onEventSymbol])this[onEventSymbol](e,t,a);else if(!e&&this[onValueSymbol$1])canReflect_1_17_4_canReflect.onValue(this,t,a);else throw new Error("can-event-queue: Unable to bind "+e);return this},off:function(e,t,a){var n=isDomEventTarget$1(this);if(n)"string"==typeof t?canDomEvents_1_3_0_canDomEvents.removeDelegateListener(this,e,t,a):canDomEvents_1_3_0_canDomEvents.removeEventListener(this,e,t,a);else if("removeEventListener"in this)this.removeEventListener(e,t,a);else if(this[offKeyValueSymbol])canReflect_1_17_4_canReflect.offKeyValue(this,e,t,a);else if(this[offEventSymbol])this[offEventSymbol](e,t,a);else if(!e&&this[offValueSymbol])canReflect_1_17_4_canReflect.offValue(this,t,a);else throw new Error("can-event-queue: Unable to unbind "+e);return this}},symbols$1={"can.onKeyValue":function(e,t,a){ensureMeta(this).handlers.add([e,"onKeyValue",a||"mutate",t])},"can.offKeyValue":function(e,t,a){ensureMeta(this).handlers.delete([e,"onKeyValue",a||"mutate",t])},"can.isBound":function(){return!ensureMeta(this).handlers.isEmpty()},"can.getWhatIChange":function(){},"can.onPatches":function(e,t){var a=ensureMeta(this).handlers;a.add(["can.patches","onKeyValue",t||"notify",e])},"can.offPatches":function(e,t){var a=ensureMeta(this).handlers;a.delete(["can.patches","onKeyValue",t||"notify",e])}};function defineNonEnumerable(e,t,a){Object.defineProperty(e,t,{enumerable:!1,value:a})}legacyMapBindings=function(e){return canReflect_1_17_4_canReflect.assignMap(e,props),canReflect_1_17_4_canReflect.assignSymbols(e,symbols$1)},defineNonEnumerable(legacyMapBindings,"addHandlers",addHandlers),defineNonEnumerable(legacyMapBindings,"stopListeningArgumentsToKeys",stopListeningArgumentsToKeys),props.bind=props.addEventListener,props.unbind=props.removeEventListener,canReflect_1_17_4_canReflect.assignMap(legacyMapBindings,props),canReflect_1_17_4_canReflect.assignSymbols(legacyMapBindings,symbols$1),defineNonEnumerable(legacyMapBindings,"start",function(){console.warn("use can-queues.batch.start()"),canQueues_1_1_3_canQueues.batch.start()}),defineNonEnumerable(legacyMapBindings,"stop",function(){console.warn("use can-queues.batch.stop()"),canQueues_1_1_3_canQueues.batch.stop()}),defineNonEnumerable(legacyMapBindings,"flush",function(){console.warn("use can-queues.flush()"),canQueues_1_1_3_canQueues.flush()}),defineNonEnumerable(legacyMapBindings,"afterPreviousEvents",function(e){console.warn("don't use afterPreviousEvents"),canQueues_1_1_3_canQueues.mutateQueue.enqueue(function(){canQueues_1_1_3_canQueues.mutateQueue.enqueue(e)}),canQueues_1_1_3_canQueues.flush()}),defineNonEnumerable(legacyMapBindings,"after",function(e){console.warn("don't use after"),canQueues_1_1_3_canQueues.mutateQueue.enqueue(e),canQueues_1_1_3_canQueues.flush()});var map$1=legacyMapBindings,getChangesSymbol$1=canSymbol_1_6_1_canSymbol.for("can.getChangesDependencyRecord");function ResolverObservable(e,t){this.resolver=canObservationRecorder_1_2_0_canObservationRecorder.ignore(e),this.context=t,this.valueOptions={resolve:this.resolve.bind(this),listenTo:this.listenTo.bind(this),stopListening:this.stopListening.bind(this),lastSet:new canSimpleObservable_2_2_0_canSimpleObservable(void 0)},this.update=this.update.bind(this),this.contextHandlers=new WeakMap,this.teardown=null,this.binder={}}ResolverObservable.prototype=Object.create(settable.prototype);function deleteHandler(e,t,a,n){map$1.off.call(e,t,n,a)}canReflect_1_17_4_canReflect.assignMap(ResolverObservable.prototype,{constructor:ResolverObservable,listenTo:function(e,t,a,n){canReflect_1_17_4_canReflect.isPrimitive(e)&&(a=t,t=e,e=this.context),"function"==typeof t&&(a=t,t=void 0);var r=this,s=a.bind(this.context);s[getChangesSymbol$1]=function(){return{valueDependencies:new Set([r])}},this.contextHandlers.set(a,s),map$1.listenTo.call(this.binder,e,t,s,n||"notify")},stopListening:function(){var e=this.binder[canSymbol_1_6_1_canSymbol.for("can.meta")],t=e&&e.listenHandlers;if(t){var a=map$1.stopListeningArgumentsToKeys.call({context:this.context,defaultQueue:"notify"});t.delete(a,deleteHandler)}return this},resolve:function(e){if(this.value=e,this.isBinding)return this.lastValue=this.value,e;if(this.value!==this.lastValue){canQueues_1_1_3_canQueues.batch.start(),canQueues_1_1_3_canQueues.deriveQueue.enqueue(this.update,this,[],{}),canQueues_1_1_3_canQueues.batch.stop()}return e},update:function(){if(this.lastValue!==this.value){var e=this.lastValue;this.lastValue=this.value,canQueues_1_1_3_canQueues.enqueueByQueue(this.handlers.getNode([]),this,[this.value,e])}},activate:function(){this.isBinding=!0,this.teardown=this.resolver.call(this.context,this.valueOptions),this.isBinding=!1},onUnbound:function(){this.bound=!1,map$1.stopListening.call(this.binder),null!=this.teardown&&(this.teardown(),this.teardown=null)},set:function(e){this.valueOptions.lastSet.set(e)},get:function(){if(canObservationRecorder_1_2_0_canObservationRecorder.isRecording()&&(canObservationRecorder_1_2_0_canObservationRecorder.add(this),!this.bound&&this.onBound()),!0===this.bound)return this.value;var e=function(){};this.on(e);var t=this.value;return this.off(e),t},hasDependencies:function e(){var e=!1;if(this.bound){var t=this.binder[canSymbol_1_6_1_canSymbol.for("can.meta")],a=t&&t.listenHandlers;e=!!a.size()}return e},getValueDependencies:function(){if(this.bound){var e=this.binder[canSymbol_1_6_1_canSymbol.for("can.meta")],t=e&&e.listenHandlers,a=new Map,n=new Set;if(t&&(canReflect_1_17_4_canReflect.each(t.root,function(e,t){canReflect_1_17_4_canReflect.each(e,function(e,r){if(void 0===r)n.add(t);else{var s=a.get(t);s||(s=new Set,a.set(t,s)),s.add(r)}})}),n.size||a.size)){var r={};return a.size&&(r.keyDependencies=a),n.size&&(r.valueDependencies=n),r}}}}),canReflect_1_17_4_canReflect.assignSymbols(ResolverObservable.prototype,{"can.getValue":ResolverObservable.prototype.get,"can.setValue":ResolverObservable.prototype.set,"can.isMapLike":!1,"can.getPriority":function(){return this.priority||0},"can.setPriority":function(e){this.priority=e},"can.valueHasDependencies":ResolverObservable.prototype.hasDependencies,"can.getValueDependencies":ResolverObservable.prototype.getValueDependencies});var resolver=ResolverObservable,metaSymbol$1=canSymbol_1_6_1_canSymbol.for("can.meta");function addHandlers$1(e,t){t.lifecycleHandlers||(t.lifecycleHandlers=new canKeyTree_1_2_0_canKeyTree([Object,Array])),t.instancePatchesHandlers||(t.instancePatchesHandlers=new canKeyTree_1_2_0_canKeyTree([Object,Array]))}function ensureMeta$1(e){var t=e[metaSymbol$1];return t||(t={},canReflect_1_17_4_canReflect.setKeyValue(e,metaSymbol$1,t)),addHandlers$1(e,t),t}var props$1={};function onOffAndDispatch(e,t,a){props$1["can.on"+e]=function(e,t){ensureMeta$1(this)[a].add([t||"mutate",e])},props$1["can.off"+e]=function(e,t){ensureMeta$1(this)[a].delete([t||"mutate",e])},props$1["can."+t]=function(e,t){canQueues_1_1_3_canQueues.enqueueByQueue(ensureMeta$1(this)[a].getNode([]),this,[e,t])}}onOffAndDispatch("InstancePatches","dispatchInstanceOnPatches","instancePatchesHandlers"),onOffAndDispatch("InstanceBoundChange","dispatchInstanceBoundChange","lifecycleHandlers");function mixinTypeBindings(e){return canReflect_1_17_4_canReflect.assignSymbols(e,props$1)}Object.defineProperty(mixinTypeBindings,"addHandlers",{enumerable:!1,value:addHandlers$1});var type$1=mixinTypeBindings,canStringToAny_1_2_0_canStringToAny=function(e){switch(e){case"NaN":case"Infinity":return+e;case"null":return null;case"undefined":return;case"true":case"false":return"true"===e;default:var t=+e;return isNaN(t)?e:t;}};function toBoolean(e){return null==e?e:!!("false"!==e&&"0"!==e&&e)}var maybeBoolean=canReflect_1_17_4_canReflect.assignSymbols(toBoolean,{"can.new":toBoolean,"can.getSchema":function(){return{type:"Or",values:[!0,!1,void 0,null]}},"can.getName":function(){return"MaybeBoolean"},"can.isMember":function(e){return null==e||"boolean"==typeof e}});function toDate(e){var t=typeof e;return"string"==t?(e=Date.parse(e),isNaN(e)?null:new Date(e)):"number"==t?new Date(e):e}function DateStringSet(e){this.setValue=e;var t=toDate(e);this.value=null==t?t:t.getTime()}DateStringSet.prototype.valueOf=function(){return this.value},canReflect_1_17_4_canReflect.assignSymbols(DateStringSet.prototype,{"can.serialize":function(){return this.setValue}});var maybeDate=canReflect_1_17_4_canReflect.assignSymbols(toDate,{"can.new":toDate,"can.getSchema":function(){return{type:"Or",values:[Date,void 0,null]}},"can.ComparisonSetType":DateStringSet,"can.getName":function(){return"MaybeDate"},"can.isMember":function(e){return null==e||e instanceof Date}});function toNumber(e){return null==e?e:+e}var maybeNumber=canReflect_1_17_4_canReflect.assignSymbols(toNumber,{"can.new":toNumber,"can.getSchema":function(){return{type:"Or",values:[Number,void 0,null]}},"can.getName":function(){return"MaybeNumber"},"can.isMember":function(e){return null==e||"number"==typeof e}});function toString(e){return null==e?e:""+e}var maybeString=canReflect_1_17_4_canReflect.assignSymbols(toString,{"can.new":toString,"can.getSchema":function(){return{type:"Or",values:[String,void 0,null]}},"can.getName":function(){return"MaybeString"},"can.isMember":function(e){return null==e||"string"==typeof e}}),newSymbol$1=canSymbol_1_6_1_canSymbol.for("can.new"),serializeSymbol=canSymbol_1_6_1_canSymbol.for("can.serialize"),eventsProto,define,make,makeDefinition,getDefinitionsAndMethods,getDefinitionOrMethod;function isDefineType(e){return e&&(!0===e.canDefineType||e[newSymbol$1])}var peek$2=canObservationRecorder_1_2_0_canObservationRecorder.ignore(canReflect_1_17_4_canReflect.getValue.bind(canReflect_1_17_4_canReflect)),Object_defineNamedPrototypeProperty=Object.defineProperty;function defineConfigurableAndNotEnumerable(e,t,a){Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:a})}function eachPropertyDescriptor(e,t){for(var a in e)e.hasOwnProperty(a)&&t.call(e,a,Object.getOwnPropertyDescriptor(e,a))}function cleanUpDefinition(e,t){t.value!==void 0&&("function"!=typeof t.value||0===t.value.length)&&(t.default=t.value,delete t.value),t.Value!==void 0&&(t.Default=t.Value,delete t.Value)}function isValueResolver(e){return"function"==typeof e.value&&e.value.length}var canDefine_2_5_8_canDefine=define=canNamespace_1_0_0_canNamespace.define=function(e,t,a){var n=Object.create(a?a.dataInitializers:null),r=Object.create(a?a.computedInitializers:null),s=getDefinitionsAndMethods(t,a,e),o;if(s.dataInitializers=n,s.computedInitializers=r,canReflect_1_17_4_canReflect.eachKey(s.definitions,function(t,a){define.property(e,a,t,n,r,s.defaultDefinition)}),e.hasOwnProperty("_data"))for(o in n)canDefineLazyValue_1_1_0_defineLazyValue(e._data,o,n[o].bind(e),!0);else canDefineLazyValue_1_1_0_defineLazyValue(e,"_data",function(){var e=this,t={};for(var a in n)canDefineLazyValue_1_1_0_defineLazyValue(t,a,n[a].bind(e),!0);return t});if(e.hasOwnProperty("_computed"))for(o in r)canDefineLazyValue_1_1_0_defineLazyValue(e._computed,o,r[o].bind(e));else canDefineLazyValue_1_1_0_defineLazyValue(e,"_computed",function(){var e=this,t=Object.create(null);for(var a in r)canDefineLazyValue_1_1_0_defineLazyValue(t,a,r[a].bind(e));return t});for(o in eventsProto)Object.defineProperty(e,o,{enumerable:!1,value:eventsProto[o],configurable:!0,writable:!0});Object.defineProperty(e,"_define",{enumerable:!1,value:s,configurable:!0,writable:!0});var i=canSymbol_1_6_1_canSymbol.iterator||canSymbol_1_6_1_canSymbol.for("iterator");return e[i]||defineConfigurableAndNotEnumerable(e,i,function(){return new define.Iterator(this)}),s},onlyType=function(e){for(var t in e)if("type"!=t)return!1;return!0};define.extensions=function(){},define.property=function(e,t,a,n,r,s){var o=define.extensions.apply(this,arguments);o&&(a=makeDefinition(t,o,s||{},e));var i=a.type;if(i&&onlyType(a)&&i===define.types["*"])return void Object_defineNamedPrototypeProperty(e,t,{get:make.get.data(t),set:make.set.events(t,make.get.data(t),make.set.data(t),make.eventType.data(t)),enumerable:!0,configurable:!0});a.type=i;var l=a.get||isValueResolver(a)?"computed":"data",d=make.read[l](t),p=make.get[l](t),c=make.set[l](t),u=function(e){return e},y;a.Type&&(u=make.set.Type(t,a.Type,u)),i&&(u=make.set.type(t,i,u));var h=make.set.events(t,d,c,make.eventType[l](t));isValueResolver(a)?r[t]=make.valueResolver(t,a,u):(a.default!==void 0||a.Default!==void 0)&&(y=canObservationRecorder_1_2_0_canObservationRecorder.ignore(make.get.defaultValue(t,a,u,h))),a.get?r[t]=make.compute(t,a.get,y):y&&(n[t]=y),a.get&&a.set?c=make.set.setter(t,a.set,make.read.lastSet(t),c,!0):a.set?c=make.set.setter(t,a.set,d,h,!1):"data"==l?c=h:a.get&&1>a.get.length&&(c=function(){}),i&&(c=make.set.type(t,i,c)),a.Type&&(c=make.set.Type(t,a.Type,c)),Object_defineNamedPrototypeProperty(e,t,{get:p,set:c,enumerable:"serialize"in a?!!a.serialize:!a.get,configurable:!0})},define.makeDefineInstanceKey=function(e){e[canSymbol_1_6_1_canSymbol.for("can.defineInstanceKey")]=function(t,a){var n=this.prototype._define;"object"==typeof a&&cleanUpDefinition(t,a,!1,this);var r=getDefinitionOrMethod(t,a,n.defaultDefinition,this);r&&"object"==typeof r?(define.property(e.prototype,t,r,n.dataInitializers,n.computedInitializers,n.defaultDefinition),n.definitions[t]=r):n.methods[t]=r}},define.Constructor=function(e,t){var a=function(e){Object.defineProperty(this,"__inSetup",{configurable:!0,enumerable:!1,value:!0,writable:!0}),define.setup.call(this,e,t),this.__inSetup=!1},n=define(a.prototype,e);return type$1(a),define.makeDefineInstanceKey(a,n),a},make={computeObj:function(e,t,a){var n={oldValue:void 0,compute:a,count:0,handler:function(a){var r=n.oldValue;n.oldValue=a,e.dispatch({type:t,target:e},[a,r])}};return n},valueResolver:function(e,t){return function(){var a=this,n=make.computeObj(a,e,new resolver(t.value,a));return n}},compute:function(e,t,a){return function(){var n=this,r=a&&a.call(this),s,o;return s=0===t.length?new canObservation_4_1_0_canObservation(t,n):1===t.length?new settable(t,n,r):new async(t,n,r),o=make.computeObj(n,e,s),o}},set:{data:function(e){return function(t){this._data[e]=t}},computed:function(e){return function(t){canReflect_1_17_4_canReflect.setValue(this._computed[e].compute,t)}},events:function(e,t,a){return function(n){if(this.__inSetup)a.call(this,n);else{var r=t.call(this);if(n!==r){var s;a.call(this,n),s={patches:[{type:"set",key:e,value:n}],type:e,target:this},this.dispatch(s,[n,r])}}}},setter:function(e,t,a,n,r){return function(e){var s=this;canQueues_1_1_3_canQueues.batch.start();var o=!1,i=a.call(this),l=t.call(this,e,function(e){n.call(s,e),o=!0},i);if(o)canQueues_1_1_3_canQueues.batch.stop();else if(r){if(void 0!==l)i!==l&&n.call(this,l),canQueues_1_1_3_canQueues.batch.stop();else{if(0===t.length)return n.call(this,e),void canQueues_1_1_3_canQueues.batch.stop();if(1===t.length)canQueues_1_1_3_canQueues.batch.stop();else return void canQueues_1_1_3_canQueues.batch.stop()}}else if(void 0!==l)n.call(this,l),canQueues_1_1_3_canQueues.batch.stop();else{if(0===t.length)return n.call(this,e),void canQueues_1_1_3_canQueues.batch.stop();if(1===t.length)n.call(this,void 0),canQueues_1_1_3_canQueues.batch.stop();else return void canQueues_1_1_3_canQueues.batch.stop()}}},type:function(e,t,a){function n(n){return a.call(this,t.call(this,n,e))}return isDefineType(t)?t.canDefineType?n:function(e){return a.call(this,canReflect_1_17_4_canReflect.convert(e,t))}:"object"==typeof t?make.set.Type(e,t,a):n},Type:function(e,t,a){return Array.isArray(t)&&define.DefineList?t=define.DefineList.extend({"#":t[0]}):"object"==typeof t&&(define.DefineMap?t=define.DefineMap.extend(t):t=define.Constructor(t)),function(e){return e instanceof t||null==e?a.call(this,e):a.call(this,new t(e))}}},eventType:{data:function(e){return function(t,a){return a!==void 0||this._data.hasOwnProperty(e)?"set":"add"}},computed:function(){return function(){return"set"}}},read:{data:function(e){return function(){return this._data[e]}},computed:function(e){return function(){return canReflect_1_17_4_canReflect.getValue(this._computed[e].compute)}},lastSet:function(e){return function(){var t=this._computed[e].compute;if(t.lastSetValue)return canReflect_1_17_4_canReflect.getValue(t.lastSetValue)}}},get:{defaultValue:function(e,t,a,n){return function(){var r=t.default;if(r!==void 0)"function"==typeof r&&(r=r.call(this)),r=a.call(this,r);else{var s=t.Default;s&&(r=a.call(this,new s))}if(t.set){var o=!0,i=make.set.setter(e,t.set,function(){},function(e){o?l=e:n.call(this,e)},t.get),l;return i.call(this,r),o=!1,l}return r}},data:function(e){return function(){return this.__inSetup||canObservationRecorder_1_2_0_canObservationRecorder.add(this,e),this._data[e]}},computed:function(e){return function(){var t=this._computed[e].compute;return canObservationRecorder_1_2_0_canObservationRecorder.isRecording()&&(canObservationRecorder_1_2_0_canObservationRecorder.add(this,e),!canReflect_1_17_4_canReflect.isBound(t)&&canObservation_4_1_0_canObservation.temporarilyBind(t)),peek$2(t)}}}},define.behaviors=["get","set","value","Value","type","Type","serialize"];var addBehaviorToDefinition=function(e,t,a){if("enumerable"===t)e.serialize=!!a;else if("type"===t){var n=a;"string"==typeof n&&(n=define.types[n],"object"==typeof n&&!isDefineType(n)&&(canAssign_1_3_1_canAssign(e,n),n=n[t])),"undefined"!=typeof n&&(e[t]=n)}else e[t]=a};makeDefinition=function(e,t,a,n){var r={};if(canReflect_1_17_4_canReflect.eachKey(t,function(e,t){addBehaviorToDefinition(r,t,e)}),canReflect_1_17_4_canReflect.eachKey(a,function(e,t){void 0===r[t]&&"type"!==t&&"Type"!==t&&(r[t]=e)}),t.Type){var s=t.Type,o=s[serializeSymbol];o&&(r.serialize=function(e){return o.call(e)}),s[newSymbol$1]&&(r.type=s[newSymbol$1],delete r.Type)}if("string"!=typeof t.type){if(!r.type&&!r.Type){var i=canReflect_1_17_4_canReflect.assignMap({},a);r=canReflect_1_17_4_canReflect.assignMap(i,r)}0===canReflect_1_17_4_canReflect.size(r)&&(r.type=define.types["*"])}return cleanUpDefinition(e,r,!0,n),r},getDefinitionOrMethod=function(e,t,a,n){var r;return"string"==typeof t?r={type:t}:t&&(t[serializeSymbol]||t[newSymbol$1])?r={Type:t}:"function"==typeof t?canReflect_1_17_4_canReflect.isConstructorLike(t)&&(r={Type:t}):Array.isArray(t)?r={Type:t}:canReflect_1_17_4_canReflect.isPlainObject(t)&&(r=t),r?makeDefinition(e,r,a,n):t},getDefinitionsAndMethods=function(e,t,a){var n=Object.create(t?t.definitions:null),r={},s=e["*"],o;return s?(delete e["*"],o=getDefinitionOrMethod("*",s,{})):o=Object.create(null),eachPropertyDescriptor(e,function(e,t){var s;if(s=t.get||t.set?{get:t.get,set:t.set}:t.value,"constructor"===e)return void(r[e]=s);var i=getDefinitionOrMethod(e,s,o,a);i&&"object"==typeof i&&0<canReflect_1_17_4_canReflect.size(i)?n[e]=i:"function"==typeof i&&(r[e]=i)}),s&&(e["*"]=s),{definitions:n,methods:r,defaultDefinition:o}},eventsProto=map$1({});function setupComputed(e,t){var a=e._computed&&e._computed[t];a&&a.compute&&(a.count?a.count++:(a.count=1,canReflect_1_17_4_canReflect.onValue(a.compute,a.handler,"notify"),a.oldValue=canReflect_1_17_4_canReflect.getValue(a.compute)))}function teardownComputed(e,t){var a=e._computed&&e._computed[t];a&&(1===a.count?(a.count=0,canReflect_1_17_4_canReflect.offValue(a.compute,a.handler,"notify")):a.count--)}var canMetaSymbol=canSymbol_1_6_1_canSymbol.for("can.meta");canAssign_1_3_1_canAssign(eventsProto,{_eventSetup:function(){},_eventTeardown:function(){},addEventListener:function(e){return setupComputed(this,e),map$1.addEventListener.apply(this,arguments)},removeEventListener:function(e){return teardownComputed(this,e),map$1.removeEventListener.apply(this,arguments)}}),eventsProto.on=eventsProto.bind=eventsProto.addEventListener,eventsProto.off=eventsProto.unbind=eventsProto.removeEventListener;var onKeyValueSymbol$2=canSymbol_1_6_1_canSymbol.for("can.onKeyValue"),offKeyValueSymbol$1=canSymbol_1_6_1_canSymbol.for("can.offKeyValue");canReflect_1_17_4_canReflect.assignSymbols(eventsProto,{"can.onKeyValue":function(e){return setupComputed(this,e),map$1[onKeyValueSymbol$2].apply(this,arguments)},"can.offKeyValue":function(e){return teardownComputed(this,e),map$1[offKeyValueSymbol$1].apply(this,arguments)}}),delete eventsProto.one,define.setup=function(e){Object.defineProperty(this,"constructor",{value:this.constructor,enumerable:!1,writable:!1}),Object.defineProperty(this,canMetaSymbol,{value:Object.create(null),enumerable:!1,writable:!1});var t=this._define.definitions,a=Object.create(null),n=this;canReflect_1_17_4_canReflect.eachKey(e,function(e,r){if(t[r]!==void 0)n[r]=e;else{var s=define.makeSimpleGetterSetter(r);a[r]={},Object_defineNamedPrototypeProperty(n,r,s),n[r]=define.types.observable(e)}}),0<canReflect_1_17_4_canReflect.size(a)&&defineConfigurableAndNotEnumerable(this,"_instanceDefinitions",a)},define.replaceWith=canDefineLazyValue_1_1_0_defineLazyValue,define.eventsProto=eventsProto,define.defineConfigurableAndNotEnumerable=defineConfigurableAndNotEnumerable,define.make=make,define.getDefinitionOrMethod=getDefinitionOrMethod,define._specialKeys={_data:!0,_computed:!0};var simpleGetterSetters={};define.makeSimpleGetterSetter=function(e){if(simpleGetterSetters[e]===void 0){var t=make.set.events(e,make.get.data(e),make.set.data(e),make.eventType.data(e));simpleGetterSetters[e]={get:make.get.data(e),set:function(e){return t.call(this,define.types.observable(e))},enumerable:!0,configurable:!0}}return simpleGetterSetters[e]},define.Iterator=function(e){this.obj=e,this.definitions=Object.keys(e._define.definitions),this.instanceDefinitions=e._instanceDefinitions?Object.keys(e._instanceDefinitions):Object.keys(e),this.hasGet="function"==typeof e.get},define.Iterator.prototype.next=function(){var e;if(this.definitions.length){e=this.definitions.shift();var t=this.obj._define.definitions[e];if(t.get)return this.next()}else if(this.instanceDefinitions.length)e=this.instanceDefinitions.shift();else return{value:void 0,done:!0};return{value:[e,this.hasGet?this.obj.get(e):this.obj[e]],done:!1}};function isObservableValue(e){return canReflect_1_17_4_canReflect.isValueLike(e)&&canReflect_1_17_4_canReflect.isObservableLike(e)}define.types={date:maybeDate,number:maybeNumber,boolean:maybeBoolean,observable:function(e){return Array.isArray(e)&&define.DefineList?e=new define.DefineList(e):canReflect_1_17_4_canReflect.isPlainObject(e)&&define.DefineMap&&(e=new define.DefineMap(e)),e},stringOrObservable:function(e){return Array.isArray(e)?new define.DefaultList(e):canReflect_1_17_4_canReflect.isPlainObject(e)?new define.DefaultMap(e):canReflect_1_17_4_canReflect.convert(e,define.types.string)},htmlbool:function(e){return""===e||!!canStringToAny_1_2_0_canStringToAny(e)},"*":function(e){return e},any:function(e){return e},string:maybeString,compute:{set:function(e,t,a,n){return isObservableValue(e)?e:isObservableValue(n)?(canReflect_1_17_4_canReflect.setValue(n,e),n):e},get:function(e){return isObservableValue(e)?canReflect_1_17_4_canReflect.getValue(e):e}}},define.updateSchemaKeys=function(e,t){for(var a in t){var n=t[a];!1!==n.serialize&&(e.keys[a]=n.type?n.type:function(e){return e},!0===t[a].identity&&e.identity.push(a))}return e};var initializing=0,Construct=function(){if(arguments.length)return Construct.extend.apply(Construct,arguments)},canGetDescriptor;try{canGetDescriptor=!0}catch(t){canGetDescriptor=!1}var getDescriptor=function(e,t){var a=Object.getOwnPropertyDescriptor(e,t);return a&&(a.get||a.set)?a:null},inheritGetterSetter=function(e,t,a){a=a||e;var n;for(var r in e)(n=getDescriptor(e,r))?this._defineProperty(a,t,r,n):Construct._overwrite(a,t,r,e[r])},simpleInherit=function(e,t,a){for(var n in a=a||e,e)Construct._overwrite(a,t,n,e[n])};canReflect_1_17_4_canReflect.assignMap(Construct,{constructorExtends:!0,newInstance:function(){var e=this.instance(),t;if(e.setup){if(Object.defineProperty(e,"__inSetup",{configurable:!0,enumerable:!1,value:!0,writable:!0}),t=e.setup.apply(e,arguments),t instanceof Construct.ReturnValue)return t.value;e.__inSetup=!1}return e.init&&e.init.apply(e,t||arguments),e},_inherit:canGetDescriptor?inheritGetterSetter:simpleInherit,_defineProperty:function(e,t,a,n){Object.defineProperty(e,a,n)},_overwrite:function(e,t,a,n){Object.defineProperty(e,a,{value:n,configurable:!0,enumerable:!0,writable:!0})},setup:function(e){var t=canReflect_1_17_4_canReflect.assignDeepMap({},e.defaults);this.defaults=canReflect_1_17_4_canReflect.assignDeepMap(t,this.defaults)},instance:function(){initializing=1;var e=new this;return initializing=0,e},extend:function(e,a,n){function r(){if(!initializing)return(!this||this.constructor!==p)&&arguments.length&&p.constructorExtends?p.extend.apply(p,arguments):p.newInstance.apply(p,arguments)}var s=e,o=a,i=n;"string"!=typeof s&&(i=o,o=s,s=null),i||(i=o,o=null),i=i||{};var l=this,d=this.prototype,p,c;for(var u in c=this.instance(),Construct._inherit(i,d,c),s||(o&&o.shortName?s=o.shortName:this.shortName&&(s=this.shortName)),p="function"==typeof namedCtor?namedCtor(constructorName,r):function(){return r.apply(this,arguments)},l)l.hasOwnProperty(u)&&(p[u]=l[u]);if(Construct._inherit(o,l,p),canReflect_1_17_4_canReflect.assignMap(p,{constructor:p,prototype:c}),void 0!==s){if(Object.getOwnPropertyDescriptor){var y=Object.getOwnPropertyDescriptor(p,"name");(!y||y.configurable)&&Object.defineProperty(p,"name",{writable:!0,value:s,configurable:!0})}p.shortName=s}p.prototype.constructor=p;var h=[l].concat(Array.prototype.slice.call(arguments)),t=p.setup.apply(p,h);return p.init&&p.init.apply(p,t||h),p},ReturnValue:function(e){this.value=e}}),Construct.prototype.setup=function(){},Construct.prototype.init=function(){};var canConstruct_3_5_1_canConstruct=canNamespace_1_0_0_canNamespace.Construct=Construct,canDefine_2_5_8_ensureMeta=function(e){var t=canSymbol_1_6_1_canSymbol.for("can.meta"),a=e[t];return a||(a={},canReflect_1_17_4_canReflect.setKeyValue(e,t,a)),a},returnFirstArg=function(e){return e},defineHelpers={defineExpando:function(e,t,a){if(canDefine_2_5_8_canDefine._specialKeys[t])return!0;var n=e._define.definitions;if(!(n&&n[t])){var r=e._instanceDefinitions;if(!r){if(Object.isSealed(e))return;Object.defineProperty(e,"_instanceDefinitions",{configurable:!0,enumerable:!1,writable:!0,value:{}}),r=e._instanceDefinitions}if(!r[t]){var s=e._define.defaultDefinition||{type:canDefine_2_5_8_canDefine.types.observable};return canDefine_2_5_8_canDefine.property(e,t,s,{},{}),e._data[t]=s.type?canDefine_2_5_8_canDefine.make.set.type(t,s.type,returnFirstArg).call(e,a):canDefine_2_5_8_canDefine.types.observable(a),r[t]=s,canQueues_1_1_3_canQueues.batch.start(),e.dispatch({type:"can.keys",target:e}),void 0!==e._data[t]&&e.dispatch({type:t,target:e,patches:[{type:"set",key:t,value:e._data[t]}]},[e._data[t],void 0]),canQueues_1_1_3_canQueues.batch.stop(),!0}}},reflectSerialize:function(e){var t=this._define.definitions,a=this._define.defaultDefinition;return this.forEach(function(n,r){var s=t[r];n=s&&"function"==typeof s.serialize?s.serialize.call(this,n,r):a&&"function"==typeof a.serialize?a.serialize.call(this,n,r):canReflect_1_17_4_canReflect.serialize(n),void 0!==n&&(e[r]=n)},this),e},reflectUnwrap:function(e){return this.forEach(function(t,a){void 0!==t&&(e[a]=canReflect_1_17_4_canReflect.unwrap(t))}),e},log:function(e){var t=this,a=function(e){return"string"==typeof e?JSON.stringify(e):e},n=canDefine_2_5_8_ensureMeta(t),r=n.allowedLogKeysSet||new Set;n.allowedLogKeysSet=r,e&&r.add(e),n._log=function(n,s){var o=n.type;"can.onPatches"===o||e&&!r.has(o)||"can.keys"===o||e&&!r.has(o)||("add"===o||"remove"===o?dev.log(canReflect_1_17_4_canReflect.getName(t),"\n how   ",a(o),"\n what  ",a(s[0]),"\n index ",a(s[1])):dev.log(canReflect_1_17_4_canReflect.getName(t),"\n key ",a(o),"\n is  ",a(s[0]),"\n was ",a(s[1])))}},deleteKey:function(e){var t=this._instanceDefinitions;if(t&&Object.prototype.hasOwnProperty.call(t,e)&&!Object.isSealed(this)){delete t[e],canQueues_1_1_3_canQueues.batch.start(),this.dispatch({type:"can.keys",target:this});var a=this._data[e];a!==void 0&&(delete this._data[e],delete this[e],this.dispatch({type:e,target:this,patches:[{type:"delete",key:e}]},[void 0,a])),canQueues_1_1_3_canQueues.batch.stop()}else this.set(e,void 0);return this}},defineHelpers_1=defineHelpers,keysForDefinition=function(e){var t=[];for(var a in e){var n=e[a];("object"!=typeof n||("serialize"in n?!!n.serialize:!n.get))&&t.push(a)}return t};function assign(e){canQueues_1_1_3_canQueues.batch.start(),canReflect_1_17_4_canReflect.assignMap(this,e||{}),canQueues_1_1_3_canQueues.batch.stop()}function update(e){canQueues_1_1_3_canQueues.batch.start(),canReflect_1_17_4_canReflect.updateMap(this,e||{}),canQueues_1_1_3_canQueues.batch.stop()}function assignDeep(e){canQueues_1_1_3_canQueues.batch.start(),canReflect_1_17_4_canReflect.assignDeepMap(this,e||{}),canQueues_1_1_3_canQueues.batch.stop()}function updateDeep(e){canQueues_1_1_3_canQueues.batch.start(),canReflect_1_17_4_canReflect.updateDeepMap(this,e||{}),canQueues_1_1_3_canQueues.batch.stop()}function setKeyValue(e,t){var a=defineHelpers_1.defineExpando(this,e,t);a||(this[e]=t)}function getKeyValue(e){var t=this[e];return void 0!==t||e in this||Object.isSealed(this)?t:(canObservationRecorder_1_2_0_canObservationRecorder.add(this,e),this[e])}var getSchemaSymbol$1=canSymbol_1_6_1_canSymbol.for("can.getSchema");function getSchema(){var e=this.prototype._define,t=e?e.definitions:{};return canDefine_2_5_8_canDefine.updateSchemaKeys({type:"map",identity:[],keys:{}},t)}var DefineMap=canConstruct_3_5_1_canConstruct.extend("DefineMap",{setup:function(e){var t=this.prototype,a;if(DefineMap){var n=canDefine_2_5_8_canDefine(t,t,e.prototype._define);for(a in canDefine_2_5_8_canDefine.makeDefineInstanceKey(this,n),type$1(this),DefineMap.prototype)canDefine_2_5_8_canDefine.defineConfigurableAndNotEnumerable(t,a,t[a]);this.prototype.setup=function(e){canDefine_2_5_8_canDefine.setup.call(this,e||{},this.constructor.seal)}}else for(a in t)canDefine_2_5_8_canDefine.defineConfigurableAndNotEnumerable(t,a,t[a]);canDefine_2_5_8_canDefine.defineConfigurableAndNotEnumerable(t,"constructor",this),this[getSchemaSymbol$1]=getSchema}},{setup:function(e,t){this._define||(Object.defineProperty(this,"_define",{enumerable:!1,value:{definitions:{}}}),Object.defineProperty(this,"_data",{enumerable:!1,value:{}})),canDefine_2_5_8_canDefine.setup.call(this,e||{},!0===t)},get:function(e){return e?getKeyValue.call(this,e):canReflect_1_17_4_canReflect.unwrap(this,Map)},set:function(e,t){return"object"==typeof e?!0===t?updateDeep.call(this,e):assignDeep.call(this,e):setKeyValue.call(this,e,t),this},assignDeep:function(e){return assignDeep.call(this,e),this},updateDeep:function(e){return updateDeep.call(this,e),this},assign:function(e){return assign.call(this,e),this},update:function(e){return update.call(this,e),this},serialize:function(){return canReflect_1_17_4_canReflect.serialize(this,Map)},deleteKey:defineHelpers_1.deleteKey,forEach:function(){var e=function(e,t,a){return canReflect_1_17_4_canReflect.eachKey(e,t,a)},t=canObservationRecorder_1_2_0_canObservationRecorder.ignore(e);return function(a,n,r){return!1===r?t(this,a,n):e(this,a,n)}}(),"*":{type:canDefine_2_5_8_canDefine.types.observable}}),defineMapProto={"can.isMapLike":!0,"can.isListLike":!1,"can.isValueLike":!1,"can.getKeyValue":getKeyValue,"can.setKeyValue":setKeyValue,"can.deleteKeyValue":defineHelpers_1.deleteKey,"can.getOwnKeys":function(){var e=canReflect_1_17_4_canReflect.getOwnEnumerableKeys(this);if(this._computed)for(var t=canReflect_1_17_4_canReflect.getOwnKeys(this._computed),a=0,n;a<t.length;a++)n=t[a],0>e.indexOf(n)&&e.push(n);return e},"can.getOwnEnumerableKeys":function(){return canObservationRecorder_1_2_0_canObservationRecorder.add(this,"can.keys"),keysForDefinition(this._define.definitions).concat(keysForDefinition(this._instanceDefinitions))},"can.hasOwnKey":function(e){return Object.hasOwnProperty.call(this._define.definitions,e)},"can.hasKey":function(e){return!!this._define.definitions[e]},"can.assignDeep":assignDeep,"can.updateDeep":updateDeep,"can.unwrap":defineHelpers_1.reflectUnwrap,"can.serialize":defineHelpers_1.reflectSerialize,"can.keyHasDependencies":function(e){return!!(this._computed&&this._computed[e]&&this._computed[e].compute)},"can.getKeyDependencies":function(e){var t;return this._computed&&this._computed[e]&&this._computed[e].compute&&(t={},t.valueDependencies=new Set([this._computed[e].compute])),t}};for(var prop in canReflect_1_17_4_canReflect.assignSymbols(DefineMap.prototype,defineMapProto),canReflect_1_17_4_canReflect.setKeyValue(DefineMap.prototype,canSymbol_1_6_1_canSymbol.iterator,function(){return new canDefine_2_5_8_canDefine.Iterator(this)}),canDefine_2_5_8_canDefine.eventsProto)DefineMap[prop]=canDefine_2_5_8_canDefine.eventsProto[prop],Object.defineProperty(DefineMap.prototype,prop,{enumerable:!1,value:canDefine_2_5_8_canDefine.eventsProto[prop],writable:!0});var eventsProtoSymbols="getOwnPropertySymbols"in Object?Object.getOwnPropertySymbols(canDefine_2_5_8_canDefine.eventsProto):[canSymbol_1_6_1_canSymbol.for("can.onKeyValue"),canSymbol_1_6_1_canSymbol.for("can.offKeyValue")];eventsProtoSymbols.forEach(function(e){Object.defineProperty(DefineMap.prototype,e,{enumerable:!1,value:canDefine_2_5_8_canDefine.eventsProto[e],writable:!0})}),canDefine_2_5_8_canDefine.DefineMap=DefineMap,Object.defineProperty(DefineMap.prototype,"toObject",{enumerable:!1,writable:!0,value:function(){return canLog_1_0_0_canLog.warn("Use DefineMap::get instead of DefineMap::toObject"),this.get()}});var map$2=canNamespace_1_0_0_canNamespace.DefineMap=DefineMap,slice$1=[].slice;function defaultIdentity(e,t){return e===t}function makeIdentityFromMapSchema(e){return e.identity&&e.identity.length?function(t,a){var n=canReflect_1_17_4_canReflect.getIdentity(t,e),r=canReflect_1_17_4_canReflect.getIdentity(a,e);return n===r}:defaultIdentity}function makeIdentityFromListSchema(e){return null==e.values?defaultIdentity:makeIdentityFromMapSchema(canReflect_1_17_4_canReflect.getSchema(e.values))}function makeIdentity(e,t){var a=canReflect_1_17_4_canReflect.getSchema(e),n;if(null!=a)if(null!=a.values)n=canReflect_1_17_4_canReflect.getSchema(a.values);else return defaultIdentity;return null==n&&0<t&&(n=canReflect_1_17_4_canReflect.getSchema(canReflect_1_17_4_canReflect.getKeyValue(e,0))),n?makeIdentityFromMapSchema(n):defaultIdentity}function reverseDiff(e,t,a,n,r){for(var s=a.length-1,o=n.length-1;s>e&&o>t;){var i=a[s],l=n[o];if(r(i,l,s)){s--,o--;continue}else return[{type:"splice",index:t,deleteCount:s-e+1,insert:slice$1.call(n,t,o+1)}]}return[{type:"splice",index:t,deleteCount:s-e+1,insert:slice$1.call(n,t,o+1)}]}var list=function(e,t,a){var n=0,r=0,s=canReflect_1_17_4_canReflect.size(e),o=canReflect_1_17_4_canReflect.size(t),i=[],l;for(l="function"===typeof a?a:null==a?makeIdentity(e,s):"map"===a.type?makeIdentityFromMapSchema(a):makeIdentityFromListSchema(a);n<s&&r<o;){var d=e[n],p=t[r];if(l(d,p,n)){n++,r++;continue}if(r+1<o&&l(d,t[r+1],n)){i.push({index:r,deleteCount:0,insert:[t[r]],type:"splice"}),n++,r+=2;continue}else if(n+1<s&&l(e[n+1],p,n+1)){i.push({index:r,deleteCount:1,insert:[],type:"splice"}),n+=2,r++;continue}else return i.push.apply(i,reverseDiff(n,r,e,t,l)),i}return r===o&&n===s?i:(i.push({type:"splice",index:r,deleteCount:s-n,insert:slice$1.call(t,r)}),i)},canCid_1_3_0_canCid=createCommonjsModule(function(e){var t=0,a="can"+new Date,n=function(e,n){var r=e.nodeName?a:"_cid";return e[r]||(t++,e[r]=(n||"")+t),e[r]};if(n.domExpando=a,n.get=function(e){var t=typeof e;return null!==t&&("object"===t||"function"===t)?n(e):t+":"+e},canNamespace_1_0_0_canNamespace.cid)throw new Error("You can't have two versions of can-cid, check your dependencies");else e.exports=canNamespace_1_0_0_canNamespace.cid=n}),singleReference;function getKeyName(e,t){var a=t?canCid_1_3_0_canCid(e)+":"+t:canCid_1_3_0_canCid(e);return a||e}singleReference={set:function(e,t,a,n){e[getKeyName(t,n)]=a},getAndDelete:function(e,t,a){var n=getKeyName(t,a),r=e[n];return delete e[n],r}};var canSingleReference_1_2_0_canSingleReference=singleReference,make$1=canDefine_2_5_8_canDefine.make,splice=[].splice,runningNative=!1,identity=function(e){return e},localOnPatchesSymbol="can.patches",makeFilterCallback=function(e){return function(t){for(var a in e)if(t[a]!==e[a])return!1;return!0}},onKeyValue=canDefine_2_5_8_canDefine.eventsProto[canSymbol_1_6_1_canSymbol.for("can.onKeyValue")],offKeyValue=canDefine_2_5_8_canDefine.eventsProto[canSymbol_1_6_1_canSymbol.for("can.offKeyValue")],getSchemaSymbol$2=canSymbol_1_6_1_canSymbol.for("can.getSchema");function getSchema$1(){var e=this.prototype._define.definitions,t={type:"list",keys:{}};return t=canDefine_2_5_8_canDefine.updateSchemaKeys(t,e),t.keys["#"]&&(t.values=e["#"].Type,delete t.keys["#"]),t}var DefineList=canConstruct_3_5_1_canConstruct.extend("DefineList",{setup:function(e){if(DefineList){type$1(this);var t=this.prototype,a=canDefine_2_5_8_canDefine(t,t,e.prototype._define);canDefine_2_5_8_canDefine.makeDefineInstanceKey(this,a);var n=a.definitions["#"]||a.defaultDefinition;n&&(n.Type?this.prototype.__type=make$1.set.Type("*",n.Type,identity):n.type&&(this.prototype.__type=make$1.set.type("*",n.type,identity))),this[getSchemaSymbol$2]=getSchema$1}}},{setup:function(e){this._define||(Object.defineProperty(this,"_define",{enumerable:!1,value:{definitions:{length:{type:"number"},_length:{type:"number"}}}}),Object.defineProperty(this,"_data",{enumerable:!1,value:{}})),canDefine_2_5_8_canDefine.setup.call(this,{},!1),Object.defineProperty(this,"_length",{enumerable:!1,configurable:!0,writable:!0,value:0}),e&&this.splice.apply(this,[0,0].concat(canReflect_1_17_4_canReflect.toArray(e)))},__type:canDefine_2_5_8_canDefine.types.observable,_triggerChange:function(e,t,a,n){var r=+e;if(!isNaN(r)){var s=this._define.definitions["#"],o,i;"add"===t?(s&&"function"==typeof s.added&&canObservationRecorder_1_2_0_canObservationRecorder.ignore(s.added).call(this,a,r),o=[{type:"splice",insert:a,index:r,deleteCount:0}],i={type:t,patches:o},this.dispatch(i,[a,r])):"remove"===t?(s&&"function"==typeof s.removed&&canObservationRecorder_1_2_0_canObservationRecorder.ignore(s.removed).call(this,n,r),o=[{type:"splice",index:r,deleteCount:n.length}],i={type:t,patches:o},this.dispatch(i,[n,r])):this.dispatch(t,[a,r])}else this.dispatch({type:""+e,target:this},[a,n])},get:function(e){return arguments.length?(isNaN(e)?canObservationRecorder_1_2_0_canObservationRecorder.add(this,e):canObservationRecorder_1_2_0_canObservationRecorder.add(this,"length"),this[e]):canReflect_1_17_4_canReflect.unwrap(this,Map)},set:function(e,t){if("object"==typeof e)canReflect_1_17_4_canReflect.isListLike(e)?t?this.replace(e):canReflect_1_17_4_canReflect.assignList(this,e):canReflect_1_17_4_canReflect.assignMap(this,e);else if(e=isNaN(+e)||e%1?e:+e,"number"==typeof e){if("number"==typeof e&&e>this._length-1){var a=Array(e+1-this._length);return a[a.length-1]=t,this.push.apply(this,a),a}this.splice(e,1,t)}else{var n=defineHelpers_1.defineExpando(this,e,t);n||(this[e]=t)}return this},assign:function(e){return canReflect_1_17_4_canReflect.isListLike(e)?canReflect_1_17_4_canReflect.assignList(this,e):canReflect_1_17_4_canReflect.assignMap(this,e),this},update:function(e){return canReflect_1_17_4_canReflect.isListLike(e)?canReflect_1_17_4_canReflect.updateList(this,e):canReflect_1_17_4_canReflect.updateMap(this,e),this},assignDeep:function(e){return canReflect_1_17_4_canReflect.isListLike(e)?canReflect_1_17_4_canReflect.assignDeepList(this,e):canReflect_1_17_4_canReflect.assignDeepMap(this,e),this},updateDeep:function(e){return canReflect_1_17_4_canReflect.isListLike(e)?canReflect_1_17_4_canReflect.updateDeepList(this,e):canReflect_1_17_4_canReflect.updateDeepMap(this,e),this},_items:function(){var e=[];return this._each(function(t){e.push(t)}),e},_each:function(e){for(var t=0,a=this._length;t<a;t++)e(this[t],t)},splice:function(e,t){var a=canReflect_1_17_4_canReflect.toArray(arguments),n=[],r=2<a.length,s=this._length,o,l,d;for(e=e||0,o=0,l=a.length-2;o<l;o++)d=o+2,a[d]=this.__type(a[d],d),n.push(a[d]),this[o+e]!==a[d]&&(r=!1);if(r&&this._length<=n.length)return n;void 0===t&&(t=a[1]=this._length-e),runningNative=!0;var p=splice.apply(this,a);return runningNative=!1,canQueues_1_1_3_canQueues.batch.start(),0<t&&this._triggerChange(""+e,"remove",void 0,p),2<a.length&&this._triggerChange(""+e,"add",n,p),this.dispatch("length",[this._length,s]),canQueues_1_1_3_canQueues.batch.stop(),p},serialize:function(){return canReflect_1_17_4_canReflect.serialize(this,Map)}});for(var prop$1 in canDefine_2_5_8_canDefine.eventsProto)Object.defineProperty(DefineList.prototype,prop$1,{enumerable:!1,value:canDefine_2_5_8_canDefine.eventsProto[prop$1],writable:!0});var eventsProtoSymbols$1="getOwnPropertySymbols"in Object?Object.getOwnPropertySymbols(canDefine_2_5_8_canDefine.eventsProto):[canSymbol_1_6_1_canSymbol.for("can.onKeyValue"),canSymbol_1_6_1_canSymbol.for("can.offKeyValue")];eventsProtoSymbols$1.forEach(function(e){Object.defineProperty(DefineList.prototype,e,{enumerable:!1,value:canDefine_2_5_8_canDefine.eventsProto[e],writable:!0})});var getArgs=function(e){return e[0]&&Array.isArray(e[0])?e[0]:canReflect_1_17_4_canReflect.toArray(e)};for(var prop$1 in canReflect_1_17_4_canReflect.eachKey({push:"length",unshift:0},function(e,t){var a=[][t];DefineList.prototype[t]=function(){for(var t=[],n=e?this._length:0,r=arguments.length,s,o;r--;)o=arguments[r],t[r]=this.__type(o,r);return runningNative=!0,s=a.apply(this,t),runningNative=!1,(!this.comparator||t.length)&&(canQueues_1_1_3_canQueues.batch.start(),this._triggerChange(""+n,"add",t,void 0),this.dispatch("length",[this._length,n]),canQueues_1_1_3_canQueues.batch.stop()),s}}),canReflect_1_17_4_canReflect.eachKey({pop:"length",shift:0},function(e,t){var a=[][t];DefineList.prototype[t]=function(){if(this._length){var t=getArgs(arguments),n=e&&this._length?this._length-1:0,r=this._length?this._length:0,s;return runningNative=!0,s=a.apply(this,t),runningNative=!1,canQueues_1_1_3_canQueues.batch.start(),this._triggerChange(""+n,"remove",void 0,[s]),this.dispatch("length",[this._length,r]),canQueues_1_1_3_canQueues.batch.stop(),s}}}),canReflect_1_17_4_canReflect.eachKey({map:3,filter:3,reduce:4,reduceRight:4,every:3,some:3},function(e,t){DefineList.prototype[t]=function(){var a=this,n=[].slice.call(arguments,0),r=n[0],s=n[e-1]||a;"object"==typeof r&&(r=makeFilterCallback(r)),n[0]=function(){var t=[].slice.call(arguments,0);return t[e-3]=a.get(t[e-2]),r.apply(s,t)};var o=Array.prototype[t].apply(this,n);return"map"===t?new DefineList(o):"filter"===t?new a.constructor(o):o}}),canAssign_1_3_1_canAssign(DefineList.prototype,{indexOf:function(e,t){for(var a=t||0,n=this.length;a<n;a++)if(this.get(a)===e)return a;return-1},lastIndexOf:function(e,t){t="undefined"==typeof t?this.length-1:t;for(var a=t;0<=a;a--)if(this.get(a)===e)return a;return-1},join:function(){return canObservationRecorder_1_2_0_canObservationRecorder.add(this,"length"),[].join.apply(this,arguments)},reverse:function(){var e=[].reverse.call(this._items());return this.replace(e)},slice:function(){canObservationRecorder_1_2_0_canObservationRecorder.add(this,"length");var e=Array.prototype.slice.apply(this,arguments);return new this.constructor(e)},concat:function(){var e=[];return canReflect_1_17_4_canReflect.eachIndex(arguments,function(t){if(canReflect_1_17_4_canReflect.isListLike(t)){var a=Array.isArray(t)?t:canReflect_1_17_4_canReflect.toArray(t);a.forEach(function(t){e.push(this.__type(t))},this)}else e.push(this.__type(t))},this),new this.constructor(Array.prototype.concat.apply(canReflect_1_17_4_canReflect.toArray(this),e))},forEach:function(e,t){for(var a=0,n=this.length,r;a<n&&(r=this.get(a),!1!==e.call(t||r,r,a,this));a++);return this},replace:function(e){var t=list(this,e);canQueues_1_1_3_canQueues.batch.start();for(var a=0,n=t.length;a<n;a++)this.splice.apply(this,[t[a].index,t[a].deleteCount].concat(t[a].insert));return canQueues_1_1_3_canQueues.batch.stop(),this},sort:function(e){var t=Array.prototype.slice.call(this);return Array.prototype.sort.call(t,e),this.splice.apply(this,[0,t.length].concat(t)),this}}),canDefine_2_5_8_canDefine.eventsProto)DefineList[prop$1]=canDefine_2_5_8_canDefine.eventsProto[prop$1],Object.defineProperty(DefineList.prototype,prop$1,{enumerable:!1,value:canDefine_2_5_8_canDefine.eventsProto[prop$1],writable:!0});Object.defineProperty(DefineList.prototype,"length",{get:function(){return this.__inSetup||canObservationRecorder_1_2_0_canObservationRecorder.add(this,"length"),this._length},set:function(e){if(runningNative)return void(this._length=e);if(!(null==e||isNaN(+e)||e===this._length))if(e>this._length-1){var t=Array(e-this._length);this.push.apply(this,t)}else this.splice(e)},enumerable:!0}),DefineList.prototype.attr=function(e,t){return canLog_1_0_0_canLog.warn("DefineMap::attr shouldn't be called"),0===arguments.length?this.get():e&&"object"==typeof e?this.set.apply(this,arguments):1===arguments.length?this.get(e):this.set(e,t)},DefineList.prototype.item=function(e,t){return 1===arguments.length?this.get(e):this.set(e,t)},DefineList.prototype.items=function(){return canLog_1_0_0_canLog.warn("DefineList::get should should be used instead of DefineList::items"),this.get()};var defineListProto={"can.isMoreListLikeThanMapLike":!0,"can.isMapLike":!0,"can.isListLike":!0,"can.isValueLike":!1,"can.getKeyValue":DefineList.prototype.get,"can.setKeyValue":DefineList.prototype.set,"can.onKeyValue":function(e,t,a){var n;return isNaN(e)?onKeyValue.apply(this,arguments):(n=function(){t(this[e])},canSingleReference_1_2_0_canSingleReference.set(t,this,n,e),onKeyValue.call(this,"length",n,a))},"can.offKeyValue":function(e,t,a){var n;return isNaN(e)?offKeyValue.apply(this,arguments):(n=canSingleReference_1_2_0_canSingleReference.getAndDelete(t,this,e),offKeyValue.call(this,"length",n,a))},"can.deleteKeyValue":function(e){if(e=isNaN(+e)||e%1?e:+e,"number"==typeof e)this.splice(e,1);else{if("length"===e||"_length"===e)return;this.set(e,void 0)}return this},"can.assignDeep":function(e){canQueues_1_1_3_canQueues.batch.start(),canReflect_1_17_4_canReflect.assignList(this,e),canQueues_1_1_3_canQueues.batch.stop()},"can.updateDeep":function(e){canQueues_1_1_3_canQueues.batch.start(),this.replace(e),canQueues_1_1_3_canQueues.batch.stop()},"can.keyHasDependencies":function(e){return!!(this._computed&&this._computed[e]&&this._computed[e].compute)},"can.getKeyDependencies":function(e){var t;return this._computed&&this._computed[e]&&this._computed[e].compute&&(t={},t.valueDependencies=new Set([this._computed[e].compute])),t},"can.splice":function(e,t,a){this.splice.apply(this,[e,t].concat(a))},"can.onPatches":function(e,t){this[canSymbol_1_6_1_canSymbol.for("can.onKeyValue")](localOnPatchesSymbol,e,t)},"can.offPatches":function(e,t){this[canSymbol_1_6_1_canSymbol.for("can.offKeyValue")](localOnPatchesSymbol,e,t)}};canReflect_1_17_4_canReflect.assignSymbols(DefineList.prototype,defineListProto),canReflect_1_17_4_canReflect.setKeyValue(DefineList.prototype,canSymbol_1_6_1_canSymbol.iterator,function(){var e=-1;return"number"!=typeof this.length&&(this.length=0),{next:function(){return e++,{value:this[e],done:e>=this.length}}.bind(this)}}),canDefine_2_5_8_canDefine.DefineList=DefineList;var list$1=canNamespace_1_0_0_canNamespace.DefineList=DefineList,utils={isContainer:function(e){var t=typeof e;return e&&("object"==t||"function"==t)},strReplacer:/\{([^\}]+)\}/g,parts:function(e){return Array.isArray(e)?e:"undefined"==typeof e?[]:(e+"").replace(/\[/g,".").replace(/]/g,"").split(".")}},canKey_1_2_0_utils=utils,_delete=function(e,t){for(var a=canKey_1_2_0_utils.parts(t),n=e,r=0;r<a.length-1;r++)n&&(n=canReflect_1_17_4_canReflect.getKeyValue(n,a[r]));n&&canReflect_1_17_4_canReflect.deleteKeyValue(n,a[a.length-1])};function get(e,t){var a=canKey_1_2_0_utils.parts(t),n=a.length,r,s,o;if(!n)return e;for(r=e,s=0;s<n&&canKey_1_2_0_utils.isContainer(r)&&null!==r;s++)o=r,r=canReflect_1_17_4_canReflect.getKeyValue(o,a[s]);return r}var get_1=get,replaceWith=function(e,t,a,n){return e.replace(canKey_1_2_0_utils.strReplacer,function(e,r){var s=get_1(t,r);return n&&_delete(t,r),a?a(r,s):s})},setValueSymbol$1=canSymbol_1_6_1_canSymbol.for("can.setValue");function set$1(e,t,a){for(var n=canKey_1_2_0_utils.parts(t),r=e,s=n.length,o=0;o<s-1&&canKey_1_2_0_utils.isContainer(r);o++)r=canReflect_1_17_4_canReflect.getKeyValue(r,n[o]);if(r)canReflect_1_17_4_canReflect.setKeyValue(r,n[o],a);else throw new TypeError("Cannot set value at key path '"+t+"'");return e}var set_1=set$1,walk=function(e,t,a){var n=canKey_1_2_0_utils.parts(t),r=n.length,s,o,l,d;if(r)for(s=e,o=0;o<r;o++){l=s,d=n[o],s=canKey_1_2_0_utils.isContainer(l)&&canReflect_1_17_4_canReflect.getKeyValue(l,d);var p=a({parent:l,key:d,value:s},o);void 0!==p&&(s=p)}};function deleteKeys(e){for(var t=e.length-1,a;0<=t;t--)if(a=e[t],delete a.parent[a.key],0!==canReflect_1_17_4_canReflect.size(a.parent))return}var transform=function(e,t){var a=canReflect_1_17_4_canReflect.serialize(e);return canReflect_1_17_4_canReflect.eachKey(t,function(e,t){var n=canKey_1_2_0_utils.parts(t),r=canKey_1_2_0_utils.parts(e),s=[];walk(a,n,function(e){s.push(e)});var o=s[s.length-1],l=o.value;void 0!==l&&(walk(a,r,function(e,t){return t<r.length-1&&!e.value?e.parent[e.key]={}:void(t===r.length-1&&(e.parent[e.key]=l))}),deleteKeys(s))}),a},canKey_1_2_0_canKey=canNamespace_1_0_0_canNamespace.key={deleteKey:_delete,get:get_1,replaceWith:replaceWith,set:set_1,transform:transform,walk:walk},key=function(e,t){var a=canKey_1_2_0_utils.parts(t),n=a.length-1,r=new canObservation_4_1_0_canObservation(function(){var t;return canKey_1_2_0_canKey.walk(e,a,function(e,a){a===n&&(t=e.value)}),t}),s=function(t){canKey_1_2_0_canKey.set(e,a,t)};Object.defineProperty(r,"value",{get:r.get,set:s});return canReflect_1_17_4_canReflect.assignSymbols(r,{"can.setValue":s})},canValue_1_0_1_canValue=canNamespace_1_0_0_canNamespace.value={bind:function(e,t){return key(e,t)},from:function(e,t){return new canObservation_4_1_0_canObservation(function(){return canKey_1_2_0_canKey.get(e,t)})},returnedBy:function(e){return new canObservation_4_1_0_canObservation(e)},to:function(e,t){var a=key(e,t);return canReflect_1_17_4_canReflect.assignSymbols(a,{"can.getValue":null})},with:function(e){return new canSimpleObservable_2_2_0_canSimpleObservable(e)}},SimpleMap=canConstruct_3_5_1_canConstruct.extend("SimpleMap",{setup:function(e){this._data={},e&&"object"==typeof e&&this.attr(e)},attr:function(e,t){var a=this;if(0===arguments.length){canObservationRecorder_1_2_0_canObservationRecorder.add(this,"can.keys");var n={};return canReflect_1_17_4_canReflect.eachKey(this._data,function(e,t){canObservationRecorder_1_2_0_canObservationRecorder.add(this,t),n[t]=e},this),n}if(1<arguments.length){var r=this._data.hasOwnProperty(e),s=this._data[e];if(this._data[e]=t,s!==t){var o={keyChanged:r?void 0:e,type:e};this.dispatch(o,[t,s])}}else if("object"==typeof e)canQueues_1_1_3_canQueues.batch.start(),canReflect_1_17_4_canReflect.eachKey(e,function(e,t){a.attr(t,e)}),canQueues_1_1_3_canQueues.batch.stop();else return"constructor"===e?this.constructor:(canObservationRecorder_1_2_0_canObservationRecorder.add(this,e),this._data[e])},serialize:function(){return canReflect_1_17_4_canReflect.serialize(this,Map)},get:function(){return this.attr.apply(this,arguments)},set:function(){return this.attr.apply(this,arguments)},log:function(){}});map$1(SimpleMap.prototype);var simpleMapProto={"can.isMapLike":!0,"can.isListLike":!1,"can.isValueLike":!1,"can.getKeyValue":SimpleMap.prototype.get,"can.setKeyValue":SimpleMap.prototype.set,"can.deleteKeyValue":function(e){var t;if(this._data.hasOwnProperty(e)){var a=this._data[e];delete this._data[e],t={keyChanged:e,type:e},this.dispatch(t,[void 0,a])}},"can.getOwnEnumerableKeys":function(){return canObservationRecorder_1_2_0_canObservationRecorder.add(this,"can.keys"),Object.keys(this._data)},"can.assignDeep":function(e){canQueues_1_1_3_canQueues.batch.start(),canReflect_1_17_4_canReflect.assignMap(this,e),canQueues_1_1_3_canQueues.batch.stop()},"can.updateDeep":function(e){canQueues_1_1_3_canQueues.batch.start(),canReflect_1_17_4_canReflect.updateMap(this,e),canQueues_1_1_3_canQueues.batch.stop()},"can.keyHasDependencies":function(){return!1},"can.getKeyDependencies":function(){}};canReflect_1_17_4_canReflect.assignSymbols(SimpleMap.prototype,simpleMapProto);var canSimpleMap_4_2_0_canSimpleMap=SimpleMap,getChangesSymbol$2=canSymbol_1_6_1_canSymbol.for("can.getChangesDependencyRecord"),getValueSymbol$1=canSymbol_1_6_1_canSymbol.for("can.getValue"),onValueSymbol$2=canSymbol_1_6_1_canSymbol.for("can.onValue"),setValueSymbol$2=canSymbol_1_6_1_canSymbol.for("can.setValue");function defaultSetValue(e,t){canReflect_1_17_4_canReflect.setValue(t,e)}function turnOffListeningAndUpdate(e,t,a,n){e[onValueSymbol$2]&&canReflect_1_17_4_canReflect.offValue(e,a,n)}function turnOnListeningAndUpdate(e,t,a,n){e[onValueSymbol$2]&&canReflect_1_17_4_canReflect.onValue(e,a,n)}function Semaphore(){this.value=0}Object.assign(Semaphore.prototype,{decrement:function(){this.value-=1},increment:function(){this.value+=1}});function Bind(e){this._options=e,void 0===e.queue&&(e.queue="domUI"),!1==0<e.cycles&&(e.cycles=0),e.onInitDoNotUpdateChild="boolean"==typeof e.onInitDoNotUpdateChild&&e.onInitDoNotUpdateChild,e.onInitSetUndefinedParentIfChildIsDefined="boolean"!=typeof e.onInitSetUndefinedParentIfChildIsDefined||e.onInitSetUndefinedParentIfChildIsDefined;var t=new Semaphore,a=new Semaphore,n=!0;"boolean"==typeof e.childToParent?n=e.childToParent:null==e.child[getValueSymbol$1]?n=!1:void 0===e.setParent&&null==e.parent[setValueSymbol$2]&&(n=!1);var r=!0;if("boolean"==typeof e.parentToChild?r=e.parentToChild:null==e.parent[getValueSymbol$1]?r=!1:void 0===e.setChild&&null==e.child[setValueSymbol$2]&&(r=!1),!1===n&&!1===r)throw new Error("Neither the child nor parent will be updated; this is a no-way binding");this._childToParent=n,this._parentToChild=r,void 0===e.setChild&&(e.setChild=defaultSetValue),void 0===e.setParent&&(e.setParent=defaultSetValue),void 0!==e.priority&&(canReflect_1_17_4_canReflect.setPriority(e.child,e.priority),canReflect_1_17_4_canReflect.setPriority(e.parent,e.priority));var s=2*e.cycles,o=s+("childSticksToParent"===e.sticky?1:0),i=s+("parentSticksToChild"===e.sticky?1:0),l=this._bindingState={child:!1,parent:!1};this._updateChild=function(n){updateValue({bindingState:l,newValue:n,debugObservableName:"child",debugPartnerName:"parent",observable:e.child,setValue:e.setChild,semaphore:t,allowedUpdates:o,sticky:"parentSticksToChild"===e.sticky,partner:e.parent,setPartner:e.setParent,partnerSemaphore:a})},this._updateParent=function(n){updateValue({bindingState:l,newValue:n,debugObservableName:"parent",debugPartnerName:"child",observable:e.parent,setValue:e.setParent,semaphore:a,allowedUpdates:i,sticky:"childSticksToParent"===e.sticky,partner:e.child,setPartner:e.setChild,partnerSemaphore:t})}}Object.defineProperty(Bind.prototype,"parentValue",{get:function(){return canReflect_1_17_4_canReflect.getValue(this._options.parent)}}),Object.assign(Bind.prototype,{start:function(){var e=this._options,t,a;this.startParent(),this.startChild(),!0===this._childToParent&&!0===this._parentToChild?(a=canReflect_1_17_4_canReflect.getValue(e.parent),a===void 0?(t=canReflect_1_17_4_canReflect.getValue(e.child),t===void 0?!1===e.onInitDoNotUpdateChild&&this._updateChild(a):!0===e.onInitSetUndefinedParentIfChildIsDefined&&this._updateParent(t)):!1===e.onInitDoNotUpdateChild&&this._updateChild(a)):!0===this._childToParent?(t=canReflect_1_17_4_canReflect.getValue(e.child),this._updateParent(t)):!0===this._parentToChild&&!1===e.onInitDoNotUpdateChild&&(a=canReflect_1_17_4_canReflect.getValue(e.parent),this._updateChild(a))},startChild:function(){if(!1===this._bindingState.child&&!0===this._childToParent){var e=this._options;this._bindingState.child=!0,turnOnListeningAndUpdate(e.child,e.parent,this._updateParent,e.queue)}},startParent:function(){if(!1===this._bindingState.parent&&!0===this._parentToChild){var e=this._options;this._bindingState.parent=!0,turnOnListeningAndUpdate(e.parent,e.child,this._updateChild,e.queue)}},stop:function(){var e=this._bindingState,t=this._options;!0===e.parent&&!0===this._parentToChild&&(e.parent=!1,turnOffListeningAndUpdate(t.parent,t.child,this._updateChild,t.queue)),!0===e.child&&!0===this._childToParent&&(e.child=!1,turnOffListeningAndUpdate(t.child,t.parent,this._updateParent,t.queue))}});function updateValue(e){var t=e.bindingState;if(!1!==t.child||!1!==t.parent){var a=e.semaphore;if(!(a.value+e.partnerSemaphore.value<=e.allowedUpdates));else if(canQueues_1_1_3_canQueues.batch.start(),e.setValue(e.newValue,e.observable),a.increment(),canQueues_1_1_3_canQueues.mutateQueue.enqueue(a.decrement,a,[]),canQueues_1_1_3_canQueues.batch.stop(),e.sticky){var n=canReflect_1_17_4_canReflect.getValue(e.observable);n!==canReflect_1_17_4_canReflect.getValue(e.partner)&&e.setPartner(n,e.partner)}}}var canBind_1_0_0_canBind=canNamespace_1_0_0_canNamespace.Bind=Bind,getKeyValueSymbol$2=canSymbol_1_6_1_canSymbol.for("can.getKeyValue"),observeDataSymbol=canSymbol_1_6_1_canSymbol.for("can.meta"),promiseDataPrototype={isPending:!0,state:"pending",isResolved:!1,isRejected:!1,value:void 0,reason:void 0};function setVirtualProp(e,t,a){var n=e[observeDataSymbol],r=n[t];n[t]=a,canQueues_1_1_3_canQueues.enqueueByQueue(n.handlers.getNode([t]),e,[a,r],function(){return{}},["Promise",e,"resolved with value",a,"and changed virtual property: "+t])}function initPromise(e){var t=e[observeDataSymbol];t||(Object.defineProperty(e,observeDataSymbol,{enumerable:!1,configurable:!1,writable:!1,value:Object.create(promiseDataPrototype)}),t=e[observeDataSymbol],t.handlers=new canKeyTree_1_2_0_canKeyTree([Object,Object,Array])),e.then(function(t){canQueues_1_1_3_canQueues.batch.start(),setVirtualProp(e,"isPending",!1),setVirtualProp(e,"isResolved",!0),setVirtualProp(e,"value",t),setVirtualProp(e,"state","resolved"),canQueues_1_1_3_canQueues.batch.stop()},function(t){canQueues_1_1_3_canQueues.batch.start(),setVirtualProp(e,"isPending",!1),setVirtualProp(e,"isRejected",!0),setVirtualProp(e,"reason",t),setVirtualProp(e,"state","rejected"),canQueues_1_1_3_canQueues.batch.stop()})}function setupPromise(e){var t="getPrototypeOf"in Object?Object.getPrototypeOf(e):e.__proto__,a;e[getKeyValueSymbol$2]&&e[observeDataSymbol]||((null===t||t===Object.prototype)&&(t=e,"function"==typeof t.promise&&(a=t.promise,t.promise=function(){var e=a.call(t);return setupPromise(e),e})),canReflect_1_17_4_canReflect.assignSymbols(t,{"can.getKeyValue":function(e){return this[observeDataSymbol]||initPromise(this),canObservationRecorder_1_2_0_canObservationRecorder.add(this,e),"state"===e||"isPending"===e||"isResolved"===e||"isRejected"===e||"value"===e||"reason"===e?this[observeDataSymbol][e]:this[e]},"can.getValue":function(){return this[getKeyValueSymbol$2]("value")},"can.isValueLike":!1,"can.onKeyValue":function(e,t,a){this[observeDataSymbol]||initPromise(this),this[observeDataSymbol].handlers.add([e,a||"mutate",t])},"can.offKeyValue":function(e,t,a){this[observeDataSymbol]||initPromise(this),this[observeDataSymbol].handlers.delete([e,a||"mutate",t])}}))}var canReflectPromise_2_1_0_canReflectPromise=setupPromise,getValueSymbol$2=canSymbol_1_6_1_canSymbol.for("can.getValue"),setValueSymbol$3=canSymbol_1_6_1_canSymbol.for("can.setValue"),isValueLikeSymbol=canSymbol_1_6_1_canSymbol.for("can.isValueLike"),peek$3=canObservationRecorder_1_2_0_canObservationRecorder.ignore(canReflect_1_17_4_canReflect.getKeyValue.bind(canReflect_1_17_4_canReflect)),bindName=Function.prototype.bind,isAt=function(e,t){var a=t[e-1];return a&&a.at},readValue=function(e,t,a,n,r,s){var o;do{o=!1;for(var l=0,d=observeReader.valueReaders.length;l<d;l++)observeReader.valueReaders[l].test(e,t,a,n)&&(e=observeReader.valueReaders[l].read(e,t,a,n,r,s))}while(o);return e},checkForObservableAndNotify=function(e,t,a,n,r){e.foundObservable&&!t.foundObservable&&canObservationRecorder_1_2_0_canObservationRecorder.trapsCount()&&(canObservationRecorder_1_2_0_canObservationRecorder.addMany(a()),e.foundObservable(n,r),t.foundObservable=!0)},objHasKeyAtIndex=function(e,t,a){return!!(t&&t.length&&canReflect_1_17_4_canReflect.hasKey(e,t[a].key))},observeReader;observeReader={read:function(e,t,a){a=a||{};var n={foundObservable:!1},s;a.foundObservable&&(s=canObservationRecorder_1_2_0_canObservationRecorder.trap());var o=readValue(e,0,t,a,n),l=t.length,d=0,p,c;for(checkForObservableAndNotify(a,n,s,e,0);d<l;){p=o;for(var u=0,y=observeReader.propertyReaders.length,h;u<y;u++)if(h=observeReader.propertyReaders[u],h.test(o)){o=h.read(o,t[d],d,a,n);break}if(checkForObservableAndNotify(a,n,s,p,d),++d,o=readValue(o,d,t,a,n,p),checkForObservableAndNotify(a,n,s,p,d-1),d<t.length&&(null===o||void 0===o))return c=objHasKeyAtIndex(p,t,d-1),a.earlyExit&&!c&&a.earlyExit(p,d-1,o),{value:void 0,parent:p,parentHasKey:c,foundLastParent:!1}}return c=objHasKeyAtIndex(p,t,t.length-1),void 0===o&&!c&&a.earlyExit&&a.earlyExit(p,d-1),{value:o,parent:p,parentHasKey:c,foundLastParent:!0}},get:function(e,t,a){return observeReader.read(e,observeReader.reads(t),a||{}).value},valueReadersMap:{},valueReaders:[{name:"function",test:function(e){return e&&canReflect_1_17_4_canReflect.isFunctionLike(e)&&!canReflect_1_17_4_canReflect.isConstructorLike(e)},read:function(e,t,a,n,r,s){return n.callMethodsOnObservables&&canReflect_1_17_4_canReflect.isObservableLike(s)&&canReflect_1_17_4_canReflect.isMapLike(s)?(dev.warn("can-stache-key: read() called with `callMethodsOnObservables: true`."),e.apply(s,n.args||[])):!1===n.proxyMethods?e:bindName.call(e,s)}},{name:"isValueLike",test:function(e,t,a,n){return e&&e[getValueSymbol$2]&&!1!==e[isValueLikeSymbol]&&(n.foundAt||!isAt(t,a))},read:function(e,t,a,n){return!1===n.readCompute&&t===a.length?e:canReflect_1_17_4_canReflect.getValue(e)},write:function(e,t){e[setValueSymbol$3]?e[setValueSymbol$3](t):e.set?e.set(t):e(t)}}],propertyReadersMap:{},propertyReaders:[{name:"map",test:function(e){return(canReflect_1_17_4_canReflect.isPromise(e)||"object"==typeof e&&e&&"function"==typeof e.then)&&canReflectPromise_2_1_0_canReflectPromise(e),canReflect_1_17_4_canReflect.isObservableLike(e)&&canReflect_1_17_4_canReflect.isMapLike(e)},read:function(e,t){var a=canReflect_1_17_4_canReflect.getKeyValue(e,t.key);return void 0===a?e[t.key]:a},write:canReflect_1_17_4_canReflect.setKeyValue},{name:"object",test:function(){return!0},read:function(e,t){if(null!=e)return"object"==typeof e?t.key in e?e[t.key]:void 0:e[t.key]},write:function(e,t,a){var n=e[t];null!=a&&"object"==typeof a&&canReflect_1_17_4_canReflect.isMapLike(n)?(dev.warn("can-stache-key: Merging data into \""+t+"\" because its parent is non-observable"),canReflect_1_17_4_canReflect.update(n,a)):null!=n&&n[setValueSymbol$3]!==void 0?canReflect_1_17_4_canReflect.setValue(n,a):e[t]=a}}],reads:function(e){var t=""+e,a=[],n=0,r=!1;"@"===t.charAt(0)&&(n=1,r=!0);for(var s="",o=n,l;o<t.length;o++)l=t.charAt(o),"."===l||"@"===l?"\\"===t.charAt(o-1)?s=s.substr(0,s.length-1)+".":(a.push({key:s,at:r}),r="@"===l,s=""):s+=l;return a.push({key:s,at:r}),a},write:function(e,t,a,n){var r="string"==typeof t?observeReader.reads(t):t,s;if(n=n||{},1<r.length?(s=r.pop(),e=observeReader.read(e,r,n).value,r.push(s)):s=r[0],!!e){var o=peek$3(e,s.key);observeReader.valueReadersMap.isValueLike.test(o,r.length-1,r,n)?observeReader.valueReadersMap.isValueLike.write(o,a,n):(observeReader.valueReadersMap.isValueLike.test(e,r.length-1,r,n)&&(e=e[getValueSymbol$2]()),observeReader.propertyReadersMap.map.test(e)?observeReader.propertyReadersMap.map.write(e,s.key,a,n):observeReader.propertyReadersMap.object.test(e)&&(observeReader.propertyReadersMap.object.write(e,s.key,a,n),n.observation&&n.observation.update()))}}},observeReader.propertyReaders.forEach(function(e){observeReader.propertyReadersMap[e.name]=e}),observeReader.valueReaders.forEach(function(e){observeReader.valueReadersMap[e.name]=e}),observeReader.set=observeReader.write;var canStacheKey_1_4_0_canStacheKey=observeReader,strUndHash=/_|-/,strColons=/\=\=/,strWords=/([A-Z]+)([A-Z][a-z])/g,strLowUp=/([a-z\d])([A-Z])/g,strDash=/([a-z\d])([A-Z])/g,strQuote=/"/g,strSingleQuote=/'/g,strHyphenMatch=/-+(.)?/g,strCamelMatch=/[a-z][A-Z]/g,convertBadValues=function(e){var t=null===e||e===void 0||isNaN(e)&&"NaN"==""+e;return""+(t?"":e)},string={esc:function(e){return convertBadValues(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(strQuote,"&#34;").replace(strSingleQuote,"&#39;")},capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},camelize:function(e){return convertBadValues(e).replace(strHyphenMatch,function(e,t){return t?t.toUpperCase():""})},hyphenate:function(e){return convertBadValues(e).replace(strCamelMatch,function(e){return e.charAt(0)+"-"+e.charAt(1).toLowerCase()})},underscore:function(e){return e.replace(strColons,"/").replace(strWords,"$1_$2").replace(strLowUp,"$1_$2").replace(strDash,"_").toLowerCase()},undHash:strUndHash},canString_1_0_0_canString=string;canGlobals_1_2_0_canGlobalsInstance.define("location",function(){return canGlobals_1_2_0_canGlobalsInstance.getKeyValue("global").location});var location=canGlobals_1_2_0_canGlobalsInstance.makeExport("location");canGlobals_1_2_0_canGlobalsInstance.define("MutationObserver",function(){var e=canGlobals_1_2_0_canGlobalsInstance.getKeyValue("global");return e.MutationObserver||e.WebKitMutationObserver||e.MozMutationObserver});var mutationObserver=canGlobals_1_2_0_canGlobalsInstance.makeExport("MutationObserver");canGlobals_1_2_0_canGlobalsInstance.define("customElements",function(){var e=canGlobals_1_2_0_canGlobalsInstance.getKeyValue("global");return e.customElements});var customElements=canGlobals_1_2_0_canGlobalsInstance.makeExport("customElements"),canGlobals_1_2_0_canGlobals=canGlobals_1_2_0_canGlobalsInstance,push=Array.prototype.push;function eliminate(e,t){var a=e.indexOf(t);0<=a&&e.splice(a,1)}function isInDocument(e){var t=document$1();return!(t!==e)||t.contains(e)}function isDocumentElement(e){return document$1().documentElement===e}function isFragment(e){return!!(e&&11===e.nodeType)}function getChildren(e){for(var t=[],a=e.firstChild;a;)t.push(a),a=a.nextSibling;return t}function getParents(e){var t;return t=isFragment(e)?getChildren(e):[e],t}function getAllNodes(e){for(var t=getParents(e),a=t.length,n=0,r;n<a;n++)if(r=t[n],r.getElementsByTagName){var s=r.getElementsByTagName("*");push.apply(t,s)}return t}function subscription(e){return function(){var t=e.apply(this,arguments),a=!1;return function(){if(a){var n=e.name||e.displayName||"an anonymous function";throw new Error("Disposal function returned by "+n+" called more than once.")}t.apply(this,arguments),a=!0}}}var canDomMutate_1_2_1_Util={eliminate:eliminate,isInDocument:isInDocument,getDocument:document$1,isDocumentElement:isDocumentElement,isFragment:isFragment,getParents:getParents,getAllNodes:getAllNodes,getChildren:getChildren,subscription:subscription},setImmediate=global_1().setImmediate||function(e){return setTimeout(e,0)},getDocument=canDomMutate_1_2_1_Util.getDocument,eliminate$1=canDomMutate_1_2_1_Util.eliminate,subscription$1=canDomMutate_1_2_1_Util.subscription,isDocumentElement$1=canDomMutate_1_2_1_Util.isDocumentElement,getAllNodes$1=canDomMutate_1_2_1_Util.getAllNodes,push$1=Array.prototype.push,slice$2=Array.prototype.slice,dataStore=new WeakMap,domMutate;function getRelatedData(e,t){var a=dataStore.get(e);if(a)return a[t]}function setRelatedData(e,t,a){var n=dataStore.get(e)||dataStore.set(e,{}).get(e);n[t]=a}function deleteRelatedData(e,t){var a=dataStore.get(e);return delete a[t]}function batch(e,t){var a=[],n=[],r=new Set,s=!1;return function(o,l){if(t)for(var d=0;d<o.length;d++){var p=o[d],c=p.target;r.has(c)||(a.push(p),r.add(c))}else push$1.apply(a,o);l&&n.push(l);var u=!s&&0<a.length;u&&(s=!0,setImmediate(function(){var o=a;a=[];var i=n;n=[],t&&(r=new Set),s=!1,e(o);for(var l=i.length,d=0;d<l;d++)i[d]()}))}}function getDocumentListeners(e,t){var a=getDocument(),n=getRelatedData(a,t);if(n)return n.listeners}function getTargetListeners(e,t){var a=getDocument(),n=getRelatedData(a,t);return n?n.get(e):void 0}function addTargetListener(e,t,a){var n=getDocument(),r=getRelatedData(n,t);r||(r=new Map,setRelatedData(n,t,r));var s=r.get(e);s||(s=[],r.set(e,s)),s.push(a)}function removeTargetListener(e,t,a){var n=getDocument(),r=getRelatedData(n,t);if(r){var s=r.get(e);s&&(eliminate$1(s,a),0===s.length&&(r["delete"](e),0===r.size&&deleteRelatedData(n,t)))}}function fire(e,t){for(var a=slice$2.call(e,0),n=a.length,r=0;r<n;r++)a[r](t)}function dispatch$1(t,a){return function(n){for(var r=0;r<n.length;r++){var s=n[r],o=s.target,i=getTargetListeners(o,t);if(i&&fire(i,s),!!a){var l=getDocumentListeners(o,a);l&&fire(l,s)}}}}function observeMutations(e,t,a,n){var r=getRelatedData(e,t);r||(r={observingCount:0},setRelatedData(e,t,r));var s=function(){var t=mutationObserver();if(t){var s=global_1().Node;if(!!(s&&e instanceof s)){var o=new t(n);o.observe(e,a),r.observer=o}}else r.observer&&(r.observer.disconnect(),r.observer=null)};return 0===r.observingCount&&(canGlobals_1_2_0_canGlobals.onKeyValue("MutationObserver",s),s()),r.observingCount++,function(){var a=getRelatedData(e,t);a&&(a.observingCount--,0>=a.observingCount&&(a.observer&&a.observer.disconnect(),deleteRelatedData(e,t),canGlobals_1_2_0_canGlobals.offKeyValue("MutationObserver",s)))}}function handleTreeMutations(e){for(var t=e.length,n=0;n<t;n++){for(var s=e[n],o=s.addedNodes,i=o.length,l=0;l<i;l++)domMutate.dispatchNodeInsertion(o[l]);for(var d=s.removedNodes,p=d.length,c=0;c<p;c++)domMutate.dispatchNodeRemoval(d[c])}}function handleAttributeMutations(e){for(var t=e.length,a=0,n;a<t;a++)if(n=e[a],"attributes"===n.type){var r=n.target,s=n.attributeName,o=n.oldValue;domMutate.dispatchNodeAttributeChange(r,s,o)}}var treeMutationConfig={subtree:!0,childList:!0},attributeMutationConfig={attributes:!0,attributeOldValue:!0};function addNodeListener(e,t,a){return subscription$1(function(n,r){if(11===n.nodeType)return Function.prototype;var s;return s=a?observeMutations(n,t,attributeMutationConfig,handleAttributeMutations):observeMutations(getDocument(),t,treeMutationConfig,handleTreeMutations),addTargetListener(n,e,r),function(){s(),removeTargetListener(n,e,r)}})}function addGlobalListener(e,t){return subscription$1(function(a,n){if(!isDocumentElement$1(a))throw new Error("Global mutation listeners must pass a documentElement");var r=getDocument(),s=getRelatedData(r,e);s||(s={listeners:[]},setRelatedData(r,e,s));var o=s.listeners;return 0===o.length&&(s.removeListener=t(r,function(){})),o.push(n),function(){var t=getRelatedData(r,e);if(t){var a=t.listeners;eliminate$1(a,n),0===a.length&&(t.removeListener(),deleteRelatedData(r,e))}}})}function toMutationEvents(e){for(var t=[],a=0;a<e.length;a++)t.push({target:e[a]});return t}var domMutationPrefix="domMutation",insertionDataKey="domMutationInsertionData",removalDataKey="domMutationRemovalData",attributeChangeDataKey="domMutationAttributeChangeData",documentInsertionDataKey="domMutationDocumentInsertionData",documentRemovalDataKey="domMutationDocumentRemovalData",documentAttributeChangeDataKey="domMutationDocumentAttributeChangeData",treeDataKey="domMutationTreeData",attributeDataKey="domMutationAttributeData",dispatchInsertion=batch(dispatch$1(insertionDataKey,documentInsertionDataKey),!0),dispatchRemoval=batch(dispatch$1(removalDataKey,documentRemovalDataKey),!0),dispatchAttributeChange=batch(dispatch$1(attributeChangeDataKey,documentAttributeChangeDataKey)),addNodeInsertionListener=addNodeListener(insertionDataKey,treeDataKey),addNodeRemovalListener=addNodeListener(removalDataKey,treeDataKey),addNodeAttributeChangeListener=addNodeListener(attributeChangeDataKey,attributeDataKey,!0),addInsertionListener=addGlobalListener(documentInsertionDataKey,addNodeInsertionListener),addRemovalListener=addGlobalListener(documentRemovalDataKey,addNodeRemovalListener),addAttributeChangeListener=addGlobalListener(documentAttributeChangeDataKey,addNodeAttributeChangeListener);domMutate={dispatchNodeInsertion:function(e,t){var a=toMutationEvents(getAllNodes$1(e));dispatchInsertion(a,t)},dispatchNodeRemoval:function(e,t){var a=toMutationEvents(getAllNodes$1(e));dispatchRemoval(a,t)},dispatchNodeAttributeChange:function(e,t,a,n){dispatchAttributeChange([{target:e,attributeName:t,oldValue:a}],n)},onNodeInsertion:addNodeInsertionListener,onNodeRemoval:addNodeRemovalListener,onNodeAttributeChange:addNodeAttributeChangeListener,onRemoval:addRemovalListener,onInsertion:addInsertionListener,onAttributeChange:addAttributeChangeListener};var canDomMutate_1_2_1_canDomMutate=canNamespace_1_0_0_canNamespace.domMutate=domMutate,controlData=new WeakMap,bind=function(e,t,a,n){return map$1.on.call(e,t,a,n),function(){map$1.off.call(e,t,a,n)}},slice$3=[].slice,paramReplacer=/\{([^\}]+)\}/g,delegate=function(e,t,a,n){return map$1.on.call(e,a,t,n),function(){map$1.off.call(e,a,t,n)}},binder=function(e,t,a,n){return n?delegate(e,n.trim(),t,a):bind(e,t,a)},Control=canConstruct_3_5_1_canConstruct.extend("Control",{setup:function(){if(canConstruct_3_5_1_canConstruct.setup.apply(this,arguments),Control){var e=this,t;for(t in e.actions={},e.prototype)e._isAction(t)&&(e.actions[t]=e._action(t))}},_shifter:function(e,t){function a(){var a=r.wrapElement(this);return e.called=t,n.apply(e,[a].concat(slice$3.call(arguments,0)))}var n="string"==typeof t?e[t]:t;"function"!=typeof n&&(n=e[n]);var r=this;return a},_isAction:function(e){var t=this.prototype[e],a=typeof t;return"constructor"!==e&&("function"==a||"string"==a&&"function"==typeof this.prototype[t])&&!!(Control.isSpecial(e)||processors[e]||/[^\w]/.test(e))},_action:function(e,t,a){var n;if(paramReplacer.lastIndex=0,t||!paramReplacer.test(e)){var r=function(){var a=e.replace(paramReplacer,function(e,a){var r,s;return this._isDelegate(t,a)?(n=this._getDelegate(t,a),""):(a=this._removeDelegateFromKey(a),s=this._lookup(t)[0],r=canStacheKey_1_4_0_canStacheKey.read(s,canStacheKey_1_4_0_canStacheKey.reads(a),{readCompute:!1}).value,void 0===r&&"undefined"!=typeof window&&(r=get_1(window,a)),s&&(canReflect_1_17_4_canReflect.isObservableLike(s)&&canReflect_1_17_4_canReflect.isMapLike(s)||r)?"string"==typeof r?r:(n=r,""):null)}.bind(this)),n;a=a.trim();var r=a.split(/\s+/g),s=r.pop();return{processor:this.processors[s]||basicProcessor,parts:[a,r.join(" "),s],delegate:n||void 0}};if(n=new canObservation_4_1_0_canObservation(r,this),a){var s=function(t){a._bindings.control[e](a.element),a._bindings.control[e]=t.processor(t.delegate||a.element,t.parts[2],t.parts[1],e,a)};canReflect_1_17_4_canReflect.onValue(n,s,"mutate"),a._bindings.readyComputes[e]={compute:n,handler:s}}return n.get()}},_lookup:function(e){return[e,window]},_removeDelegateFromKey:function(e){return e},_isDelegate:function(e,t){return"element"===t},_getDelegate:function(){},processors:{},defaults:{},convertElement:function(e){return e="string"==typeof e?document.querySelector(e):e,this.wrapElement(e)},wrapElement:function(e){return e},unwrapElement:function(e){return e},isSpecial:function(e){return"inserted"===e||"removed"===e}},{setup:function(e,t){var a=this.constructor,n=a.pluginName||a.shortName,r;if(!e)throw new Error("Creating an instance of a named control without passing an element");if(this.element=a.convertElement(e),n&&"Control"!==n&&this.element.classList&&this.element.classList.add(n),r=controlData.get(this.element),r||(r=[],controlData.set(this.element,r)),r.push(this),canReflect_1_17_4_canReflect.isObservableLike(t)&&canReflect_1_17_4_canReflect.isMapLike(t)){for(var s in a.defaults)t.hasOwnProperty(s)||canStacheKey_1_4_0_canStacheKey.set(t,s,a.defaults[s]);this.options=t}else this.options=canAssign_1_3_1_canAssign(canAssign_1_3_1_canAssign({},a.defaults),t);return this.on(),[this.element,this.options]},on:function(e,t,a,n){if(!e){this.off();var r=this.constructor,s=this._bindings,o=r.actions,i=this.constructor.unwrapElement(this.element),l=Control._shifter(this,"destroy"),d,p;for(d in o)o.hasOwnProperty(d)&&(p=o[d]||r._action(d,this.options,this),p&&(s.control[d]=p.processor(p.delegate||i,p.parts[2],p.parts[1],d,this)));var c=canDomMutate_1_2_1_canDomMutate.onNodeRemoval(i,function(){i.ownerDocument.contains(i)||l()});return s.user.push(function(){c&&(c(),c=void 0)}),s.user.length}return"string"==typeof e&&(n=a,a=t,t=e,e=this.element),void 0===n&&(n=a,a=t,t=null),"string"==typeof n&&(n=Control._shifter(this,n)),this._bindings.user.push(binder(e,a,n,t)),this._bindings.user.length},off:function(){var e=this.constructor.unwrapElement(this.element),t=this._bindings;t&&((t.user||[]).forEach(function(t){t(e)}),canReflect_1_17_4_canReflect.eachKey(t.control||{},function(t){t(e)}),canReflect_1_17_4_canReflect.eachKey(t.readyComputes||{},function(e){canReflect_1_17_4_canReflect.offValue(e.compute,e.handler,"mutate")})),this._bindings={user:[],control:{},readyComputes:{}}},destroy:function(){if(null!==this.element){var e=this.constructor,t=e.pluginName||e.shortName&&canString_1_0_0_canString.underscore(e.shortName),a;this.off(),t&&"can_control"!==t&&this.element.classList&&this.element.classList.remove(t),a=controlData.get(this.element),a&&a.splice(a.indexOf(this),1),this.element=null}}}),processors,basicProcessor;processors=Control.processors,basicProcessor=function(e,t,a,n,r){return binder(e,t,Control._shifter(r,n),a)},["beforeremove","change","click","contextmenu","dblclick","keydown","keyup","keypress","mousedown","mousemove","mouseout","mouseover","mouseup","reset","resize","scroll","select","submit","focusin","focusout","mouseenter","mouseleave","touchstart","touchmove","touchcancel","touchend","touchleave","inserted","removed","dragstart","dragenter","dragover","dragleave","drag","drop","dragend"].forEach(function(e){processors[e]=basicProcessor});var canControl_4_2_0_canControl=canNamespace_1_0_0_canNamespace.Control=Control,paramReplacer$1=/\{([^\}]+)\}/g,ComponentControl=canControl_4_2_0_canControl.extend({_lookup:function(e){return[e.scope,e,window]},_removeDelegateFromKey:function(e){return e.replace(/^(scope|^viewModel)\./,"")},_isDelegate:function(e,t){return"scope"===t||"viewModel"===t},_getDelegate:function(e,t){return e[t]},_action:function(e,t,a){var n;return paramReplacer$1.lastIndex=0,n=paramReplacer$1.test(e),!a&&n?void 0:canControl_4_2_0_canControl._action.apply(this,arguments)}},{setup:function(e,t){return this.scope=t.scope,this.viewModel=t.viewModel,canControl_4_2_0_canControl.prototype.setup.call(this,e,t)},off:function(){this._bindings&&canReflect_1_17_4_canReflect.eachKey(this._bindings.readyComputes||{},function(e){canReflect_1_17_4_canReflect.offValue(e.compute,e.handler)}),canControl_4_2_0_canControl.prototype.off.apply(this,arguments),this._bindings.readyComputes={}},destroy:function(){canControl_4_2_0_canControl.prototype.destroy.apply(this,arguments),"function"==typeof this.options.destroy&&this.options.destroy.apply(this,arguments)}}),control=ComponentControl,canAttributeEncoder_1_1_0_canAttributeEncoder=createCommonjsModule(function(e){function t(e,t){for(var a=0;a<e.length;a++)t(e[a],a)}function a(e,t,a){return t+"-"+a.toLowerCase()}function n(e,t){return 0===e.indexOf(t)}function r(e,t){return e.length-e.indexOf(t)===t.length}var s=function(e){var a={},n=e.split(",");return t(n,function(e){a[e]=!0}),a}("allowReorder,attributeName,attributeType,autoReverse,baseFrequency,baseProfile,calcMode,clipPathUnits,contentScriptType,contentStyleType,diffuseConstant,edgeMode,externalResourcesRequired,filterRes,filterUnits,glyphRef,gradientTransform,gradientUnits,kernelMatrix,kernelUnitLength,keyPoints,keySplines,keyTimes,lengthAdjust,limitingConeAngle,markerHeight,markerUnits,markerWidth,maskContentUnits,maskUnits,patternContentUnits,patternTransform,patternUnits,pointsAtX,pointsAtY,pointsAtZ,preserveAlpha,preserveAspectRatio,primitiveUnits,repeatCount,repeatDur,requiredExtensions,requiredFeatures,specularConstant,specularExponent,spreadMethod,startOffset,stdDeviation,stitchTiles,surfaceScale,systemLanguage,tableValues,textLength,viewBox,viewTarget,xChannelSelector,yChannelSelector"),o={leftParens:/\(/g,rightParens:/\)/g,leftBrace:/\{/g,rightBrace:/\}/g,camelCase:/([a-z]|^)([A-Z])/g,forwardSlash:/\//g,space:/\s/g,uppercase:/[A-Z]/g,uppercaseDelimiterThenChar:/:u:([a-z])/g,caret:/\^/g,dollar:/\$/g,at:/@/g},i={prependUppercase:":u:",replaceSpace:":s:",replaceForwardSlash:":f:",replaceLeftParens:":lp:",replaceRightParens:":rp:",replaceLeftBrace:":lb:",replaceRightBrace:":rb:",replaceCaret:":c:",replaceDollar:":d:",replaceAt:":at:"},l={};if(l.encode=function(e){var t=e;return!s[t]&&t.match(o.camelCase)&&(n(t,"on:")||r(t,":to")||r(t,":from")||r(t,":bind")||r(t,":raw")?t=t.replace(o.uppercase,function(e){return i.prependUppercase+e.toLowerCase()}):(n(t,"(")||n(t,"{"))&&(t=t.replace(o.camelCase,a))),t=t.replace(o.space,i.replaceSpace).replace(o.forwardSlash,i.replaceForwardSlash).replace(o.leftParens,i.replaceLeftParens).replace(o.rightParens,i.replaceRightParens).replace(o.leftBrace,i.replaceLeftBrace).replace(o.rightBrace,i.replaceRightBrace).replace(o.caret,i.replaceCaret).replace(o.dollar,i.replaceDollar).replace(o.at,i.replaceAt),t},l.decode=function(e){var t=e;return!s[t]&&t.match(o.uppercaseDelimiterThenChar)&&(n(t,"on:")||r(t,":to")||r(t,":from")||r(t,":bind")||r(t,":raw"))&&(t=t.replace(o.uppercaseDelimiterThenChar,function(e,t){return t.toUpperCase()})),t=t.replace(i.replaceLeftParens,"(").replace(i.replaceRightParens,")").replace(i.replaceLeftBrace,"{").replace(i.replaceRightBrace,"}").replace(i.replaceForwardSlash,"/").replace(i.replaceSpace," ").replace(i.replaceCaret,"^").replace(i.replaceDollar,"$").replace(i.replaceAt,"@"),t},canNamespace_1_0_0_canNamespace.encoder)throw new Error("You can't have two versions of can-attribute-encoder, check your dependencies");else e.exports=canNamespace_1_0_0_canNamespace.encoder=l});function each(e,t){for(var a=0;a<e.length;a++)t(e[a],a)}function makeMap$1(e){var t={},a=e.split(",");return each(a,function(e){t[e]=!0}),t}function handleIntermediate(e,t){for(var a=0,n=e.length,r;a<n;a++)r=e[a],t[r.tokenType].apply(t,r.args);return e}var alphaNumeric="A-Za-z0-9",alphaNumericHU="-:_A-Za-z0-9",magicStart="{{",endTag=/^<\/([-:_A-Za-z0-9]+)[^>]*>/,magicMatch=/\{\{(![\s\S]*?!|[\s\S]*?)\}\}\}?/g,space=/\s/,alphaRegex=/[A-Za-z0-9]/,attributeRegexp=/[-:_A-Za-z0-9]+s*=s*("[^"]*"|'[^']*')/,empty=makeMap$1("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed"),caseMattersElements=makeMap$1("altGlyph,altGlyphDef,altGlyphItem,animateColor,animateMotion,animateTransform,clipPath,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,foreignObject,glyphRef,linearGradient,radialGradient,textPath"),closeSelf=makeMap$1("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),special=makeMap$1("script"),tokenTypes=["start","end","close","attrStart","attrEnd","attrValue","chars","comment","special","done"],startOppositesMap={"{":"}","(":")"},fn=function(){},HTMLParser=function(e,t,a){function n(e,a,n,s){a=caseMattersElements[a]?a:a.toLowerCase(),closeSelf[a]&&l.last()===a&&r("",a),s=empty[a]||!!s,t.start(a,s,h),s||l.push(a),HTMLParser.parseAttrs(n,t,h),t.end(a,s,h)}function r(e,a){var n;if(!a)n=0;else for(a=caseMattersElements[a]?a:a.toLowerCase(),n=l.length-1;0<=n&&l[n]!==a;n--);if(0<=n){for(var r=l.length-1;r>=n;r--)t.close&&t.close(l[r],h);l.length=n}}function s(e,a){t.special&&t.special(a,h)}if("object"==typeof e)return handleIntermediate(e,t);var o=[];t=t||{},a&&each(tokenTypes,function(e){var a=t[e]||fn;t[e]=function(){if(!1!==a.apply(this,arguments)){var t=arguments.length;void 0===arguments[t-1]&&(t=arguments.length-1),o.push({tokenType:e,args:[].slice.call(arguments,0,t)})}}});var i=function(){p&&t.chars&&t.chars(p,h),p=""},l=[],d=e,p="",c,u,y,h;for(l.last=function(){return this[this.length-1]};e;){if(u=!0,!l.last()||!special[l.last()]){if(0===e.indexOf("<!--"))c=e.indexOf("-->"),0<=c&&(i(),t.comment&&t.comment(e.substring(4,c),h),e=e.substring(c+3),u=!1);else if(0===e.indexOf("</"))y=e.match(endTag),y&&(i(),y[0].replace(endTag,r),e=e.substring(y[0].length),u=!1);else if(0===e.indexOf("<")){var g=HTMLParser.searchStartTag(e);g&&(i(),n.apply(null,g.match),e=g.html,u=!1)}else 0===e.indexOf(magicStart)&&(y=e.match(magicMatch),y&&(i(),y[0].replace(magicMatch,s),e=e.substring(y[0].length)));if(u){c=findBreak(e,magicStart),0===c&&e===d&&(p+=e.charAt(0),e=e.substr(1),c=findBreak(e,magicStart));var m=0>c?e:e.substring(0,c);e=0>c?"":e.substring(c),m&&(p+=m)}}else e=e.replace(new RegExp("([\\s\\S]*?)</"+l.last()+"[^>]*>"),function(e,a){return a=a.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2"),t.chars&&t.chars(a,h),""}),r("",l.last());if(e===d)throw new Error("Parse Error: "+e);d=e}return i(),r(),t.done(h),o},callAttrStart=function(e,t,a,n,r){var s=n.substring("number"==typeof e.nameStart?e.nameStart:t,t),o=canAttributeEncoder_1_1_0_canAttributeEncoder.encode(s);e.attrStart=o,a.attrStart(e.attrStart,r),e.inName=!1},callAttrEnd=function(e,t,a,n,r){if(e.valueStart!==void 0&&e.valueStart<t){var s=n.substring(e.valueStart,t);a.attrValue(s,r)}a.attrEnd(e.attrStart,r),e.attrStart=void 0,e.valueStart=void 0,e.inValue=!1,e.inName=!1,e.lookingForEq=!1,e.inQuote=!1,e.lookingForName=!0},findBreak=function(e,t){for(var a=t.length,n=0,r=e.length;n<r;n++)if("<"===e[n]||e.substr(n,a)===t)return n;return-1};HTMLParser.parseAttrs=function(e,t,a){if(e){for(var n=0,r={inName:!1,nameStart:void 0,inValue:!1,valueStart:void 0,inQuote:!1,attrStart:void 0,lookingForName:!0,lookingForValue:!1,lookingForEq:!1},s;n<e.length;){s=n;var o=e.charAt(n);if(n++,magicStart===e.substr(s,magicStart.length)){r.inValue&&s>r.valueStart?t.attrValue(e.substring(r.valueStart,s),a):r.inName&&r.nameStart<s?(callAttrStart(r,s,t,e,a),callAttrEnd(r,s,t,e,a)):r.lookingForValue?r.inValue=!0:r.lookingForEq&&r.attrStart&&callAttrEnd(r,s,t,e,a),magicMatch.lastIndex=s;var l=magicMatch.exec(e);l&&(t.special(l[1],a),n=s+l[0].length,r.inValue&&(r.valueStart=s+l[0].length))}else if(r.inValue)r.inQuote?o===r.inQuote&&callAttrEnd(r,s,t,e,a):space.test(o)&&callAttrEnd(r,s,t,e,a);else if("="===o&&(r.lookingForEq||r.lookingForName||r.inName))r.attrStart||callAttrStart(r,s,t,e,a),r.lookingForValue=!0,r.lookingForEq=!1,r.lookingForName=!1;else if(r.inName){var d=e[r.nameStart],p,c;startOppositesMap[d]===o?(p="{"===d?"(":"{",c=startOppositesMap[p],e[s+1]===c?(callAttrStart(r,s+2,t,e,a),n++):callAttrStart(r,s+1,t,e,a),r.lookingForEq=!0):space.test(o)&&"{"!==d&&"("!==d&&(callAttrStart(r,s,t,e,a),r.lookingForEq=!0)}else r.lookingForName?space.test(o)||(r.attrStart&&callAttrEnd(r,s,t,e,a),r.nameStart=s,r.inName=!0):r.lookingForValue&&(space.test(o)?n===e.length&&callAttrEnd(r,s,t,e,a):(r.lookingForValue=!1,r.inValue=!0,"'"===o||"\""===o?(r.inQuote=o,r.valueStart=s+1):r.valueStart=s))}r.inName?(callAttrStart(r,s+1,t,e,a),callAttrEnd(r,s+1,t,e,a)):(r.lookingForEq||r.lookingForValue||r.inValue)&&callAttrEnd(r,s+1,t,e,a),magicMatch.lastIndex=0}},HTMLParser.searchStartTag=function(e){for(var t=e.indexOf(">"),a=attributeRegexp.exec(e.substring(1)),n=1;a&&t>=n+a.index;){for(n+=a.index+a[0].length;t<n;)t+=e.substring(t+1).indexOf(">")+1;a=attributeRegexp.exec(e.substring(n))}if(-1===t||!alphaRegex.test(e[1]))return null;var r="",s="",o=e.substring(0,t+1),i="/"===o[o.length-2],l=o.search(space),d,p,c;return i?(s="/",p=o.substring(1,o.length-2).trim()):p=o.substring(1,o.length-1).trim(),-1===l?d=p:(l--,d=p.substring(0,l),r=p.substring(l)),c=[o,d,r,s],{match:c,html:e.substring(o.length)}};var canViewParser_4_1_0_canViewParser=canNamespace_1_0_0_canNamespace.HTMLParser=HTMLParser,isInDocument$1=canDomMutate_1_2_1_Util.isInDocument,getParents$1=canDomMutate_1_2_1_Util.getParents,synthetic={dispatchNodeInsertion:function(e,t){isInDocument$1(t)&&canDomMutate_1_2_1_canDomMutate.dispatchNodeInsertion(t)},dispatchNodeRemoval:function(e,t){isInDocument$1(e)&&!isInDocument$1(t)&&canDomMutate_1_2_1_canDomMutate.dispatchNodeRemoval(t)}},compat={replaceChild:function(e,t){var a=getParents$1(e),n=this.replaceChild(e,t);synthetic.dispatchNodeRemoval(this,t);for(var r=0;r<a.length;r++)synthetic.dispatchNodeInsertion(this,a[r]);return n},setAttribute:function(e,t){var a=this.getAttribute(e),n=this.setAttribute(e,t),r=this.getAttribute(e);return a!==r&&canDomMutate_1_2_1_canDomMutate.dispatchNodeAttributeChange(this,e,a),n},removeAttribute:function(e){var t=this.getAttribute(e),a=this.removeAttribute(e);return t&&canDomMutate_1_2_1_canDomMutate.dispatchNodeAttributeChange(this,e,t),a}},compatData=[["appendChild","Insertion"],["insertBefore","Insertion"],["removeChild","Removal"]];compatData.forEach(function(e){var t=e[0],a="dispatchNode"+e[1];compat[t]=function(e){for(var n=getParents$1(e),r=this[t].apply(this,arguments),s=0;s<n.length;s++)synthetic[a](this,n[s]);return r}});var normal={},nodeMethods=["appendChild","insertBefore","removeChild","replaceChild","setAttribute","removeAttribute"];nodeMethods.forEach(function(e){normal[e]=function(){return this[e].apply(this,arguments)}});var mutate={};function setMutateStrategy(e){var t=e?normal:compat;for(var a in t)mutate[a]=t[a]}var mutationObserverKey="MutationObserver";setMutateStrategy(canGlobals_1_2_0_canGlobals.getKeyValue("MutationObserver")),canGlobals_1_2_0_canGlobals.onKeyValue("MutationObserver",setMutateStrategy);var canDomMutate_1_2_1_node=canNamespace_1_0_0_canNamespace.domMutateNode=mutate,nodeMap=new Map,splice$1=[].splice,push$2=[].push,itemsInChildListTree=function(e){for(var t=0,a=0,n=e.length,r;a<n;a++)r=e[a],r.nodeType?t++:t+=itemsInChildListTree(r);return t},replacementMap=function(e){for(var t=new Map,a=0,n=e.length,r;a<n;a++)r=nodeLists.first(e[a]),t.set(r,e[a]);return t},addUnfoundAsDeepChildren=function(e,t){t.forEach(function(t){e.newDeepChildren.push(t)})},nodeLists={update:function(e,t,a){a||(a=nodeLists.unregisterChildren(e));for(var n=[],r=0,s=n.length=t.length;r<s;r++)n[r]=t[r];t=n;var o=e.length;return splice$1.apply(e,[0,o].concat(t)),e.replacements?(nodeLists.nestReplacements(e),e.deepChildren=e.newDeepChildren,e.newDeepChildren=[]):nodeLists.nestList(e),a},nestReplacements:function(e){for(var t=0,a=replacementMap(e.replacements),n=e.replacements.length;t<e.length&&n;){var r=e[t],s=a.get(r);s&&(a["delete"](r),e.splice(t,itemsInChildListTree(s),s),n--),t++}n&&addUnfoundAsDeepChildren(e,a),e.replacements=[]},nestList:function(e){for(var t=0;t<e.length;){var a=e[t],n=nodeMap.get(a);n?n!==e&&e.splice(t,itemsInChildListTree(n),n):nodeMap.set(a,e),t++}},last:function(e){var t=e[e.length-1];return t.nodeType?t:nodeLists.last(t)},first:function(e){var t=e[0];return t.nodeType?t:nodeLists.first(t)},flatten:function(e){for(var t=[],a=0,n;a<e.length;a++)n=e[a],n.nodeType?t.push(n):t.push.apply(t,nodeLists.flatten(n));return t},register:function(e,t,a,n){return e.unregistered=t,e.parentList=a,e.nesting=a&&"undefined"!=typeof a.nesting?a.nesting+1:0,a?(e.deepChildren=[],e.newDeepChildren=[],e.replacements=[],!0!==a&&(n?a.replacements.push(e):a.newDeepChildren.push(e))):nodeLists.nestList(e),e},unregisterChildren:function(e){for(var t=[],a=0,r;a<e.length;a++)r=e[a],r.nodeType?(!e.replacements&&nodeMap["delete"](r),t.push(r)):push$2.apply(t,nodeLists.unregister(r,!0));var s=e.deepChildren;if(s)for(var o=0;o<s.length;o++)nodeLists.unregister(s[o],!0);return t},unregister:function(e,t){var a=nodeLists.unregisterChildren(e,!0);if(e.isUnregistered=!0,e.unregistered){var n=e.unregistered;if(e.replacements=e.unregistered=null,!t){var r=e.parentList&&e.parentList.deepChildren;if(r){var s=r.indexOf(e);-1!==s&&r.splice(s,1)}}n()}return a},after:function(e,t){var a=e[e.length-1];a.nextSibling?canDomMutate_1_2_1_node.insertBefore.call(a.parentNode,t,a.nextSibling):canDomMutate_1_2_1_node.appendChild.call(a.parentNode,t)},replace:function(e,t){var a=e[0].parentNode,n;"SELECT"===a.nodeName.toUpperCase()&&0<=a.selectedIndex&&(n=a.value),1===e.length?canDomMutate_1_2_1_node.replaceChild.call(a,t,e[0]):(nodeLists.after(e,t),nodeLists.remove(e)),n!==void 0&&(a.value=n)},remove:function(e){for(var t=e[0]&&e[0].parentNode,a=0;a<e.length;a++)canDomMutate_1_2_1_node.removeChild.call(t,e[a])},nodeMap:nodeMap},canViewNodelist_4_3_2_canViewNodelist=canNamespace_1_0_0_canNamespace.nodeLists=nodeLists;function childNodes(e){var t=e.childNodes;if("length"in t)return t;for(var a=e.firstChild,n=[];a;)n.push(a),a=a.nextSibling;return n}var canChildNodes_1_2_0_canChildNodes=canNamespace_1_0_0_canNamespace.childNodes=childNodes,fragmentRE=/^\s*<(\w+)[^>]*>/,toString$1={}.toString;function makeFragment(e,t,a){void 0===t&&(t=fragmentRE.test(e)&&RegExp.$1),e&&"[object Function]"===toString$1.call(e.replace)&&(e=e.replace(/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,"<$1></$2>"));var n=a.createElement("div"),r=a.createElement("div");return"tbody"===t||"tfoot"===t||"thead"===t||"colgroup"===t?(r.innerHTML="<table>"+e+"</table>",n=3===r.firstChild.nodeType?r.lastChild:r.firstChild):"col"===t?(r.innerHTML="<table><colgroup>"+e+"</colgroup></table>",n=3===r.firstChild.nodeType?r.lastChild:r.firstChild.firstChild):"tr"===t?(r.innerHTML="<table><tbody>"+e+"</tbody></table>",n=3===r.firstChild.nodeType?r.lastChild:r.firstChild.firstChild):"td"===t||"th"===t?(r.innerHTML="<table><tbody><tr>"+e+"</tr></tbody></table>",n=3===r.firstChild.nodeType?r.lastChild:r.firstChild.firstChild.firstChild):"option"===t?(r.innerHTML="<select>"+e+"</select>",n=3===r.firstChild.nodeType?r.lastChild:r.firstChild):n.innerHTML=""+e,[].slice.call(canChildNodes_1_2_0_canChildNodes(n))}function fragment(e,t){if(e&&11===e.nodeType)return e;t?t.length&&(t=t[0]):t=document$1();for(var a=makeFragment(e,void 0,t),n=(t||document).createDocumentFragment(),r=0,s=a.length;r<s;r++)n.appendChild(a[r]);return n}var makeFrag=function(e,t){var a=t||document$1(),n;if(!e||"string"==typeof e)n=fragment(null==e?"":""+e,a);else{if(11===e.nodeType)return e;if("number"==typeof e.nodeType)return n=a.createDocumentFragment(),n.appendChild(e),n;canReflect_1_17_4_canReflect.isListLike(e)?(n=a.createDocumentFragment(),canReflect_1_17_4_canReflect.eachIndex(e,function(e){n.appendChild(makeFrag(e))})):n=fragment(""+e,a)}return canChildNodes_1_2_0_canChildNodes(n).length||n.appendChild(a.createTextNode("")),n},canFragment_1_2_0_canFragment=canNamespace_1_0_0_canNamespace.fragment=canNamespace_1_0_0_canNamespace.frag=makeFrag,canViewCallbacks_4_3_1_canViewCallbacks=createCommonjsModule(function(e){var t=canSymbol_1_6_1_canSymbol.for("can.callbackMap"),a={},n=function(){var e=canGlobals_1_2_0_canGlobals.getKeyValue("document");return null!=e&&null!=e.documentElement&&"false"!==e.documentElement.getAttribute("data-can-automount")},r=new WeakMap,s=function(e){var t=e.tagName&&e.tagName.toLowerCase(),n=a[t],o;if(n&&!r.has(e)&&n(e,{}),e.getElementsByTagName){o=e.getElementsByTagName("*");for(var i=0,l;void 0!==(l=o[i]);i++)s(l)}},o=!1,i=function(){if(!o){var e=function(e){for(var t=0,a,n;void 0!==(n=e[t]);t++)if("childList"===n.type){a=n.addedNodes;for(var o=0,l;void 0!==(l=a[o]);o++)r.has(l)||s(l)}},t=canGlobals_1_2_0_canGlobals.getKeyValue("MutationObserver");t&&(m=new t(e),m.observe(global_1().document.documentElement,{childList:!0,subtree:!0}),o=!0)}},l=function(e){for(var t=global_1().document.getElementsByTagName(e),a=0,n;void 0!==(n=t[a]);a++)s(n)},d=function(e,t){if(t)"string"==typeof e?p[e]=t:c.push({match:e,handler:t});else{var a=p[e];if(!a)for(var n=0,r=c.length,s;n<r;n++)if(s=c[n],s.match.test(e))return s.handler;return a}},p={},c=[],u=new WeakMap,y=/[-\:]/,h=function(){},g=function(e,t){if(t){var s=global_1(),d=y.test(e),p="undefined"!=typeof a[e.toLowerCase()],c;if(s.html5&&(s.html5.elements+=" "+e,s.html5.shivDocument()),a[e.toLowerCase()]=t,n()){var u=canGlobals_1_2_0_canGlobals.getKeyValue("customElements");if(!u)i(),l(e);else if(c=u.get(e.toLowerCase()),d&&!c){var g=function(){return Reflect.construct(HTMLElement,[],g)};g.prototype=Object.create(HTMLElement.prototype),g.prototype.connectedCallback=function(){r.has(this)||a[e.toLowerCase()](this,{})},u.define(e,g)}}else o&&m.disconnect()}else{var f;return null===t?delete a[e.toLowerCase()]:f=a[e.toLowerCase()],!f&&y.test(e)&&(f=h),f}},m;if(canNamespace_1_0_0_canNamespace.view=canNamespace_1_0_0_canNamespace.view||{},canNamespace_1_0_0_canNamespace.view.callbacks)throw new Error("You can't have two versions of can-view-callbacks, check your dependencies");else e.exports=canNamespace_1_0_0_canNamespace.view.callbacks={_tags:a,_attributes:p,_regExpAttributes:c,defaultCallback:h,tag:g,attr:d,attrs:function(e){var a=canReflect_1_17_4_canReflect.getKeyValue(e,t)||e;u.has(a)||(u.set(a,!0),canReflect_1_17_4_canReflect.eachKey(a,function(e,t){d(t,e)}))},tagHandler:function(e,t,n){var s=n.scope,o=s&&s.templateContext.tags.get(t),i=o||a[t],l;if(i?(l=canObservationRecorder_1_2_0_canObservationRecorder.ignore(i)(e,n),r.set(e,!0)):l=s,l&&n.subtemplate){s!==l&&(s=s.add(l));var d=canViewNodelist_4_3_2_canViewNodelist.register([],void 0,n.parentNodeList||!0,!1);d.expression="<"+e.tagName+">";var p=n.subtemplate(s,n.options,d),c="string"==typeof p?canFragment_1_2_0_canFragment(p):p;canDomMutate_1_2_1_node.appendChild.call(e,c)}}}}),processNodes=function(e,t,a,n){for(var r=n.createDocumentFragment(),s=0,o=e.length,l;s<o;s++)l=e[s],r.appendChild(processNode(l,t,a.concat(s),n));return r},keepsTextNodes="undefined"!=typeof document&&function(){var e=document.createDocumentFragment(),t=document.createElement("div");t.appendChild(document.createTextNode("")),t.appendChild(document.createTextNode("")),e.appendChild(t);var a=e.cloneNode(!0);return 2===a.firstChild.childNodes.length}(),clonesWork="undefined"!=typeof document&&function(){var e=document.createElement("a");e.innerHTML="<xyz></xyz>";var t=e.cloneNode(!0),a="<xyz></xyz>"===t.innerHTML,n,r;return a?(e=document.createDocumentFragment(),e.appendChild(document.createTextNode("foo-bar")),n=mutationObserver(),n?(r=new n(function(){}),r.observe(document.documentElement,{childList:!0,subtree:!0}),t=e.cloneNode(!0),r.disconnect()):t=e.cloneNode(!0),1===t.childNodes.length):a}(),namespacesWork="undefined"!=typeof document&&!!document.createElementNS,cloneNode=clonesWork?function(e){return e.cloneNode(!0)}:function(e){var t=e.ownerDocument,a;if(1===e.nodeType?"http://www.w3.org/1999/xhtml"!==e.namespaceURI&&namespacesWork&&t.createElementNS?a=t.createElementNS(e.namespaceURI,e.nodeName):a=t.createElement(e.nodeName):3===e.nodeType?a=t.createTextNode(e.nodeValue):8===e.nodeType?a=t.createComment(e.nodeValue):11===e.nodeType&&(a=t.createDocumentFragment()),e.attributes)for(var n=e.attributes,r=0,s;r<n.length;r++)s=n[r],s&&s.specified&&canDomMutate_1_2_1_node.setAttribute.call(a,s.nodeName||s.name,s.nodeValue||s.value);if(e&&e.firstChild)for(var o=e.firstChild;o;)a.appendChild(cloneNode(o)),o=o.nextSibling;return a};function processNode(e,t,a,n){var r=a,s=typeof e,o=function(){return l||(l={path:a,callbacks:[]},t.push(l),r=[]),l},l,d,c,u,y;if(!("object"==s))"string"==s?d=n.createTextNode(e):"function"==s&&(keepsTextNodes?(d=n.createTextNode(""),o().callbacks.push({callback:e})):(d=n.createComment("~"),o().callbacks.push({callback:function(){var t=n.createTextNode("");return canDomMutate_1_2_1_node.replaceChild.call(this.parentNode,t,this),e.apply(t,arguments)}})));else if(e.tag){if(d=namespacesWork&&e.namespace?n.createElementNS(e.namespace,e.tag):n.createElement(e.tag),e.attrs)for(var h in e.attrs){var g=e.attrs[h];"function"==typeof g?o().callbacks.push({callback:g}):canDomMutate_1_2_1_node.setAttribute.call(d,h,g)}if(e.attributes)for(u=0,y=e.attributes.length;u<y;u++)o().callbacks.push({callback:e.attributes[u]});e.children&&e.children.length&&(c=l?l.paths=[]:t,d.appendChild(processNodes(e.children,c,r,n)))}else if(e.comment&&(d=n.createComment(e.comment),e.callbacks))for(u=0,y=e.attributes.length;u<y;u++)o().callbacks.push({callback:e.callbacks[u]});return d}function getCallbacks(e,t,a){for(var n=t.path,r=t.callbacks,s=t.paths,o=e,l=n?n.length:0,d=s?s.length:0,p=0;p<l;p++)o=o.childNodes.item(n[p]);for(p=0;p<d;p++)getCallbacks(o,s[p],a);a.push({element:o,callbacks:r})}function hydrateCallbacks(e,t){for(var a=e.length,n=0,r,s,o;n<a;n++){o=e[n],r=o.callbacks.length,s=o.element;for(var l=0;l<r;l++)o.callbacks[l].callback.apply(s,t)}}function makeTarget(e,t){var a=[],n=processNodes(e,a,[],t||document$1());return{paths:a,clone:n,hydrate:function(){for(var e=cloneNode(this.clone),t=[],n=0,r=t.length=arguments.length;n<r;n++)t[n]=arguments[n];for(var s=[],o=0;o<a.length;o++)getCallbacks(e,a[o],s);return hydrateCallbacks(s,t),e}}}makeTarget.keepsTextNodes=keepsTextNodes,makeTarget.cloneNode=cloneNode,canNamespace_1_0_0_canNamespace.view=canNamespace_1_0_0_canNamespace.view||{};var canViewTarget_4_1_0_canViewTarget=canNamespace_1_0_0_canNamespace.view.target=makeTarget,TemplateContext=function(e){e=e||{},this.vars=new canSimpleMap_4_2_0_canSimpleMap(e.vars||{}),this.helpers=new canSimpleMap_4_2_0_canSimpleMap(e.helpers||{}),this.partials=new canSimpleMap_4_2_0_canSimpleMap(e.partials||{}),this.tags=new canSimpleMap_4_2_0_canSimpleMap(e.tags||{})},canViewScope_4_7_0_templateContext=TemplateContext,Compute=function(e){return arguments.length?canReflect_1_17_4_canReflect.setValue(this,e):canReflect_1_17_4_canReflect.getValue(this)},canViewScope_4_7_0_makeComputeLike=function(e){var t=Compute.bind(e);return t.on=t.bind=t.addEventListener=function(a,n){var r=function(e,a){n.call(t,{type:"change"},e,a)};canSingleReference_1_2_0_canSingleReference.set(n,this,r),e.on(r)},t.off=t.unbind=t.removeEventListener=function(t,a){e.off(canSingleReference_1_2_0_canSingleReference.getAndDelete(a,this))},canReflect_1_17_4_canReflect.assignSymbols(t,{"can.getValue":function(){return canReflect_1_17_4_canReflect.getValue(e)},"can.setValue":function(t){return canReflect_1_17_4_canReflect.setValue(e,t)},"can.onValue":function(t,a){return canReflect_1_17_4_canReflect.onValue(e,t,a)},"can.offValue":function(t,a){return canReflect_1_17_4_canReflect.offValue(e,t,a)},"can.valueHasDependencies":function(){return canReflect_1_17_4_canReflect.valueHasDependencies(e)},"can.getPriority":function(){return canReflect_1_17_4_canReflect.getPriority(e)},"can.setPriority":function(t){canReflect_1_17_4_canReflect.setPriority(e,t)},"can.isValueLike":!0,"can.isFunctionLike":!1}),t.isComputed=!0,t},makeDependencyRecord=function(){return{keyDependencies:new Map,valueDependencies:new Set}},makeRootRecord=function(){return{mutateDependenciesForKey:new Map,mutateDependenciesForValue:makeDependencyRecord()}},addMutatedBy=function(e){return function(t,a,n){var r=3===arguments.length;2===arguments.length&&(n=a,a=void 0),n.keyDependencies||n.valueDependencies||(n={valueDependencies:new Set([n])});var s=e.get(t);s||(s=makeRootRecord(),e.set(t,s)),r&&!s.mutateDependenciesForKey.get(a)&&s.mutateDependenciesForKey.set(a,makeDependencyRecord());var o=r?s.mutateDependenciesForKey.get(a):s.mutateDependenciesForValue;n.valueDependencies&&canReflect_1_17_4_canReflect.addValues(o.valueDependencies,n.valueDependencies),n.keyDependencies&&canReflect_1_17_4_canReflect.each(n.keyDependencies,function(e,t){var a=o.keyDependencies.get(t);a||(a=new Set,o.keyDependencies.set(t,a)),canReflect_1_17_4_canReflect.addValues(a,e)})}},deleteMutatedBy=function(e){return function(t,a,n){var r=3===arguments.length,s=e.get(t);2===arguments.length&&(n=a,a=void 0),n.keyDependencies||n.valueDependencies||(n={valueDependencies:new Set([n])});var o=r?s.mutateDependenciesForKey.get(a):s.mutateDependenciesForValue;n.valueDependencies&&canReflect_1_17_4_canReflect.removeValues(o.valueDependencies,n.valueDependencies),n.keyDependencies&&canReflect_1_17_4_canReflect.each(n.keyDependencies,function(e,t){var a=o.keyDependencies.get(t);a&&(canReflect_1_17_4_canReflect.removeValues(a,e),!a.size&&o.keyDependencies.delete(t))})}},isFunction=function(e){return"function"==typeof e},getWhatIChangeSymbol=canSymbol_1_6_1_canSymbol.for("can.getWhatIChange"),getKeyDependenciesSymbol=canSymbol_1_6_1_canSymbol.for("can.getKeyDependencies"),getValueDependenciesSymbol$1=canSymbol_1_6_1_canSymbol.for("can.getValueDependencies"),getKeyDependencies=function(e,t){if(isFunction(e[getKeyDependenciesSymbol]))return canReflect_1_17_4_canReflect.getKeyDependencies(e,t)},getValueDependencies=function(e){if(isFunction(e[getValueDependenciesSymbol$1]))return canReflect_1_17_4_canReflect.getValueDependencies(e)},getMutatedKeyDependencies=function(e,t,a){var n=e.get(t),r;return n&&n.mutateDependenciesForKey.has(a)&&(r=n.mutateDependenciesForKey.get(a)),r},getMutatedValueDependencies=function(e,t){var a=e.get(t),n;if(a){var r=a.mutateDependenciesForValue;r.keyDependencies.size&&(n=n||{},n.keyDependencies=r.keyDependencies),r.valueDependencies.size&&(n=n||{},n.valueDependencies=r.valueDependencies)}return n},getWhatIChange=function(e,t){if(isFunction(e[getWhatIChangeSymbol])){var a=2===arguments.length;return a?canReflect_1_17_4_canReflect.getWhatIChange(e,t):canReflect_1_17_4_canReflect.getWhatIChange(e)}},isEmptyRecord=function(e){return null==e||!Object.keys(e).length||e.keyDependencies&&!e.keyDependencies.size&&e.valueDependencies&&!e.valueDependencies.size},getWhatChangesMe=function(e,t,a){var n=3===arguments.length,r=n?getMutatedKeyDependencies(e,t,a):getMutatedValueDependencies(e,t),s=n?getKeyDependencies(t,a):getValueDependencies(t);if(!isEmptyRecord(r)||!isEmptyRecord(s))return Object.assign({},r?{mutate:r}:null,s?{derive:s}:null)},getDependencyDataOf=function(e){return function(t,a){var n=2===arguments.length,r=n?getWhatChangesMe(e,t,a):getWhatChangesMe(e,t),s=n?getWhatIChange(t,a):getWhatIChange(t);if(r||s)return Object.assign({},s?{whatIChange:s}:null,r?{whatChangesMe:r}:null)}},mutatedByMap=new WeakMap,canReflectDependencies_1_1_0_canReflectDependencies={addMutatedBy:addMutatedBy(mutatedByMap),deleteMutatedBy:deleteMutatedBy(mutatedByMap),getDependencyDataOf:getDependencyDataOf(mutatedByMap)},canStacheHelpers_1_2_0_canStacheHelpers=createCommonjsModule(function(e){if(canNamespace_1_0_0_canNamespace.stacheHelpers)throw new Error("You can't have two versions of can-stache-helpers, check your dependencies");else e.exports=canNamespace_1_0_0_canNamespace.stacheHelpers={}}),dispatchSymbol$2=canSymbol_1_6_1_canSymbol.for("can.dispatch"),peekValue=canObservationRecorder_1_2_0_canObservationRecorder.ignore(canReflect_1_17_4_canReflect.getValue.bind(canReflect_1_17_4_canReflect)),getFastPathRoot=canObservationRecorder_1_2_0_canObservationRecorder.ignore(function(e){if(e.reads&&1===e.reads.length){var t=e.root;return t&&t[canSymbol_1_6_1_canSymbol.for("can.getValue")]&&(t=canReflect_1_17_4_canReflect.getValue(t)),t&&canReflect_1_17_4_canReflect.isObservableLike(t)&&canReflect_1_17_4_canReflect.isMapLike(t)&&"function"!=typeof t[e.reads[0].key]&&t}}),isEventObject=function(e){return e&&"number"==typeof e.batchNum&&"string"==typeof e.type},ScopeKeyData=function(e,t,a){this.startingScope=e,this.key=t,this.read=this.read.bind(this),this.dispatch=this.dispatch.bind(this),"debugger"===t&&(this.startingScope={_context:canStacheHelpers_1_2_0_canStacheHelpers},this.read=function(){var t=canStacheHelpers_1_2_0_canStacheHelpers["debugger"];return t({scope:e})});var n=this.observation=new canObservation_4_1_0_canObservation(this.read,this);this.options=canAssign_1_3_1_canAssign({observation:this.observation},a),this.fastPath=void 0,this.root=void 0,this.initialValue=void 0,this.reads=void 0,this.setRoot=void 0,this.thisArg=void 0,this.parentHasKey=void 0;var r=new Set;r.add(n),this.dependencies={valueDependencies:r}};value(ScopeKeyData.prototype);function fastOnBoundSet_Value(){this._value=this.newVal}function fastOnBoundSetValue(){this.value=this.newVal}Object.assign(ScopeKeyData.prototype,{constructor:ScopeKeyData,dispatch:function(e){var t=this.value;this.value=e,this[dispatchSymbol$2].call(this,this.value,t)},onBound:function(){this.bound=!0,canReflect_1_17_4_canReflect.onValue(this.observation,this.dispatch,"notify");var e=getFastPathRoot(this);e&&this.toFastPath(e),this.value=peekValue(this.observation)},onUnbound:function(){this.bound=!1,canReflect_1_17_4_canReflect.offValue(this.observation,this.dispatch,"notify"),this.toSlowPath()},set:function(e){var t=this.root||this.setRoot;t?canStacheKey_1_4_0_canStacheKey.write(t,this.reads,e,this.options):this.startingScope.set(this.key,e,this.options)},get:function(){return canObservationRecorder_1_2_0_canObservationRecorder.isRecording()&&(canObservationRecorder_1_2_0_canObservationRecorder.add(this),!this.bound&&canObservation_4_1_0_canObservation.temporarilyBind(this)),!0===this.bound?this.value:this.observation.get()},toFastPath:function(e){var t=this,a=this.observation;this.fastPath=!0,a.dependencyChange=function(a,n){if(isEventObject(n))throw"no event objects!";return a===e&&"function"!=typeof n?this.newVal=n:t.toSlowPath(),canObservation_4_1_0_canObservation.prototype.dependencyChange.apply(this,arguments)},a.onBound=a.hasOwnProperty("_value")?fastOnBoundSet_Value:fastOnBoundSetValue},toSlowPath:function(){this.observation.dependencyChange=canObservation_4_1_0_canObservation.prototype.dependencyChange,this.observation.onBound=canObservation_4_1_0_canObservation.prototype.onBound,this.fastPath=!1},read:function(){var e;return this.root?(e=canStacheKey_1_4_0_canStacheKey.read(this.root,this.reads,this.options),this.thisArg=e.parent,e.value):(e=this.startingScope.read(this.key,this.options),this.scope=e.scope,this.reads=e.reads,this.root=e.rootObserve,this.setRoot=e.setRoot,this.thisArg=e.thisArg,this.parentHasKey=e.parentHasKey,this.initialValue=e.value)},hasDependencies:function(){return canReflect_1_17_4_canReflect.valueHasDependencies(this.observation)}});var scopeKeyDataPrototype={"can.getValue":ScopeKeyData.prototype.get,"can.setValue":ScopeKeyData.prototype.set,"can.valueHasDependencies":ScopeKeyData.prototype.hasDependencies,"can.getValueDependencies":function(){return this.dependencies},"can.getPriority":function(){return canReflect_1_17_4_canReflect.getPriority(this.observation)},"can.setPriority":function(e){canReflect_1_17_4_canReflect.setPriority(this.observation,e)}};canReflect_1_17_4_canReflect.assignSymbols(ScopeKeyData.prototype,scopeKeyDataPrototype),Object.defineProperty(ScopeKeyData.prototype,"compute",{get:function(){var e=canViewScope_4_7_0_makeComputeLike(this);return Object.defineProperty(this,"compute",{value:e,writable:!1,configurable:!1}),e},configurable:!0});var canViewScope_4_7_0_scopeKeyData=ScopeKeyData,canViewScope_4_7_0_compute_data=function(e,t,a){return new canViewScope_4_7_0_scopeKeyData(e,t,a||{args:[]})};function Scope(e,t,a){this._context=e,this._parent=t,this._meta=a||{},this.__cache={}}canAssign_1_3_1_canAssign(Scope,{read:canStacheKey_1_4_0_canStacheKey.read,TemplateContext:canViewScope_4_7_0_templateContext,keyInfo:function(e){var t={};return t.isDotSlash="./"===e.substr(0,2),t.isThisDot="this."===e.substr(0,5),t.isThisAt="this@"===e.substr(0,5),t.isInCurrentContext=t.isDotSlash||t.isThisDot||t.isThisAt,t.isInParentContext="../"===e.substr(0,3),t.isCurrentContext="."===e||"this"===e,t.isParentContext=".."===e,t.isScope="scope"===e,t.isInScope="scope."===e.substr(0,6)||"scope@"===e.substr(0,6),t.isContextBased=t.isInCurrentContext||t.isInParentContext||t.isCurrentContext||t.isParentContext,t}}),canAssign_1_3_1_canAssign(Scope.prototype,{add:function(e,t){return e===this._context?this:new this.constructor(e,this,t)},find:function(e,t){return this.get(e,canAssign_1_3_1_canAssign({currentScopeOnly:!1},t))},read:function(e,t){t=t||{},"./"===e&&(e=".");var a=Scope.keyInfo(e);if(a.isContextBased&&(this._meta.notContext||this._meta.special))return this._parent.read(e,t);if(this._context instanceof canViewScope_4_7_0_templateContext)return this._parent?this._parent.read(e,t):{};var n=!("currentScopeOnly"in t)||t.currentScopeOnly;if(a.isInCurrentContext)n=!0,e=a.isDotSlash?e.substr(2):e.substr(5);else{if((a.isInParentContext||a.isParentContext)&&this._parent){for(var r=this._parent;r.isSpecial();)r=r._parent;if(a.isParentContext)return canStacheKey_1_4_0_canStacheKey.read(r._context,[],t);var s=r.read(e.substr(3)||".",t);return canAssign_1_3_1_canAssign(s,{thisArg:s.thisArg||r._context})}if(a.isCurrentContext)return canStacheKey_1_4_0_canStacheKey.read(this._context,[],t);if(a.isScope)return{value:this}}var o=canStacheKey_1_4_0_canStacheKey.reads(e),i;return a.isInScope?(i=canStacheKey_1_4_0_canStacheKey.read(this,o.slice(1),t),"undefined"!=typeof i.value||i.parentHasKey||(i=this.readFromTemplateContext(e.slice(6),t)),canAssign_1_3_1_canAssign(i,{thisArg:1<o.length?i.parent:void 0})):this._read(o,t,n)},readFromSpecialContext:function(e){return this._read([{key:e,at:!1}],{special:!0})},readFromTemplateContext:function(e,t){var a=canStacheKey_1_4_0_canStacheKey.reads(e);return canStacheKey_1_4_0_canStacheKey.read(this.templateContext,a,t)},_read:function(e,t,a){for(var n=this,r=[],s=-1,o=canAssign_1_3_1_canAssign({foundObservable:function(t,a){p=t,c=e.slice(a)},earlyExit:function(t,a){(a>s||a===s&&"object"==typeof t&&(e[a].key in t))&&(y=p,u=c,s=a)}},t),i=canObservationRecorder_1_2_0_canObservationRecorder.isRecording(),l=t&&!0===t.special,d,p,c,u,y;n;){if(d=n._context,!l&&n._meta.special){n=n._parent;continue}if(l&&!n._meta.special){n=n._parent;continue}if(n._context instanceof canViewScope_4_7_0_templateContext){n=n._parent;continue}if(null!==d&&("object"==typeof d||"function"==typeof d)){var h=canObservationRecorder_1_2_0_canObservationRecorder.trap(),g=canStacheKey_1_4_0_canStacheKey.read(d,e,o),m=h();if(void 0!==g.value||g.parentHasKey)return!m.length&&i?(p=g.parent,c=e.slice(e.length-1)):canObservationRecorder_1_2_0_canObservationRecorder.addMany(m),{scope:n,rootObserve:p,value:g.value,reads:c,thisArg:1<e.length?g.parent:void 0,parentHasKey:g.parentHasKey};r.push.apply(r,m)}var f=n._parent&&!n._parent.isSpecial();n=a&&f?null:n._parent}if(!(t&&t.special)){var b=this.getHelper(e);if(b&&b.value)return b}return canObservationRecorder_1_2_0_canObservationRecorder.addMany(r),{setRoot:y,reads:u,value:void 0}},getHelper:function(e){for(var t=this,a,n;t;){if(a=t._context,a instanceof canViewScope_4_7_0_templateContext&&(n=canStacheKey_1_4_0_canStacheKey.read(a.helpers,e,{proxyMethods:!1}),void 0!==n.value))return n;t=t._parent}return canStacheKey_1_4_0_canStacheKey.read(canStacheHelpers_1_2_0_canStacheHelpers,e,{proxyMethods:!1})},get:function(e,t){t=canAssign_1_3_1_canAssign({isArgument:!0},t);var a=this.read(e,t);return a.value},peek:canObservationRecorder_1_2_0_canObservationRecorder.ignore(function(e,t){return this.get(e,t)}),peak:canObservationRecorder_1_2_0_canObservationRecorder.ignore(function(e,t){return this.peek(e,t)}),getScope:function(e){for(var t=this;t;){if(e(t))return t;t=t._parent}},getContext:function(e){var t=this.getScope(e);return t&&t._context},getTemplateContext:function(){var e=this.getScope(function(e){return t=e,e._context instanceof canViewScope_4_7_0_templateContext}),t;return e||(e=new Scope(new canViewScope_4_7_0_templateContext()),t._parent=e),e},addTemplateContext:function(){return this.add(new canViewScope_4_7_0_templateContext)},getRoot:function(){for(var e=this,t=this;e._parent;)t=e,e=e._parent;return e._context instanceof canViewScope_4_7_0_templateContext&&(e=t),e._context},getViewModel:function(){var e=this.getScope(function(e){return e._meta.viewModel});return e&&e._context},getTop:function(){var e;return this.getScope(function(t){return t._meta.viewModel&&(e=t),!1}),e&&e._context},getPathsForKey:function(){},hasKey:function(e){var t=canStacheKey_1_4_0_canStacheKey.reads(e),a;return a="scope"===t[0].key?canStacheKey_1_4_0_canStacheKey.read(this,t.slice(1),e):canStacheKey_1_4_0_canStacheKey.read(this._context,t,e),a.foundLastParent&&a.parentHasKey},getDataForScopeSet:function(e,t){var a=Scope.keyInfo(e),n;if(a.isCurrentContext)return{parent:this._context,how:"setValue"};if(a.isInParentContext||a.isParentContext){for(n=this._parent;n._meta.notContext;)n=n._parent;return a.isParentContext?{parent:n._context,how:"setValue"}:{how:"set",parent:n,passOptions:!0,key:e.substr(3)||"."}}var r=e.lastIndexOf("."),s=e.lastIndexOf("/"),o,i;s>r?(o=e.substring(0,s),i=e.substring(s+1,e.length)):-1===r?(o=".",i=e):(o=e.substring(0,r),i=e.substring(r+1,e.length));var l=this.read(o,t).value;return void 0===l?{error:"Attempting to set a value at "+e+" where "+o+" is undefined."}:!canReflect_1_17_4_canReflect.isObservableLike(l)&&canReflect_1_17_4_canReflect.isObservableLike(l[i])?canReflect_1_17_4_canReflect.isMapLike(l[i])?{parent:l,key:i,how:"updateDeep",warn:"can-view-scope: Merging data into \""+i+"\" because its parent is non-observable"}:canReflect_1_17_4_canReflect.isValueLike(l[i])?{parent:l,key:i,how:"setValue"}:{parent:l,how:"write",key:i,passOptions:!0}:{parent:l,how:"write",key:i,passOptions:!0}},set:function(e,t,a){a=a||{};var n=this.getDataForScopeSet(e,a),r=n.parent;switch(n.warn&&dev.warn(n.warn),n.how){case"set":r.set(n.key,t,n.passOptions?a:void 0);break;case"write":canStacheKey_1_4_0_canStacheKey.write(r,n.key,t,a);break;case"setValue":canReflect_1_17_4_canReflect.setValue("key"in n?r[n.key]:r,t);break;case"setKeyValue":canReflect_1_17_4_canReflect.setKeyValue(r,n.key,t);break;case"updateDeep":canReflect_1_17_4_canReflect.updateDeep(r[n.key],t);}},attr:canObservationRecorder_1_2_0_canObservationRecorder.ignore(function(e,t,a){return dev.warn("can-view-scope::attr is deprecated, please use peek, get or set"),a=canAssign_1_3_1_canAssign({isArgument:!0},a),2===arguments.length?this.set(e,t,a):this.get(e,a)}),computeData:function(e,t){return canViewScope_4_7_0_compute_data(this,e,t)},compute:function(e,t){return this.computeData(e,t).compute},cloneFromRef:function(){for(var e=[],t=this,a,n;t;){if(a=t._context,a instanceof canViewScope_4_7_0_templateContext){n=t._parent;break}e.unshift(a),t=t._parent}return n?(e.forEach(function(e){n=n.add(e)}),n):this},isSpecial:function(){return this._meta.notContext||this._meta.special||this._context instanceof canViewScope_4_7_0_templateContext}}),canReflect_1_17_4_canReflect.assignSymbols(Scope.prototype,{"can.hasKey":Scope.prototype.hasKey});var templateContextPrimitives=["filename","lineNumber"];templateContextPrimitives.forEach(function(e){Object.defineProperty(Scope.prototype,e,{get:function(){return this.readFromTemplateContext(e).value},set:function(t){this.templateContext[e]=t}})}),canDefineLazyValue_1_1_0_defineLazyValue(Scope.prototype,"templateContext",function(){return this.getTemplateContext()._context}),canDefineLazyValue_1_1_0_defineLazyValue(Scope.prototype,"root",function(){return dev.warn("`scope.root` is deprecated. Use either `scope.top` or `scope.vm` instead."),this.getRoot()}),canDefineLazyValue_1_1_0_defineLazyValue(Scope.prototype,"vm",function(){return this.getViewModel()}),canDefineLazyValue_1_1_0_defineLazyValue(Scope.prototype,"top",function(){return this.getTop()}),canDefineLazyValue_1_1_0_defineLazyValue(Scope.prototype,"helpers",function(){return canStacheHelpers_1_2_0_canStacheHelpers});var specialKeywords=["index","key","element","event","viewModel","arguments","helperOptions"];specialKeywords.forEach(function(e){Object.defineProperty(Scope.prototype,e,{get:function(){return this.readFromSpecialContext(e).value}})}),canNamespace_1_0_0_canNamespace.view=canNamespace_1_0_0_canNamespace.view||{};var canViewScope_4_7_0_canViewScope=canNamespace_1_0_0_canNamespace.view.Scope=Scope;function KeyObservable(e,t){t=""+t,this.key=t,this.root=e,settable.call(this,function(){return canStacheKey_1_4_0_canStacheKey.get(this,t)},e)}KeyObservable.prototype=Object.create(settable.prototype),KeyObservable.prototype.set=function(e){canStacheKey_1_4_0_canStacheKey.set(this.root,this.key,e)};var keyObservable=KeyObservable,createNoOpRenderer=function(e){return function(){e&&(e.rendered=!0)}},utils$1={last:function(e){return null!=e&&e[e.length-1]},emptyHandler:function(){},jsonParse:function(e){return"'"===e[0]?e.substr(1,e.length-2):"undefined"===e?void 0:JSON.parse(e)},mixins:{last:function(){return this.stack[this.stack.length-1]},add:function(e){this.last().add(e)},subSectionDepth:function(){return this.stack.length-1}},createRenderers:function(e,t,a,n,r,s){e.fn=n?this.makeRendererConvertScopes(n,t,a,s,e.metadata):createNoOpRenderer(e.metadata),e.inverse=r?this.makeRendererConvertScopes(r,t,a,s,e.metadata):createNoOpRenderer(e.metadata),e.isSection=!!(n||r)},makeRendererConvertScopes:function(e,t,a,n,r){var s=function(n,s,o){n===void 0||n instanceof canViewScope_4_7_0_canViewScope||(t?n=t.add(n):n=new canViewScope_4_7_0_canViewScope(n||{})),r&&(r.rendered=!0);var i=e(n||t,o||a);return i};return n?s:canObservationRecorder_1_2_0_canObservationRecorder.ignore(s)},getItemsStringContent:function(e,t,a){for(var n="",r=canStacheKey_1_4_0_canStacheKey.get(e,"length"),s=canReflect_1_17_4_canReflect.isObservableLike(e),o=0,l;o<r;o++)l=s?new keyObservable(e,o):e[o],n+=a.fn(l);return n},getItemsFragContent:function(e,t,a){var n=[],r=canStacheKey_1_4_0_canStacheKey.get(e,"length"),s=canReflect_1_17_4_canReflect.isObservableLike(e),o=t.exprData&&t.exprData.hashExprs,l;0<canReflect_1_17_4_canReflect.size(o)&&(l={},canReflect_1_17_4_canReflect.eachKey(o,function(e,t){l[e.key]=t}));for(var d=0;d<r;d++){var p={},c=s?new keyObservable(e,d):e[d];0<canReflect_1_17_4_canReflect.size(l)&&(l.value&&(p[l.value]=c),l.index&&(p[l.index]=d)),n.push(t.fn(a.add(p,{notContext:!0}).add({index:d},{special:!0}).add(c)))}return n}},last=utils$1.last,decodeHTML="undefined"!=typeof document&&function(){var e=document$1().createElement("div");return function(t){return-1===t.indexOf("&")?t.replace(/\r\n/g,"\n"):(e.innerHTML=t,0===e.childNodes.length?"":e.childNodes.item(0).nodeValue)}}(),HTMLSectionBuilder=function(e){e&&(this.filename=e),this.stack=[new HTMLSection]};canAssign_1_3_1_canAssign(HTMLSectionBuilder.prototype,utils$1.mixins),canAssign_1_3_1_canAssign(HTMLSectionBuilder.prototype,{startSubSection:function(e){var t=new HTMLSection(e);return this.stack.push(t),t},endSubSectionAndReturnRenderer:function(){if(this.last().isEmpty())return this.stack.pop(),null;var e=this.endSection();return e.compiled.hydrate.bind(e.compiled)},startSection:function(e){var t=new HTMLSection(e);this.last().add(t.targetCallback),this.stack.push(t)},endSection:function(){return this.last().compile(),this.stack.pop()},inverse:function(){this.last().inverse()},compile:function(){var e=this.stack.pop().compile();return canObservationRecorder_1_2_0_canObservationRecorder.ignore(function(t,a){return t instanceof canViewScope_4_7_0_canViewScope||(t=new canViewScope_4_7_0_canViewScope(t||{})),e.hydrate(t,a)})},push:function(e){this.last().push(e)},pop:function(){return this.last().pop()},removeCurrentNode:function(){this.last().removeCurrentNode()}});var HTMLSection=function(e){this.data="targetData",this.targetData=[],this.targetStack=[];var t=this;this.targetCallback=function(a,n){e.call(this,a,n,t.compiled.hydrate.bind(t.compiled),t.inverseCompiled&&t.inverseCompiled.hydrate.bind(t.inverseCompiled))}};canAssign_1_3_1_canAssign(HTMLSection.prototype,{inverse:function(){this.inverseData=[],this.data="inverseData"},push:function(e){this.add(e),this.targetStack.push(e)},pop:function(){return this.targetStack.pop()},add:function(e){"string"==typeof e&&(e=decodeHTML(e)),this.targetStack.length?last(this.targetStack).children.push(e):this[this.data].push(e)},compile:function(){return this.compiled=canViewTarget_4_1_0_canViewTarget(this.targetData,document$1()),this.inverseData&&(this.inverseCompiled=canViewTarget_4_1_0_canViewTarget(this.inverseData,document$1()),delete this.inverseData),this.targetStack=this.targetData=null,this.compiled},removeCurrentNode:function(){var e=this.children();return e.pop()},children:function(){return this.targetStack.length?last(this.targetStack).children:this[this.data]},isEmpty:function(){return!this.targetData.length}}),HTMLSectionBuilder.HTMLSection=HTMLSection;var html_section=HTMLSectionBuilder,live={setup:function(e,t,a){var n=!1,r=function(){return n||(n=!0,a(o),s&&(s(),s=void 0)),!0},s,o;return o={teardownCheck:function(e){return!e&&r()}},s=canDomMutate_1_2_1_canDomMutate.onNodeRemoval(e,function(){e.ownerDocument.contains(e)||r()}),t(o),o},listen:function(e,t,a,n){return live.setup(e,function(){canReflect_1_17_4_canReflect.onValue(t,a,n||"notify")},function(e){canReflect_1_17_4_canReflect.offValue(t,a,n||"notify"),e.nodeList&&canViewNodelist_4_3_2_canViewNodelist.unregister(e.nodeList)})},getAttributeParts:function(e){var t={},a;return canViewParser_4_1_0_canViewParser.parseAttrs(e,{attrStart:function(e){t[e]="",a=e},attrValue:function(e){t[a]+=e},attrEnd:function(){}}),t},isNode:function(e){return e&&e.nodeType},addTextNodeIfNoChildren:function(e){e.firstChild||e.appendChild(e.ownerDocument.createTextNode(""))},replace:function(e,t,a){var n=e.slice(0),r=canFragment_1_2_0_canFragment(t);return canViewNodelist_4_3_2_canViewNodelist.register(e,a),canViewNodelist_4_3_2_canViewNodelist.update(e,canChildNodes_1_2_0_canChildNodes(r)),canViewNodelist_4_3_2_canViewNodelist.replace(n,r),e},getParentNode:function(e,t){return t&&11===e.parentNode.nodeType?t:e.parentNode},makeString:function(e){return null==e?"":""+e}},core=live,canDomDataState_1_0_2_canDomDataState=createCommonjsModule(function(e){var t=function(e){for(var t in e)return!1;return!0},a={},n={},r=function(){var e=canCid_1_3_0_canCid.get(this),t=!1;return e&&a[e]&&(t=!0,delete a[e]),n[e]&&(n[e](),delete n[e]),t},s={_data:a,_removalDisposalMap:n,getCid:function(){return canCid_1_3_0_canCid.get(this)},cid:function(){return canCid_1_3_0_canCid(this)},expando:canCid_1_3_0_canCid.domExpando,get:function(e){var t=canCid_1_3_0_canCid.get(this),n=t&&a[t];return e===void 0?n:n&&n[e]},set:function(e,t){var s=canCid_1_3_0_canCid(this),o=a[s]||(a[s]={});if(e!==void 0){o[e]=t;var i=!!(this&&"number"==typeof this.nodeType);if(i&&!n[s]){var l=this;n[s]=canDomMutate_1_2_1_canDomMutate.onNodeRemoval(l,function(){l.ownerDocument.contains(l)||setTimeout(function(){r.call(l)},13)})}}return o},clean:function(e){var n=canCid_1_3_0_canCid.get(this),s=a[n];s&&s[e]&&delete s[e],t(s)&&r.call(this)},delete:r};if(canNamespace_1_0_0_canNamespace.domDataState)throw new Error("You can't have two versions of can-dom-data-state, check your dependencies");else e.exports=canNamespace_1_0_0_canNamespace.domDataState=s}),global$1=global_1(),formElements={INPUT:!0,TEXTAREA:!0,SELECT:!0},toString$2=function(e){return null==e?"":""+e},isSVG=function(e){return"http://www.w3.org/2000/svg"===e.namespaceURI},truthy=function(){return!0},getSpecialTest=function(e){return e&&e.test||truthy},propProp=function(e,t){return t=t||{},t.get=function(){return this[e]},t.set=function(t){this[e]!==t&&(this[e]=t)},t},booleanProp=function(e){return{isBoolean:!0,set:function(t){e in this?this[e]=t:canDomMutate_1_2_1_node.setAttribute.call(this,e,"")},remove:function(){this[e]=!1}}},setupMO=function(e,t){var a=canDomDataState_1_0_2_canDomDataState.get.call(e,"attrMO");if(!a){var n=function(){t.call(e)},r=mutationObserver();if(r){var s=new r(n);s.observe(e,{childList:!0,subtree:!0}),canDomDataState_1_0_2_canDomDataState.set.call(e,"attrMO",s)}else canDomDataState_1_0_2_canDomDataState.set.call(e,"attrMO",!0),canDomDataState_1_0_2_canDomDataState.set.call(e,"canBindingCallback",{onMutation:n})}},_findOptionToSelect=function(e,t){for(var a=e.firstChild;a;){if("OPTION"===a.nodeName&&t===a.value)return a;if("OPTGROUP"===a.nodeName){var n=_findOptionToSelect(a,t);if(n)return n}a=a.nextSibling}},setChildOptions=function(e,t){var a;null!=t&&(a=_findOptionToSelect(e,t)),a?a.selected=!0:e.selectedIndex=-1},forEachOption=function(e,t){for(var a=e.firstChild;a;)"OPTION"===a.nodeName&&t(a),"OPTGROUP"===a.nodeName&&forEachOption(a,t),a=a.nextSibling},collectSelectedOptions=function(e){var t=[];return forEachOption(e,function(e){e.selected&&t.push(e.value)}),t},markSelectedOptions=function(e,t){forEachOption(e,function(e){e.selected=-1!==t.indexOf(e.value)})},setChildOptionsOnChange=function(e,t){var a=canDomDataState_1_0_2_canDomDataState.get.call(e,"attrSetChildOptions");return a?Function.prototype:(a=function(){setChildOptions(e,e.value)},canDomDataState_1_0_2_canDomDataState.set.call(e,"attrSetChildOptions",a),t.call(e,"change",a),function(t){canDomDataState_1_0_2_canDomDataState.clean.call(e,"attrSetChildOptions"),t.call(e,"change",a)})},behaviorRules=new Map([]),isPropWritable=function(e,t){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(a)return a.writable||a.set;var n=Object.getPrototypeOf(e);return!!n&&isPropWritable(n,t)},cacheRule=function(e,t,a){var n;return n=behaviorRules.get(e.prototype),n||(n={},behaviorRules.set(e.constructor,n)),n[t]=a,a},specialAttributes={checked:{get:function(){return this.checked},set:function(e){var t=!!e||""===e||0===arguments.length;this.checked=t,t&&"radio"===this.type&&(this.defaultChecked=!0)},remove:function(){this.checked=!1},test:function(){return"INPUT"===this.nodeName}},class:{get:function(){return isSVG(this)?this.getAttribute("class"):this.className},set:function(e){e=e||"",isSVG(this)?canDomMutate_1_2_1_node.setAttribute.call(this,"class",""+e):this.className=e}},disabled:booleanProp("disabled"),focused:{get:function(){return this===document.activeElement},set:function(e){function t(){e?r.focus():r.blur()}var a=attr.get(this,"focused"),n=this.ownerDocument.documentElement,r=this;if(a!==e)if(!n.contains(r))var s=canDomMutate_1_2_1_canDomMutate.onNodeInsertion(r,function(){s(),t()});else canQueues_1_1_3_canQueues.enqueueByQueue({mutate:[t]},null,[]);return!0},addEventListener:function(e,t,a){return a.call(this,"focus",t),a.call(this,"blur",t),function(e){e.call(this,"focus",t),e.call(this,"blur",t)}},test:function(){return"INPUT"===this.nodeName}},for:propProp("htmlFor"),innertext:propProp("innerText"),innerhtml:propProp("innerHTML"),innerHTML:propProp("innerHTML",{addEventListener:function(e,t){var a=[],n=this;return["change","blur"].forEach(function(e){var r=function(){t.apply(this,arguments)};canDomEvents_1_3_0_canDomEvents.addEventListener(n,e,r),a.push([e,r])}),function(e){a.forEach(function(t){e.call(n,t[0],t[1])})}}}),required:booleanProp("required"),readonly:booleanProp("readOnly"),selected:{get:function(){return this.selected},set:function(e){e=!!e,canDomDataState_1_0_2_canDomDataState.set.call(this,"lastSetValue",e),this.selected=e},addEventListener:function(e,t,a){var n=this,r=this.parentNode,s=n.selected,o=function(){var t=n.selected;s=canDomDataState_1_0_2_canDomDataState.get.call(n,"lastSetValue")||s,t!==s&&(s=t,canDomEvents_1_3_0_canDomEvents.dispatch(n,e))},i=setChildOptionsOnChange(r,a);return canDomEvents_1_3_0_canDomEvents.addEventListener(r,"change",o),a.call(n,e,t),function(a){i(a),canDomEvents_1_3_0_canDomEvents.removeEventListener(r,"change",o),a.call(n,e,t)}},test:function(){return"OPTION"===this.nodeName&&this.parentNode&&"SELECT"===this.parentNode.nodeName}},style:{set:function(){var e=global$1.document&&document$1().createElement("div");return e&&e.style&&"cssText"in e.style?function(e){this.style.cssText=e||""}:function(e){canDomMutate_1_2_1_node.setAttribute.call(this,"style",e)}}()},textcontent:propProp("textContent"),value:{get:function(){var e=this.value;return"SELECT"===this.nodeName&&"selectedIndex"in this&&-1===this.selectedIndex&&(e=void 0),e},set:function(e){var t=this.nodeName.toLowerCase();if("input"===t&&(e=toString$2(e)),(this.value!==e||"option"===t)&&(this.value=e),("input"===t||"textarea"===t)&&(this.defaultValue=e),"select"===t){canDomDataState_1_0_2_canDomDataState.set.call(this,"attrValueLastVal",e),setChildOptions(this,null===e?e:this.value);var a=this.ownerDocument.documentElement;if(!a.contains(this))var n=this,r=canDomMutate_1_2_1_canDomMutate.onNodeInsertion(n,function(){r(),setChildOptions(n,null===e?e:n.value)});setupMO(this,function(){var e=canDomDataState_1_0_2_canDomDataState.get.call(this,"attrValueLastVal");attr.set(this,"value",e),canDomEvents_1_3_0_canDomEvents.dispatch(this,"change")})}},test:function(){return formElements[this.nodeName]}},values:{get:function(){return collectSelectedOptions(this)},set:function(e){e=e||[],markSelectedOptions(this,e),canDomDataState_1_0_2_canDomDataState.set.call(this,"stickyValues",attr.get(this,"values")),setupMO(this,function(){var e=canDomDataState_1_0_2_canDomDataState.get.call(this,"stickyValues");attr.set(this,"values",e);var t=canDomDataState_1_0_2_canDomDataState.get.call(this,"stickyValues"),a=list(e.slice().sort(),t.slice().sort());a.length&&canDomEvents_1_3_0_canDomEvents.dispatch(this,"values")})},addEventListener:function(e,t,a){var n=function(){canDomEvents_1_3_0_canDomEvents.dispatch(this,"values")};return canDomEvents_1_3_0_canDomEvents.addEventListener(this,"change",n),a.call(this,e,t),function(a){canDomEvents_1_3_0_canDomEvents.removeEventListener(this,"change",n),a.call(this,e,t)}}}},attr={rules:behaviorRules,specialAttributes:specialAttributes,getRule:function(e,t){var a=specialAttributes[t];if(a)return a;var n=behaviorRules.get(e.constructor),r=n&&n[t];if(r)return r;if(!(t in e))return this.attribute(t);var s=isPropWritable(e,t)?this.property(t):this.attribute(t);return cacheRule(e,t,s)},attribute:function(e){return{get:function(){return this.getAttribute(e)},set:function(t){canDomMutate_1_2_1_node.setAttribute.call(this,e,t)}}},property:function(e){return{get:function(){return this[e]},set:function(t){this[e]=t}}},findSpecialListener:function(e){return specialAttributes[e]&&specialAttributes[e].addEventListener},setAttrOrProp:function(e,t,a){return this.set(e,t,a)},set:function(e,t,a){var n=this.getRule(e,t),r=n&&n.set;if(r)return r.call(e,a)},get:function(e,t){var a=this.getRule(e,t),n=a&&a.get;if(n)return a.test?a.test.call(e)&&n.call(e):n.call(e)},remove:function(e,t){t=t.toLowerCase();var a=specialAttributes[t],n=a&&a.set,r=a&&a.remove,s=getSpecialTest(a);"function"==typeof r&&s.call(e)?r.call(e):"function"==typeof n&&s.call(e)?n.call(e,void 0):canDomMutate_1_2_1_node.removeAttribute.call(e,t)}},canAttributeObservable_1_1_2_behaviors=attr;core.attr=function(e,t,a){core.listen(e,a,function(a){canQueues_1_1_3_canQueues.domUIQueue.enqueue(canAttributeObservable_1_1_2_behaviors.set,canAttributeObservable_1_1_2_behaviors,[e,t,a])}),canAttributeObservable_1_1_2_behaviors.set(e,t,canReflect_1_17_4_canReflect.getValue(a))},core.attrs=function(e,t,a,n){function r(t){var r=core.getAttributeParts(t),s;for(s in r){var o=r[s],l=i[s];if(o!==l){canDomMutate_1_2_1_node.setAttribute.call(e,s,o);var d=canViewCallbacks_4_3_1_canViewCallbacks.attr(s);d&&d(e,{attributeName:s,scope:a,options:n})}delete i[s]}for(s in i)canDomMutate_1_2_1_node.removeAttribute.call(e,s);i=r}if(!canReflect_1_17_4_canReflect.isObservableLike(t)){var s=core.getAttributeParts(t);for(var o in s)canDomMutate_1_2_1_node.setAttribute.call(e,o,s[o]);return}var i={};canReflect_1_17_4_canReflect.onValue(t,r,"domUI");var l=function(){canReflect_1_17_4_canReflect.offValue(t,r,"domUI"),d&&(d(),d=void 0)},d;d=canDomMutate_1_2_1_canDomMutate.onNodeRemoval(e,function(){e.ownerDocument.contains(e)||l()}),r(canReflect_1_17_4_canReflect.getValue(t))};var viewInsertSymbol=canSymbol_1_6_1_canSymbol.for("can.viewInsert");function updateNodeList(e,t,a,n){!0!==t.isUnregistered&&(!n&&canViewNodelist_4_3_2_canViewNodelist.update(t,canChildNodes_1_2_0_canChildNodes(a),e),canViewNodelist_4_3_2_canViewNodelist.replace(e,a))}core.html=function(e,t,a,n){function r(e){var t=canViewNodelist_4_3_2_canViewNodelist.first(l).parentNode;t&&o(e,!0);var a=canViewNodelist_4_3_2_canViewNodelist.first(l).parentNode;s.teardownCheck(a)}var s,o,i,l,d;n!==void 0&&(Array.isArray(n)?i=n:(i=n.nodeList,d=n));var p={reasonLog:"live.html replace::"+canReflect_1_17_4_canReflect.getName(t)};a=core.getParentNode(e,a),s=core.listen(a,t,r),l=i||[e],o=function(e,t){e&&"function"==typeof e[viewInsertSymbol]&&(e=e[viewInsertSymbol](d));var a="function"==typeof e,n=canFragment_1_2_0_canFragment(a?"":e);core.addTextNodeIfNoChildren(n);var r;if(!0===t){r=canViewNodelist_4_3_2_canViewNodelist.unregisterChildren(l,!0);var s=!1;a&&(e(n.firstChild),s=canViewNodelist_4_3_2_canViewNodelist.first(l)===n.firstChild),canQueues_1_1_3_canQueues.domUIQueue.enqueue(updateNodeList,null,[r,l,n,s],p)}else r=canViewNodelist_4_3_2_canViewNodelist.update(l,canChildNodes_1_2_0_canChildNodes(n)),a&&e(n.firstChild),canViewNodelist_4_3_2_canViewNodelist.replace(r,n)},s.nodeList=l,i?i.unregistered=s.teardownCheck:canViewNodelist_4_3_2_canViewNodelist.register(l,s.teardownCheck),o(canReflect_1_17_4_canReflect.getValue(t))};function SetObservable(e,t){this.setter=t,canSimpleObservable_2_2_0_canSimpleObservable.call(this,e)}SetObservable.prototype=Object.create(canSimpleObservable_2_2_0_canSimpleObservable.prototype),SetObservable.prototype.constructor=SetObservable,SetObservable.prototype.set=function(e){this.setter(e)},canReflect_1_17_4_canReflect.assignSymbols(SetObservable.prototype,{"can.setValue":SetObservable.prototype.set});var setObservable=SetObservable,onValueSymbol$3=canSymbol_1_6_1_canSymbol.for("can.onValue"),offValueSymbol$1=canSymbol_1_6_1_canSymbol.for("can.offValue"),onPatchesSymbol$1=canSymbol_1_6_1_canSymbol.for("can.onPatches"),offPatchesSymbol=canSymbol_1_6_1_canSymbol.for("can.offPatches"),Patcher=function(e,t){this.handlers=new canKeyTree_1_2_0_canKeyTree([Object,Array],{onFirst:this.setup.bind(this),onEmpty:this.teardown.bind(this)}),this.observableOrList=e,this.isObservableValue=canReflect_1_17_4_canReflect.isValueLike(this.observableOrList)||canReflect_1_17_4_canReflect.isObservableLike(this.observableOrList),this.priority=this.isObservableValue?canReflect_1_17_4_canReflect.getPriority(e):t||0,this.onList=this.onList.bind(this),this.onPatchesNotify=this.onPatchesNotify.bind(this),this.onPatchesDerive=this.onPatchesDerive.bind(this),this.patches=[]};Patcher.prototype={constructor:Patcher,setup:function(){this.observableOrList[onValueSymbol$3]?(canReflect_1_17_4_canReflect.onValue(this.observableOrList,this.onList,"notify"),this.setupList(canReflect_1_17_4_canReflect.getValue(this.observableOrList))):this.setupList(this.observableOrList)},teardown:function(){this.observableOrList[offValueSymbol$1]&&canReflect_1_17_4_canReflect.offValue(this.observableOrList,this.onList,"notify")},setupList:function(e){this.currentList=e,e&&e[onPatchesSymbol$1]&&e[onPatchesSymbol$1](this.onPatchesNotify,"notify")},onList:function(e){var t=this.currentList||[];e=e||[],t[offPatchesSymbol]&&t[offPatchesSymbol](this.onPatchesNotify,"notify");var a=list(t,e);this.currentList=e,this.onPatchesNotify(a),e[onPatchesSymbol$1]&&e[onPatchesSymbol$1](this.onPatchesNotify,"notify")},onPatchesNotify:function(e){this.patches.push.apply(this.patches,e),canQueues_1_1_3_canQueues.deriveQueue.enqueue(this.onPatchesDerive,this,[],{priority:this.priority})},onPatchesDerive:function(){var e=this.patches;this.patches=[],canQueues_1_1_3_canQueues.enqueueByQueue(this.handlers.getNode([]),this.currentList,[e,this.currentList],null,["Apply patches",e])}},canReflect_1_17_4_canReflect.assignSymbols(Patcher.prototype,{"can.onPatches":function(e,t){this.handlers.add([t||"mutate",e])},"can.offPatches":function(e,t){this.handlers.delete([t||"mutate",e])}});var patcher=Patcher,splice$2=[].splice,renderAndAddToNodeLists=function(e,t,a,n,r){var s=[];t&&(canViewNodelist_4_3_2_canViewNodelist.register(s,null,!0,!0),s.parentList=t,s.expression="#each SUBEXPRESSION");var o=a.apply(n,r.concat([s])),i=canFragment_1_2_0_canFragment(o),l=canReflect_1_17_4_canReflect.toArray(canChildNodes_1_2_0_canChildNodes(i));return t?(canViewNodelist_4_3_2_canViewNodelist.update(s,l),e.push(s)):e.push(canViewNodelist_4_3_2_canViewNodelist.register(l)),i},removeFromNodeList=function(e,t,a){var n=e.splice(t+1,a),r=[];return n.forEach(function(e){var t=canViewNodelist_4_3_2_canViewNodelist.unregister(e);[].push.apply(r,t)}),r},onPatchesSymbol$2=canSymbol_1_6_1_canSymbol.for("can.onPatches"),offPatchesSymbol$1=canSymbol_1_6_1_canSymbol.for("can.offPatches");function ListDOMPatcher(e,t,a,n,r,s,o){this.patcher=new patcher(t),r=core.getParentNode(e,r),this.value=t,this.render=a,this.context=n,this.parentNode=r,this.falseyRender=o,this.masterNodeList=s||canViewNodelist_4_3_2_canViewNodelist.register([e],null,!0),this.placeholder=e,this.indexMap=[],this.isValueLike=canReflect_1_17_4_canReflect.isValueLike(this.value),this.isObservableLike=canReflect_1_17_4_canReflect.isObservableLike(this.value),this.onPatches=this.onPatches.bind(this);var i=this.data=core.setup(r,this.setupValueBinding.bind(this),this.teardownValueBinding.bind(this));this.masterNodeList.unregistered=function(){i.teardownCheck()}}var onPatchesSymbol$2=canSymbol_1_6_1_canSymbol.for("can.onPatches"),offPatchesSymbol$1=canSymbol_1_6_1_canSymbol.for("can.offPatches");ListDOMPatcher.prototype={setupValueBinding:function(){this.patcher[onPatchesSymbol$2](this.onPatches,"domUI"),this.patcher.currentList&&this.patcher.currentList.length?this.onPatches([{insert:this.patcher.currentList,index:0,deleteCount:0}]):this.addFalseyIfEmpty()},teardownValueBinding:function(){this.patcher[offPatchesSymbol$1](this.onPatches,"domUI"),this.exit=!0,this.remove({length:this.patcher.currentList.length},0,!0)},onPatches:function(e){if(!this.exit)for(var t=0,a=e.length,n;t<a;t++)n=e[t],"move"===n.type?this.move(n.toIndex,n.fromIndex):(n.deleteCount&&this.remove({length:n.deleteCount},n.index,!0),n.insert&&n.insert.length&&this.add(n.insert,n.index))},add:function(e,t){var a=this.placeholder.ownerDocument.createDocumentFragment(),n=[],r=[],s=this.masterNodeList,o=this.render,l=this.context;e.forEach(function(e,i){var d=new canSimpleObservable_2_2_0_canSimpleObservable(i+t),p=new setObservable(e,function(e){canReflect_1_17_4_canReflect.setKeyValue(this.patcher.currentList,d.get(),e)}.bind(this)),c=renderAndAddToNodeLists(n,s,o,l,[p,d]);a.appendChild(c),r.push(d)},this);var d=t+1;if(!this.indexMap.length){var p=removeFromNodeList(s,0,s.length-1);canViewNodelist_4_3_2_canViewNodelist.remove(p)}if(!s[d])canViewNodelist_4_3_2_canViewNodelist.after(1===d?[this.placeholder]:[canViewNodelist_4_3_2_canViewNodelist.last(this.masterNodeList[d-1])],a);else{var c=canViewNodelist_4_3_2_canViewNodelist.first(s[d]);canDomMutate_1_2_1_node.insertBefore.call(c.parentNode,a,c)}splice$2.apply(this.masterNodeList,[d,0].concat(n)),splice$2.apply(this.indexMap,[t,0].concat(r));for(var u=t+r.length,y=this.indexMap.length;u<y;u++)this.indexMap[u].set(u)},remove:function(e,t){0>t&&(t=this.indexMap.length+t);var a=removeFromNodeList(this.masterNodeList,t,e.length),n=this.indexMap;n.splice(t,e.length);for(var r=t,s=n.length;r<s;r++)n[r].set(r);this.exit?canViewNodelist_4_3_2_canViewNodelist.unregister(this.masterNodeList):(this.addFalseyIfEmpty(),canViewNodelist_4_3_2_canViewNodelist.remove(a))},addFalseyIfEmpty:function(){if(this.falseyRender&&0===this.indexMap.length){var e=[],t=renderAndAddToNodeLists(e,this.masterNodeList,this.falseyRender,this.currentList,[this.currentList]);canViewNodelist_4_3_2_canViewNodelist.after([this.masterNodeList[0]],t),this.masterNodeList.push(e[0])}},move:function(e,t){++e,++t;var a=this.masterNodeList,n=this.indexMap,r=a[e],s=canFragment_1_2_0_canFragment(canViewNodelist_4_3_2_canViewNodelist.flatten(a[t])),o;o=t<e?canViewNodelist_4_3_2_canViewNodelist.last(r).nextSibling:canViewNodelist_4_3_2_canViewNodelist.first(r);var l=a[0].parentNode;l.insertBefore(s,o);var d=a[t];[].splice.apply(a,[t,1]),[].splice.apply(a,[e,0,d]),--e,--t;var p=n[t];[].splice.apply(n,[t,1]),[].splice.apply(n,[e,0,p]);var c=Math.min(t,e),u=n.length;for(u;c<u;c++)n[c].set(c)},set:function(e,t){this.remove({length:1},t,!0),this.add([e],t)}},core.list=function(e,t,a,n,r,s,o){if(e.nodeType!==Node.TEXT_NODE){var i;s?(i=document.createTextNode(""),canViewNodelist_4_3_2_canViewNodelist.replace(s,i),canViewNodelist_4_3_2_canViewNodelist.update(s,[i]),e=i):(i=document.createTextNode(""),e.parentNode.replaceChild(i,e),e=i)}new ListDOMPatcher(e,t,a,n,r,s,o)},core.text=function(e,t,a,n){function r(t){e.nodeValue=core.makeString(t)}if(e.nodeType!==Node.TEXT_NODE){var s;n?(s=document.createTextNode(""),canViewNodelist_4_3_2_canViewNodelist.replace(n,s),canViewNodelist_4_3_2_canViewNodelist.update(n,[s]),e=s):(s=document.createTextNode(""),e.parentNode.replaceChild(s,e),e=s)}var o=core.getParentNode(e,a);e.nodeValue=core.makeString(canReflect_1_17_4_canReflect.getValue(t));var i=core.listen(o,t,r,"domUI");n||(n=canViewNodelist_4_3_2_canViewNodelist.register([e],null,!0)),n.unregistered=i.teardownCheck,i.nodeList=n};var canViewLive_4_2_0_canViewLive=core,noop=function(){},TextSectionBuilder=function(){this.stack=[new TextSection]};canAssign_1_3_1_canAssign(TextSectionBuilder.prototype,utils$1.mixins),canAssign_1_3_1_canAssign(TextSectionBuilder.prototype,{startSection:function(e){var t=new TextSection;this.last().add({process:e,truthy:t}),this.stack.push(t)},endSection:function(){this.stack.pop()},inverse:function(){this.stack.pop();var e=new TextSection;this.last().last().falsey=e,this.stack.push(e)},compile:function(e){var t=this.stack[0].compile();return function(a){var n=new canObservation_4_1_0_canObservation(function(){return t(a)},null,{isObservable:!1});canReflect_1_17_4_canReflect.onValue(n,noop);var r=canReflect_1_17_4_canReflect.getValue(n);canReflect_1_17_4_canReflect.valueHasDependencies(n)?(e.textContentOnly?canViewLive_4_2_0_canViewLive.text(this,n):e.attr?canViewLive_4_2_0_canViewLive.attr(this,e.attr,n):canViewLive_4_2_0_canViewLive.attrs(this,n,a),canReflect_1_17_4_canReflect.offValue(n,noop)):e.textContentOnly?this.nodeValue=r:e.attr?canDomMutate_1_2_1_node.setAttribute.call(this,e.attr,r):canViewLive_4_2_0_canViewLive.attrs(this,r)}}});var passTruthyFalsey=function(e,t,a){return function(n){return e.call(this,n,t,a)}},TextSection=function(){this.values=[]};canAssign_1_3_1_canAssign(TextSection.prototype,{add:function(e){this.values.push(e)},last:function(){return this.values[this.values.length-1]},compile:function(){for(var e=this.values,t=e.length,a=0,n;a<t;a++)n=this.values[a],"object"==typeof n&&(e[a]=passTruthyFalsey(n.process,n.truthy&&n.truthy.compile(),n.falsey&&n.falsey.compile()));return function(a){for(var n="",r=0,s;r<t;r++)s=e[r],n+="string"==typeof s?s:s.call(this,a);return n}}});var text_section=TextSectionBuilder,Arg=function(e,t){this.expr=e,this.modifiers=t||{},this.isCompute=!1};Arg.prototype.value=function(){return this.expr.value.apply(this.expr,arguments)};var arg=Arg,Literal=function(e){this._value=e};Literal.prototype.value=function(){return this._value};var literal=Literal;function SetterObservable(e,t){this.setter=t,this.observation=new canObservation_4_1_0_canObservation(e),this.handler=this.handler.bind(this)}SetterObservable.prototype=Object.create(settable.prototype),SetterObservable.prototype.constructor=SetterObservable,SetterObservable.prototype.set=function(e){this.setter(e)},SetterObservable.prototype.hasDependencies=function(){return canReflect_1_17_4_canReflect.valueHasDependencies(this.observation)},canReflect_1_17_4_canReflect.assignSymbols(SetterObservable.prototype,{"can.setValue":SetterObservable.prototype.set,"can.valueHasDependencies":SetterObservable.prototype.hasDependencies});var setter=SetterObservable;function getObservableValue_fromKey(e,t,a){var n=t.computeData(e,a);return canObservation_4_1_0_canObservation.temporarilyBind(n),n}function computeHasDependencies(e){return e[canSymbol_1_6_1_canSymbol.for("can.valueHasDependencies")]?canReflect_1_17_4_canReflect.valueHasDependencies(e):e.computeInstance.hasDependencies}function getObservableValue_fromDynamicKey_fromObservable(e,t){var a=function(){return canStacheKey_1_4_0_canStacheKey.reads((""+canReflect_1_17_4_canReflect.getValue(e)).replace(".","\\."))},n=new setter(function(){var e=canStacheKey_1_4_0_canStacheKey.read(canReflect_1_17_4_canReflect.getValue(t),a());return r=e.parentHasKey,e.value},function(e){canStacheKey_1_4_0_canStacheKey.write(canReflect_1_17_4_canReflect.getValue(t),a(),e)}),r;return canObservation_4_1_0_canObservation.temporarilyBind(n),n.initialValue=canReflect_1_17_4_canReflect.getValue(n),n.parentHasKey=r,n}function convertToArgExpression(e){return e instanceof arg||e instanceof literal?e:new arg(e)}function toComputeOrValue(e){return canReflect_1_17_4_canReflect.isObservableLike(e)?canReflect_1_17_4_canReflect.isValueLike(e)&&!1===canReflect_1_17_4_canReflect.valueHasDependencies(e)?canReflect_1_17_4_canReflect.getValue(e):e.compute?e.compute:canViewScope_4_7_0_makeComputeLike(e):e}function toCompute(e){return e?e.isComputed?e:e.compute?e.compute:canViewScope_4_7_0_makeComputeLike(e):e}var expressionHelpers={getObservableValue_fromKey:getObservableValue_fromKey,computeHasDependencies:computeHasDependencies,getObservableValue_fromDynamicKey_fromObservable:getObservableValue_fromDynamicKey_fromObservable,convertToArgExpression:convertToArgExpression,toComputeOrValue:toComputeOrValue,toCompute:toCompute},Hashes=function(e){this.hashExprs=e};Hashes.prototype.value=function(){var e={};for(var t in this.hashExprs){var a=expressionHelpers.convertToArgExpression(this.hashExprs[t]),n=a.value.apply(a,arguments);e[t]={call:!a.modifiers||!a.modifiers.compute,value:n}}return new canObservation_4_1_0_canObservation(function(){var t={};for(var a in e)t[a]=e[a].call?canReflect_1_17_4_canReflect.getValue(e[a].value):expressionHelpers.toComputeOrValue(e[a].value);return t})};var hashes=Hashes,Bracket=function(e,t){this.root=t,this.key=e};Bracket.prototype.value=function(e,t){var a=this.root?this.root.value(e,t):e.peek("this");return expressionHelpers.getObservableValue_fromDynamicKey_fromObservable(this.key.value(e,t),a,e,t,{})},Bracket.prototype.closingTag=function(){};var bracket=Bracket,setIdentifier=function(e){this.value=e},sourceTextSymbol=canSymbol_1_6_1_canSymbol.for("can-stache.sourceText"),Call=function(e,t){this.methodExpr=e,this.argExprs=t.map(expressionHelpers.convertToArgExpression)};Call.prototype.args=function(e,t){for(var a={},n=[],r=0,s=this.argExprs.length,o;r<s;r++)if(o=this.argExprs[r],o.expr instanceof hashes&&canAssign_1_3_1_canAssign(a,o.expr.hashExprs),!("function"==typeof t)||!t(r)){var l=o.value.apply(o,arguments);n.push({call:!o.modifiers||!o.modifiers.compute,value:l})}return function(e){var t=[];0<canReflect_1_17_4_canReflect.size(a)&&(t.hashExprs=a);for(var r=0,s=n.length;r<s;r++)t[r]=e?n[r].value:n[r].call?canReflect_1_17_4_canReflect.getValue(n[r].value):expressionHelpers.toCompute(n[r].value);return t}},Call.prototype.value=function(e,t){var a=this,n=this.methodExpr.value(e,{proxyMethods:!1}),r=canReflect_1_17_4_canReflect.getValue(n),s=a.args(e,r&&r.ignoreArgLookup),o=function(a){var r=canReflect_1_17_4_canReflect.getValue(n);if("function"==typeof r){var o=s(r.isLiveBound);return r.requiresOptionsArgument&&(o.hashExprs&&t&&t.exprData&&(t.exprData.hashExprs=o.hashExprs),void 0!==t&&o.push(t)),arguments.length&&o.unshift(new setIdentifier(a)),r.apply(n.thisArg||e.peek("this"),o)}};if(t&&t.doNotWrapInObservation)return o();var i=new setter(o,o);return i},Call.prototype.closingTag=function(){return this.methodExpr.key};var call$1=Call,Helper=function(e,t,a){this.methodExpr=e,this.argExprs=t,this.hashExprs=a,this.mode=null};Helper.prototype.args=function(){for(var e=[],t=0,a=this.argExprs.length,n;t<a;t++)n=this.argExprs[t],e.push(expressionHelpers.toComputeOrValue(n.value.apply(n,arguments)));return e},Helper.prototype.hash=function(){var e={};for(var t in this.hashExprs){var a=this.hashExprs[t];e[t]=expressionHelpers.toComputeOrValue(a.value.apply(a,arguments))}return e},Helper.prototype.value=function(e,t){var a=this.methodExpr instanceof literal?""+this.methodExpr._value:this.methodExpr.key,n=this,r=expressionHelpers.getObservableValue_fromKey(a,e,{proxyMethods:!1}),s=r&&r.initialValue,o=r&&r.thisArg;return"function"==typeof s&&(r=function(){var a=n.args(e),r=canAssign_1_3_1_canAssign(canAssign_1_3_1_canAssign({},t),{hash:n.hash(e),exprData:n});return a.push(r),s.apply(o||e.peek("this"),a)}),r},Helper.prototype.closingTag=function(){return this.methodExpr.key},"production"!==process.env.NODE_ENV&&canReflect_1_17_4_canReflect.assignSymbols(Helper.prototype,{"can.getName":function(){return canReflect_1_17_4_canReflect.getName(this.constructor)+"{{"+this.sourceText()+"}}"}});var helper=Helper,sourceTextSymbol$1=canSymbol_1_6_1_canSymbol.for("can-stache.sourceText"),Lookup=function(e,t,a){this.key=e,this.rootExpr=t,canReflect_1_17_4_canReflect.setKeyValue(this,sourceTextSymbol$1,a)};Lookup.prototype.value=function(e,t){var a;return a=this.rootExpr?expressionHelpers.getObservableValue_fromDynamicKey_fromObservable(this.key,this.rootExpr.value(e),e,{},{}):expressionHelpers.getObservableValue_fromKey(this.key,e,t),a};var lookup=Lookup,last$1=utils$1.last,sourceTextSymbol$2=canSymbol_1_6_1_canSymbol.for("can-stache.sourceText"),Hash=function(){},keyRegExp=/[\w\.\\\-_@\/\&%]+/,tokensRegExp=/('.*?'|".*?"|=|[\w\.\\\-_@\/*%\$]+|[\(\)]|,|\~|\[|\]\s*|\s*(?=\[))/g,bracketSpaceRegExp=/\]\s+/,literalRegExp=/^('.*?'|".*?"|-?[0-9]+\.?[0-9]*|true|false|null|undefined)$/,isTokenKey=function(e){return keyRegExp.test(e)},testDot=/^[\.@]\w/,isAddingToExpression=function(e){return isTokenKey(e)&&testDot.test(e)},ensureChildren=function(e){return e.children||(e.children=[]),e},Stack=function(){this.root={children:[],type:"Root"},this.current=this.root,this.stack=[this.root]};canAssign_1_3_1_canAssign(Stack.prototype,{top:function(){return last$1(this.stack)},isRootTop:function(){return this.top()===this.root},popTo:function(e){this.popUntil(e),this.pop()},pop:function(){this.isRootTop()||this.stack.pop()},first:function(e){for(var t=this.stack.length-1;0<t&&-1===e.indexOf(this.stack[t].type);)t--;return this.stack[t]},firstParent:function(e){for(var t=this.stack.length-2;0<t&&-1===e.indexOf(this.stack[t].type);)t--;return this.stack[t]},popUntil:function(e){for(;-1===e.indexOf(this.top().type)&&!this.isRootTop();)this.stack.pop();return this.top()},addTo:function(e,t){var a=this.popUntil(e);ensureChildren(a).children.push(t)},addToAndPush:function(e,t){this.addTo(e,t),this.stack.push(t)},push:function(e){this.stack.push(e)},topLastChild:function(){return last$1(this.top().children)},replaceTopLastChild:function(e){var t=ensureChildren(this.top()).children;return t.pop(),t.push(e),e},replaceTopLastChildAndPush:function(e){this.replaceTopLastChild(e),this.stack.push(e)},replaceTopAndPush:function(e){var t;return this.top()===this.root?t=ensureChildren(this.top()).children:(this.stack.pop(),t=ensureChildren(this.top()).children),t.pop(),t.push(e),this.stack.push(e),e}});var convertKeyToLookup=function(e){var t=e.lastIndexOf("./"),a=e.lastIndexOf(".");if(a>t)return e.substr(0,a)+"@"+e.substr(a+1);var n=-1===t?0:t+2,r=e.charAt(n);return"."===r||"@"===r?e.substr(0,n)+"@"+e.substr(n+1):e.substr(0,n)+"@"+e.substr(n)},convertToAtLookup=function(e){return"Lookup"===e.type&&(canReflect_1_17_4_canReflect.setKeyValue(e,sourceTextSymbol$2,e.key),e.key=convertKeyToLookup(e.key)),e},convertToHelperIfTopIsLookup=function(e){var t=e.top();if(t&&"Lookup"===t.type){var a=e.stack[e.stack.length-2];"Helper"!==a.type&&a&&e.replaceTopAndPush({type:"Helper",method:t})}},expression={toComputeOrValue:expressionHelpers.toComputeOrValue,convertKeyToLookup:convertKeyToLookup,Literal:literal,Lookup:lookup,Arg:arg,Hash:Hash,Hashes:hashes,Call:call$1,Helper:helper,Bracket:bracket,SetIdentifier:setIdentifier,tokenize:function(e){var t=[];return(e.trim()+" ").replace(tokensRegExp,function(e,a){bracketSpaceRegExp.test(a)?(t.push(a[0]),t.push(a.slice(1))):t.push(a)}),t},lookupRules:{default:function(e){return"Helper"===e.type?helper:lookup},method:function(){return lookup}},methodRules:{default:function(e){return"Call"===e.type?call$1:helper},call:function(){return call$1}},parse:function(e,t){t=t||{};var a=this.ast(e);t.lookupRule||(t.lookupRule="default"),"string"==typeof t.lookupRule&&(t.lookupRule=expression.lookupRules[t.lookupRule]),t.methodRule||(t.methodRule="default"),"string"==typeof t.methodRule&&(t.methodRule=expression.methodRules[t.methodRule]);var n=this.hydrateAst(a,t,t.baseMethodType||"Helper");return n},hydrateAst:function(e,t,a,n){var r;if("Lookup"===e.type){var s=t.lookupRule(e,a,n),o=new s(e.key,e.root&&this.hydrateAst(e.root,t,a),e[sourceTextSymbol$2]);return o}if("Literal"===e.type)return new literal(e.value);if("Arg"===e.type)return new arg(this.hydrateAst(e.children[0],t,a,n),{compute:!0});if("Hash"===e.type)throw new Error("");else{if("Hashes"===e.type)return r={},e.children.forEach(function(e){r[e.prop]=this.hydrateAst(e.children[0],t,a,!0)},this),new hashes(r);if("Call"===e.type||"Helper"===e.type){r={};var l=[],d=e.children,p=t.methodRule(e);if(d)for(var c=0,u;c<d.length;c++)u=d[c],"Hashes"===u.type&&"Helper"===e.type&&p!==call$1?u.children.forEach(function(a){r[a.prop]=this.hydrateAst(a.children[0],t,e.type,!0)},this):l.push(this.hydrateAst(u,t,e.type,!0));return new p(this.hydrateAst(e.method,t,e.type),l,r)}if("Bracket"===e.type){var y;return new bracket(this.hydrateAst(e.children[0],t),e.root?this.hydrateAst(e.root,t):void 0,y)}}},ast:function(e){var t=this.tokenize(e);return this.parseAst(t,{index:0})},parseAst:function(e,t){for(var a=new Stack,n,r,s;t.index<e.length;){var o=e[t.index],i=e[t.index+1];if(t.index++,"="===i){n=a.top(),n&&"Lookup"===n.type&&(r=a.firstParent(["Call","Helper","Hash"]),("Call"===r.type||"Root"===r.type)&&(a.popUntil(["Call"]),n=a.top(),a.replaceTopAndPush({type:"Helper",method:"Root"===n.type?last$1(n.children):n}))),r=a.firstParent(["Call","Helper","Hashes"]);var l={type:"Hash",prop:o};"Hashes"===r.type?a.addToAndPush(["Hashes"],l):(a.addToAndPush(["Helper","Call"],{type:"Hashes",children:[l]}),a.push(l)),t.index++}else if(literalRegExp.test(o))convertToHelperIfTopIsLookup(a),r=a.first(["Helper","Call","Hash","Bracket"]),"Hash"===r.type&&r.children&&0<r.children.length?a.addTo(["Helper","Call","Bracket"],{type:"Literal",value:utils$1.jsonParse(o)}):"Bracket"===r.type&&r.children&&0<r.children.length?a.addTo(["Helper","Call","Hash"],{type:"Literal",value:utils$1.jsonParse(o)}):a.addTo(["Helper","Call","Hash","Bracket"],{type:"Literal",value:utils$1.jsonParse(o)});else if(keyRegExp.test(o))s=a.topLastChild(),r=a.first(["Helper","Call","Hash","Bracket"]),s&&("Call"===s.type||"Bracket"===s.type)&&isAddingToExpression(o)?a.replaceTopLastChildAndPush({type:"Lookup",root:s,key:o.slice(1)}):"Bracket"===r.type?r.children&&0<r.children.length?"Helper"===a.first(["Helper","Call","Hash","Arg"]).type&&"."!==o[0]?a.addToAndPush(["Helper"],{type:"Lookup",key:o}):a.replaceTopAndPush({type:"Lookup",key:o.slice(1),root:r}):a.addToAndPush(["Bracket"],{type:"Lookup",key:o}):(convertToHelperIfTopIsLookup(a),a.addToAndPush(["Helper","Call","Hash","Arg","Bracket"],{type:"Lookup",key:o}));else if("~"===o)convertToHelperIfTopIsLookup(a),a.addToAndPush(["Helper","Call","Hash"],{type:"Arg",key:o});else if("("===o){if(n=a.top(),"Lookup"===n.type)a.replaceTopAndPush({type:"Call",method:convertToAtLookup(n)});else throw new Error("Unable to understand expression "+e.join(""));}else if(")"===o)a.popTo(["Call"]);else if(","===o)a.popUntil(["Call"]);else if("["!==o)"]"===o?a.pop():" "===o&&a.push(o);else if(n=a.top(),s=a.topLastChild(),s&&("Call"===s.type||"Bracket"===s.type))a.replaceTopAndPush({type:"Bracket",root:s});else if("Lookup"===n.type||"Bracket"===n.type){var d={type:"Bracket",root:n};a.replaceTopAndPush(d)}else"Call"===n.type?a.addToAndPush(["Call"],{type:"Bracket"}):" "===n?(a.popUntil(["Lookup","Call"]),convertToHelperIfTopIsLookup(a),a.addToAndPush(["Helper","Call","Hash"],{type:"Bracket"})):a.replaceTopAndPush({type:"Bracket"})}return a.root.children[0]}},expression_1=expression,expression$1=expression_1;function HelperOptions(e,t,a,n){this.metadata={rendered:!1},this.stringOnly=n,this.scope=e,this.nodeList=t,this.exprData=a}canDefineLazyValue_1_1_0_defineLazyValue(HelperOptions.prototype,"context",function(){return this.scope.peek("this")});var mustacheLineBreakRegExp=/(?:(^|\r?\n)(\s*)(\{\{([\s\S]*)\}\}\}?)([^\S\n\r]*)($|\r?\n))|(\{\{([\s\S]*)\}\}\}?)/g,mustacheWhitespaceRegExp=/(\s*)(\{\{\{?)(-?)([\s\S]*?)(-?)(\}\}\}?)(\s*)/g,k=function(){},viewInsertSymbol$1=canSymbol_1_6_1_canSymbol.for("can.viewInsert"),core$1={expression:expression$1,makeEvaluator:function(e,t,a,n,r,s,o){if("^"===a){var i=r;r=s,s=i}var l=new HelperOptions(e,t,n,o),d;if(utils$1.createRenderers(l,e,t,r,s,o),n instanceof expression$1.Call)d=n.value(e,l);else if(n instanceof expression$1.Bracket)d=n.value(e);else if(n instanceof expression$1.Lookup)d=n.value(e);else if(n instanceof expression$1.Helper&&n.methodExpr instanceof expression$1.Bracket)d=n.methodExpr.value(e,l);else if(d=n.value(e,l),"function"==typeof d)return d;return!a||l.metadata.rendered?d:"#"===a||"^"===a?function(){var t=canReflect_1_17_4_canReflect.getValue(d),a;if(l.metadata.rendered)a=t;else if("string"!=typeof t&&canReflect_1_17_4_canReflect.isListLike(t)){var n=canReflect_1_17_4_canReflect.isObservableLike(t)&&canReflect_1_17_4_canReflect.isListLike(t);a=canReflect_1_17_4_canReflect.getKeyValue(t,"length")?o?utils$1.getItemsStringContent(t,n,l):canFragment_1_2_0_canFragment(utils$1.getItemsFragContent(t,l,e)):l.inverse(e)}else a=t?l.fn(t||e):l.inverse(e);return l.metadata.rendered=!1,a}:void 0},makeLiveBindingPartialRenderer:function(e,t){e=e.trim();var a=e.split(/\s+/).shift(),n;return a!==e&&(n=core$1.expression.parse(e)),function(e,r){var s=[this];s.expression=">"+a,canViewNodelist_4_3_2_canViewNodelist.register(s,null,r||!0,t.directlyNested);var o=new canObservation_4_1_0_canObservation(function(){var t=a;if(n&&1===n.argExprs.length){var r=canReflect_1_17_4_canReflect.getValue(n.argExprs[0].value(e));"undefined"==typeof r||(e=e.add(r))}var o=canReflect_1_17_4_canReflect.getKeyValue(e.templateContext.partials,t),i;if(o)i=function(){return o.render?o.render(e,s):o(e)};else{var l=e.read(t,{isArgument:!0}).value;if(null===l||!l&&"*"===t[0])return canFragment_1_2_0_canFragment("");l&&(t=l),i=function(){if("function"==typeof t)return t(e,{},s);var a=core$1.getTemplateById(t);return a?a(e,{},s):document$1().createDocumentFragment()}}var d=canObservationRecorder_1_2_0_canObservationRecorder.ignore(i)();return canFragment_1_2_0_canFragment(d)});canReflect_1_17_4_canReflect.setPriority(o,s.nesting),canViewLive_4_2_0_canViewLive.html(this,o,this.parentNode,s)}},makeStringBranchRenderer:function(e,t){var a=core$1.expression.parse(t),n=e+t,r=function(t,r,s){var o=t.__cache[n];(e||!o)&&(o=makeEvaluator(t,null,e,a,r,s,!0),!e&&(t.__cache[n]=o));var i=o[canSymbol_1_6_1_canSymbol.for("can.onValue")],l;return l=i?canReflect_1_17_4_canReflect.getValue(o):o(),null==l?"":""+l};return r.exprData=a,r},makeLiveBindingBranchRenderer:function(e,t,a){var n=core$1.expression.parse(t);n instanceof expression$1.Helper||n instanceof expression$1.Call||n instanceof expression$1.Bracket||n instanceof expression$1.Lookup||(n=new expression$1.Helper(n,[],{}));var r=function(r,s,o,i){var l=a.tag,d=[this];d.expression=t,canViewNodelist_4_3_2_canViewNodelist.register(d,null,s||!0,a.directlyNested);var p=makeEvaluator(r,d,e,n,o,i,l),c=p[canSymbol_1_6_1_canSymbol.for("can.onValue")],u;if(u=c?p:new canObservation_4_1_0_canObservation(p,null,{isObservable:!1}),!1===canReflect_1_17_4_canReflect.setPriority(u,d.nesting))throw new Error("can-stache unable to set priority on observable");canReflect_1_17_4_canReflect.onValue(u,k);var y=canReflect_1_17_4_canReflect.getValue(u);if("function"==typeof y&&!(n instanceof expression$1.Lookup))canObservationRecorder_1_2_0_canObservationRecorder.ignore(y)(this);else if(canReflect_1_17_4_canReflect.valueHasDependencies(u))a.attr?canViewLive_4_2_0_canViewLive.attr(this,a.attr,u):a.tag?canViewLive_4_2_0_canViewLive.attrs(this,u):a.text&&"object"!=typeof y?canViewLive_4_2_0_canViewLive.text(this,u,this.parentNode,d):canViewLive_4_2_0_canViewLive.html(this,u,this.parentNode,{nodeList:d});else if(a.attr)canDomMutate_1_2_1_canDomMutate.setAttribute(this,a.attr,y);else if(a.tag)canViewLive_4_2_0_canViewLive.attrs(this,y);else if(a.text&&"string"==typeof y)this.nodeValue=y;else if(null!=y)if("function"==typeof y[viewInsertSymbol$1]){var h=y[viewInsertSymbol$1]({nodeList:d}),g=canViewNodelist_4_3_2_canViewNodelist.update(d,[h]);canViewNodelist_4_3_2_canViewNodelist.replace(g,h)}else canViewNodelist_4_3_2_canViewNodelist.replace([this],canFragment_1_2_0_canFragment(y,this.ownerDocument));canReflect_1_17_4_canReflect.offValue(u,k)};return r.exprData=n,r},splitModeFromExpression:function(e,t){e=e.trim();var a=e.charAt(0);return 0<="#/{&^>!<".indexOf(a)?e=e.substr(1).trim():a=null,"{"===a&&t.node&&(a=null),{mode:a,expression:e}},cleanLineEndings:function(e){return e.replace(mustacheLineBreakRegExp,function(e,t,a,n,r,s,o,i,l,d){s=s||"",t=t||"",a=a||"";var p=splitModeFromExpression(r||l,{});return i||0<=">{".indexOf(p.mode)?e:0<="^#!/".indexOf(p.mode)?(a=t+a&&" ",a+n+(0!==d&&o.length?t+"\n":"")):a+n+s+(a.length||0!==d?t+"\n":"")})},cleanWhitespaceControl:function(e){return e.replace(mustacheWhitespaceRegExp,function(e,t,a,n,r,s,o,i){return"-"===n&&(t=""),"-"===s&&(i=""),t+a+r+o+i})},getTemplateById:function(){}},makeEvaluator=core$1.makeEvaluator,splitModeFromExpression=core$1.splitModeFromExpression,mustache_core=core$1;canGlobals_1_2_0_canGlobalsInstance.define("base-url",function(){var e=canGlobals_1_2_0_canGlobalsInstance.getKeyValue("global"),t=canGlobals_1_2_0_canGlobalsInstance.getKeyValue("document");if(t&&"baseURI"in t)return t.baseURI;if(e.location){var a=e.location.href,n=a.lastIndexOf("/");return-1===n?a:a.substr(0,n)}return"undefined"==typeof process?void 0:process.cwd()});var baseUrl=canGlobals_1_2_0_canGlobalsInstance.makeExport("base-url"),canParseUri_1_2_0_canParseUri=canNamespace_1_0_0_canNamespace.parseURI=function(e){var t=(e+"").replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return t?{href:t[0]||"",protocol:t[1]||"",authority:t[2]||"",host:t[3]||"",hostname:t[4]||"",port:t[5]||"",pathname:t[6]||"",search:t[7]||"",hash:t[8]||""}:null},canJoinUris_1_2_0_canJoinUris=canNamespace_1_0_0_canNamespace.joinURIs=function(e,t){return t=canParseUri_1_2_0_canParseUri(t||""),e=canParseUri_1_2_0_canParseUri(e||""),t&&e?(t.protocol||e.protocol)+(t.protocol||t.authority?t.authority:e.authority)+function(e){var t=[];return e.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(e){"/.."===e?t.pop():t.push(e)}),t.join("").replace(/^\//,"/"===e.charAt(0)?"/":"")}(t.protocol||t.authority||"/"===t.pathname.charAt(0)?t.pathname:t.pathname?(e.authority&&!e.pathname?"/":"")+e.pathname.slice(0,e.pathname.lastIndexOf("/")+1)+t.pathname:e.pathname)+(t.protocol||t.authority||t.pathname?t.search:t.search||e.search)+t.hash:null};function noop$1(){}var resolveValue=noop$1,evaluateArgs=noop$1,__testing={};function debuggerHelper(){canLog_1_0_0_canLog.warn("Forgotten {{debugger}} helper")}debuggerHelper.requiresOptionsArgument=!0;var Debugger={helper:debuggerHelper,evaluateArgs:evaluateArgs,resolveValue:resolveValue,__testing:__testing},truthyObservable=function(e){return new canObservation_4_1_0_canObservation(function(){var t=canReflect_1_17_4_canReflect.getValue(e);return!!t})},canDomData_1_0_1_canDomData=createCommonjsModule(function(e){var t=function(e){for(var t in e)return!1;return!0},a=new WeakMap,n=function(e){var t=!1;return a.has(e)&&(t=!0,a.delete(e)),t};if(canNamespace_1_0_0_canNamespace.domData)throw new Error("You can't have two versions of can-dom-data, check your dependencies");else e.exports=canNamespace_1_0_0_canNamespace.domData={_data:a,get:function(e,t){var n=a.get(e);return t===void 0?n:n&&n[t]},set:function(e,t,n){var r=a.get(e);return void 0===r&&(r={},a.set(e,r)),void 0!==t&&(r[t]=n),r},clean:function(e,r){var s=a.get(e);s&&s[r]&&delete s[r],t(s)&&n(e)},delete:n}}),debuggerHelper$1=Debugger.helper,looksLikeOptions=function(e){return e&&"function"==typeof e.fn&&"function"==typeof e.inverse},resolve=function(e){return e&&canReflect_1_17_4_canReflect.isValueLike(e)?canReflect_1_17_4_canReflect.getValue(e):e},resolveHash=function(e){var t={};for(var a in e)t[a]=resolve(e[a]);return t},bindAndRead=function(e){return e&&canReflect_1_17_4_canReflect.isValueLike(e)?(canObservation_4_1_0_canObservation.temporarilyBind(e),canReflect_1_17_4_canReflect.getValue(e)):e},eachHelper=function(e){var t=[].slice.call(arguments),a=t.pop(),n=a.exprData.hashExprs,r=bindAndRead(e),s,o;if(0<canReflect_1_17_4_canReflect.size(n)&&(s={},canReflect_1_17_4_canReflect.eachKey(n,function(e,t){s[e.key]=t})),(canReflect_1_17_4_canReflect.isObservableLike(r)&&canReflect_1_17_4_canReflect.isListLike(r)||canReflect_1_17_4_canReflect.isListLike(r)&&canReflect_1_17_4_canReflect.isValueLike(e))&&!a.stringOnly)return a.metadata.rendered=!0,function(t){var n=[t];n.expression="live.list",canViewNodelist_4_3_2_canViewNodelist.register(n,null,a.nodeList,!0),canViewNodelist_4_3_2_canViewNodelist.update(a.nodeList,[t]);var r=function(e,t,n){var r={};return 0<canReflect_1_17_4_canReflect.size(s)&&(s.value&&(r[s.value]=e),s.index&&(r[s.index]=t)),a.fn(a.scope.add(r,{notContext:!0}).add({index:t},{special:!0}).add(e),a.options,n)};canViewLive_4_2_0_canViewLive.list(t,e,r,a.context,t.parentNode,n,function(e,t){return a.inverse(a.scope.add(e),a.options,t)})};var i=resolve(e),l;return!!i&&canReflect_1_17_4_canReflect.isListLike(i)?(l=utils$1.getItemsFragContent(i,a,a.scope),a.stringOnly?l.join(""):l):canReflect_1_17_4_canReflect.isObservableLike(i)&&canReflect_1_17_4_canReflect.isMapLike(i)||i instanceof Object?(l=[],canReflect_1_17_4_canReflect.each(i,function(e,t){var n=new keyObservable(i,t);o={},0<canReflect_1_17_4_canReflect.size(s)&&(s.value&&(o[s.value]=n),s.key&&(o[s.key]=t)),l.push(a.fn(a.scope.add(o,{notContext:!0}).add({key:t},{special:!0}).add(n)))}),a.stringOnly?l.join(""):l):void 0};eachHelper.isLiveBound=!0,eachHelper.requiresOptionsArgument=!0,eachHelper.ignoreArgLookup=function(e){return 1===e};var indexHelper=function(e,t){t||(t=e,e=0);var a=t.scope.peek("scope.index");return""+(("function"==typeof a?a():a)+e)};indexHelper.requiresOptionsArgument=!0;var ifHelper=function(e,t){var a;return a=e&&canReflect_1_17_4_canReflect.isValueLike(e)?canReflect_1_17_4_canReflect.getValue(new truthyObservable(e)):!!resolve(e),a?t.fn(t.scope||this):t.inverse(t.scope||this)};ifHelper.requiresOptionsArgument=!0;var isHelper=function(){function e(){for(var e=0;e<r.length-1;e++){if(n=resolve(r[e]),n="function"==typeof n?n():n,0<e&&n!==a)return!1;a=n}return!0}var t=arguments[arguments.length-1],a,n;if(2>=arguments.length)return t.inverse();var r=arguments,s=new canObservation_4_1_0_canObservation(e);return s.get()?t.fn():t.inverse()};isHelper.requiresOptionsArgument=!0;var unlessHelper=function(e,t){return ifHelper.apply(this,[e,canAssign_1_3_1_canAssign(canAssign_1_3_1_canAssign({},t),{fn:t.inverse,inverse:t.fn})])};unlessHelper.requiresOptionsArgument=!0;var withHelper=function(e,t){var a=e;return t?(e=resolve(e),t.hash&&0<canReflect_1_17_4_canReflect.size(t.hash)&&(a=t.scope.add(t.hash,{notContext:!0}).add(a))):(t=e,e=!0,a=t.hash),t.fn(a||{})};withHelper.requiresOptionsArgument=!0;var dataHelper=function(e,t){var a=(looksLikeOptions(t)?t.context:t)||this;return function(t){canDomDataState_1_0_2_canDomDataState.set.call(t,e,a)}},domDataHelper=function(e,t){var a=(looksLikeOptions(t)?t.context:t)||this;return function(t){canDomData_1_0_1_canDomData.set(t,e,a)}},switchHelper=function(e,t){resolve(e);var a=!1,n=function(t,n){if(!a&&resolve(e)===resolve(t))return a=!0,n.fn(n.scope.peek("this")||this)};n.requiresOptionsArgument=!0;var r=function(e){if(!a)return!e||e.scope.peek("this")};r.requiresOptionsArgument=!0,canReflect_1_17_4_canReflect.assignSymbols(r,{"can.isValueLike":!0,"can.isFunctionLike":!1,"can.getValue":function(){return this(t)}});var s=t.scope.add({case:n,default:r},{notContext:!0});return t.fn(s,t)};switchHelper.requiresOptionsArgument=!0;var joinBaseHelper=function(){var e=[].slice.call(arguments),t=e.pop(),a=e.map(function(e){var t=resolve(e);return"function"==typeof t?t():t}).join(""),n=canReflect_1_17_4_canReflect.getKeyValue(t.scope.templateContext.helpers,"module"),r=n?n.uri:void 0,s="."===a[0];if(s&&r)return canJoinUris_1_2_0_canJoinUris(r,a);var o="undefined"!=typeof System&&(System.renderingBaseURL||System.baseURL)||baseUrl();return"/"!==a[0]&&"/"!==o[o.length-1]&&(o+="/"),canJoinUris_1_2_0_canJoinUris(o,a)};joinBaseHelper.requiresOptionsArgument=!0;var builtInHelpers={debugger:debuggerHelper$1,each:eachHelper,eachOf:eachHelper,index:indexHelper,if:ifHelper,is:isHelper,eq:isHelper,unless:unlessHelper,with:withHelper,console:console,data:dataHelper,domData:domDataHelper,switch:switchHelper,joinBase:joinBaseHelper},addBuiltInHelpers=function(){canReflect_1_17_4_canReflect.each(builtInHelpers,function(e,t){canStacheHelpers_1_2_0_canStacheHelpers[t]=e})};addBuiltInHelpers();var registerHelper=function(e,t){t.requiresOptionsArgument=!0,canStacheHelpers_1_2_0_canStacheHelpers[e]=t},registerHelpers=function(e){var t,a;for(t in e)a=e[t],registerHelper(t,makeSimpleHelper(a))},makeSimpleHelper=function(e){return function(){var t=[];return canReflect_1_17_4_canReflect.eachIndex(arguments,function(e){for(;e&&e.isComputed;)e=e();t.push(e)}),e.apply(this,t)}},core$2={registerHelper:registerHelper,addHelper:function(e,t){return"object"==typeof e?registerHelpers(e):registerHelper(e,makeSimpleHelper(t))},addLiveHelper:function(e,t){return t.isLiveBound=!0,registerHelper(e,t)},getHelper:function(e,t){var a=t&&t.getHelper(e);return a||(a=canStacheHelpers_1_2_0_canStacheHelpers[e]),a},resolve:resolve,resolveHash:resolveHash,looksLikeOptions:looksLikeOptions,__resetHelpers:function(){for(var e in canStacheHelpers_1_2_0_canStacheHelpers)delete canStacheHelpers_1_2_0_canStacheHelpers[e];addBuiltInHelpers()}};function makeConverter(e){return e=e||{},function(t,a){var n=canReflect_1_17_4_canReflect.toArray(arguments);return t instanceof setIdentifier?"function"==typeof e.set?e.set.apply(this,[t.value].concat(n.slice(1))):a(t.value):"function"==typeof e.get?e.get.apply(this,n):n[0]}}var converterPackages=new WeakMap;core$2.addConverter=function(e,t){if("object"==typeof e)return void(converterPackages.has(e)||(converterPackages.set(e,!0),canReflect_1_17_4_canReflect.eachKey(e,function(e,t){core$2.addConverter(t,e)})));var a=makeConverter(t);a.isLiveBound=!0,core$2.registerHelper(e,a)},core$2.registerConverter=function(e,t){core$2.registerHelper(e,makeConverter(t))};var mustacheLineBreakRegExp$1=/(?:(^|\r?\n)(\s*)(\{\{([\s\S]*)\}\}\}?)([^\S\n\r]*)($|\r?\n))|(\{\{([\s\S]*)\}\}\}?)/g,mustacheWhitespaceRegExp$1=/(\s*)(\{\{\{?)(-?)([\s\S]*?)(-?)(\}\}\}?)(\s*)/g;function splitModeFromExpression$1(e,t){e=e.trim();var a=e.charAt(0);return 0<="#/{&^>!<".indexOf(a)?e=e.substr(1).trim():a=null,"{"===a&&t.node&&(a=null),{mode:a,expression:e}}function cleanLineEndings(e){return e.replace(mustacheLineBreakRegExp$1,function(e,t,a,n,r,s,o,i,l,d){s=s||"",t=t||"",a=a||"";var p=splitModeFromExpression$1(r||l,{});return i||0<=">{".indexOf(p.mode)?e:0<="^#!/".indexOf(p.mode)?(a=t+a&&" ",a+n+(0!==d&&o.length?t+"\n":"")):a+n+s+(a.length||0!==d?t+"\n":"")})}function whiteSpaceReplacement(e,t,a,n,r,s,o,i){return"-"===n&&(t=""),"-"===s&&(i=""),t+a+r+o+i}function cleanWhitespaceControl(e){return e.replace(mustacheWhitespaceRegExp$1,whiteSpaceReplacement)}var cleanLineEndings_1=cleanLineEndings,cleanWhitespaceControl_1=cleanWhitespaceControl,canStacheAst_1_0_0_controls={cleanLineEndings:cleanLineEndings_1,cleanWhitespaceControl:cleanWhitespaceControl_1},parse=function(e,t){function a(e){y&&(i[y]=h,y=""),u?s.push(h):r.push(h),o.push({specifier:h,loc:{line:e}})}1===arguments.length&&(t=arguments[0],e=void 0);var n=t;n=canStacheAst_1_0_0_controls.cleanWhitespaceControl(n),n=canStacheAst_1_0_0_controls.cleanLineEndings(n);var r=[],s=[],o=[],i={},l=!1,d=!1,p=!1,c=!1,u=!1,y="",h="",g=canViewParser_4_1_0_canViewParser(n,{filename:e,start:function(e,t){"can-import"===e?(c=t,u=!1,l=!0):"can-dynamic-import"===e?(c=t,u=!0,l=!0):l&&(u=!0,l=!1)},attrStart:function(e){"from"===e?d=!0:("as"==e||"export-as"==e)&&(p=!0)},attrEnd:function(e){"from"===e?d=!1:("as"==e||"export-as"==e)&&(p=!1)},attrValue:function(e){d&&l?h=e:p&&l&&(y=e)},end:function(e,t,n){("can-import"===e||"can-dynamic-import"===e)&&c&&a(n)},close:function(e,t,n){("can-import"===e||"can-dynamic-import"===e)&&a(n)},chars:function(e){0<e.trim().length&&(u=!0)},special:function(){u=!0}},!0);return{intermediate:g,program:g,imports:r,dynamicImports:s,importDeclarations:o,ases:i,exports:i}},canStacheAst_1_0_0_canStacheAst={parse:parse},canImportModule_1_2_0_canImportModule=canNamespace_1_0_0_canNamespace.import=function(e,t){return new Promise(function(a,n){try{var r=global_1();"object"==typeof r.System&&isFunction$1(r.System["import"])?r.System["import"](e,{name:t}).then(a,n):r.define&&r.define.amd?r.require([e],function(e){a(e)}):r.require?a(r.require(e)):"undefined"==typeof stealRequire?a():steal.import(e,{name:t}).then(a,n)}catch(e){n(e)}})};function isFunction$1(e){return"function"==typeof e}var getIntermediateAndImports=canStacheAst_1_0_0_canStacheAst.parse,makeRendererConvertScopes=utils$1.makeRendererConvertScopes,last$2=utils$1.last;canViewCallbacks_4_3_1_canViewCallbacks.tag("content")||canViewCallbacks_4_3_1_canViewCallbacks.tag("content",function(e,t){return t.scope});var svgNamespace="http://www.w3.org/2000/svg",namespaces={svg:"http://www.w3.org/2000/svg",g:"http://www.w3.org/2000/svg"},textContentOnlyTag={style:!0,script:!0};function stache(e,t){1===arguments.length&&(t=arguments[0],e=void 0);var a={};"string"==typeof t&&(t=mustache_core.cleanWhitespaceControl(t),t=mustache_core.cleanLineEndings(t));var n=new html_section(e),r={node:null,attr:null,sectionElementStack:[],text:!1,namespaceStack:[],textContentOnly:null},s=function(e,t,n,s){if(">"===t)e.add(mustache_core.makeLiveBindingPartialRenderer(n,i({filename:e.filename,lineNo:s})));else if("/"===t){var o=e.last();"<"===o.startedWith?(a[n]=e.endSubSectionAndReturnRenderer(),e.removeCurrentNode()):e.endSection(),e instanceof html_section&&r.sectionElementStack.pop()}else if("else"===t)e.inverse();else{var l=e instanceof html_section?mustache_core.makeLiveBindingBranchRenderer:mustache_core.makeStringBranchRenderer;if("{"===t||"&"===t)e.add(l(null,n,i({filename:e.filename,lineNo:s})));else if("#"===t||"^"===t||"<"===t){var d=l(t,n,i({filename:e.filename,lineNo:s}));e.startSection(d),e.last().startedWith=t,e instanceof html_section&&r.sectionElementStack.push({type:"section"})}else e.add(l(null,n,i({text:!0,filename:e.filename,lineNo:s})))}},o=function(){var e=r.sectionElementStack[r.sectionElementStack.length-1];return!r.sectionElementStack.length||"section"===e.type||"custom"===e.type},i=function(e){var t={tag:r.node&&r.node.tag,attr:r.attr&&r.attr.name,directlyNested:o(),textContentOnly:!!r.textContentOnly};return e?canAssign_1_3_1_canAssign(t,e):t},l=function(e,t){e.attributes||(e.attributes=[]),e.attributes.unshift(t)};canViewParser_4_1_0_canViewParser(t,{filename:e,start:function(e,t){var a=namespaces[e];a&&!t&&r.namespaceStack.push(a),r.node={tag:e,children:[],namespace:a||last$2(r.namespaceStack)}},end:function(e,t){var a=canViewCallbacks_4_3_1_canViewCallbacks.tag(e),s=o();t?(n.add(r.node),a&&l(r.node,function(t,a){canViewCallbacks_4_3_1_canViewCallbacks.tagHandler(this,e,{scope:t,subtemplate:null,templateType:"stache",parentNodeList:a,directlyNested:s})})):(n.push(r.node),r.sectionElementStack.push({type:a?"custom":null,tag:a?null:e,templates:{},directlyNested:s}),a?n.startSubSection():textContentOnlyTag[e]&&(r.textContentOnly=new text_section)),r.node=null},close:function(e){var t=namespaces[e];t&&r.namespaceStack.pop();var a=canViewCallbacks_4_3_1_canViewCallbacks.tag(e),s;a&&(s=n.endSubSectionAndReturnRenderer()),textContentOnlyTag[e]&&(n.last().add(r.textContentOnly.compile(i())),r.textContentOnly=null);var o=n.pop();if(a)if("can-template"===e){var d=r.sectionElementStack[r.sectionElementStack.length-2];s&&(d.templates[o.attrs.name]=makeRendererConvertScopes(s)),n.removeCurrentNode()}else{var p=r.sectionElementStack[r.sectionElementStack.length-1];l(o,function(t,a){canViewCallbacks_4_3_1_canViewCallbacks.tagHandler(this,e,{scope:t,subtemplate:s?makeRendererConvertScopes(s):s,templateType:"stache",parentNodeList:a,templates:p.templates,directlyNested:p.directlyNested})})}r.sectionElementStack.pop()},attrStart:function(e){r.node.section?r.node.section.add(e+"=\""):r.attr={name:e,value:""}},attrEnd:function(e){if(r.node.section)r.node.section.add("\" ");else{r.node.attrs||(r.node.attrs={}),r.node.attrs[r.attr.name]=r.attr.section?r.attr.section.compile(i()):r.attr.value;var t=canViewCallbacks_4_3_1_canViewCallbacks.attr(e);t&&(!r.node.attributes&&(r.node.attributes=[]),r.node.attributes.push(function(a,n){t(this,{attributeName:e,scope:a,nodeList:n})})),r.attr=null}},attrValue:function(e){var t=r.node.section||r.attr.section;t?t.add(e):r.attr.value+=e},chars:function(e){(r.textContentOnly||n).add(e)},special:function(e,t){var a=mustache_core.splitModeFromExpression(e,r),o=a.mode,l=a.expression;if("else"===l){var d;return d=r.attr&&r.attr.section?r.attr.section:r.node&&r.node.section?r.node.section:r.textContentOnly||n,void d.inverse()}if("!"!==o)if(r.node&&r.node.section)s(r.node.section,o,l,t),0===r.node.section.subSectionDepth()&&(r.node.attributes.push(r.node.section.compile(i())),delete r.node.section);else if(r.attr)r.attr.section||(r.attr.section=new text_section,r.attr.value&&r.attr.section.add(r.attr.value)),s(r.attr.section,o,l,t);else if(!r.node)s(r.textContentOnly||n,o,l,t);else if(r.node.attributes||(r.node.attributes=[]),!o)r.node.attributes.push(mustache_core.makeLiveBindingBranchRenderer(null,l,i({filename:n.filename,lineNo:t})));else if("#"===o||"^"===o)r.node.section||(r.node.section=new text_section),s(r.node.section,o,l,t);else throw new Error(o+" is currently not supported within a tag.")},comment:function(e){n.add({comment:e})},done:function(){}});var d=n.compile(),p=canObservationRecorder_1_2_0_canObservationRecorder.ignore(function(e,t,n){void 0===n&&canReflect_1_17_4_canReflect.isListLike(t)&&(n=t,t=void 0),!t||t.helpers||t.partials||t.tags||(t={helpers:t}),canReflect_1_17_4_canReflect.eachKey(t&&t.helpers,function(e){e.requiresOptionsArgument=!0});var r=new canViewScope_4_7_0_templateContext(t);if(canReflect_1_17_4_canReflect.eachKey(a,function(e,t){canReflect_1_17_4_canReflect.setKeyValue(r.partials,t,e)}),canReflect_1_17_4_canReflect.setKeyValue(r,"view",p),!(e instanceof canViewScope_4_7_0_canViewScope))e=new canViewScope_4_7_0_canViewScope(r).add(e);else{var s=new canViewScope_4_7_0_canViewScope(r);s._parent=e._parent,e._parent=s}return d(e,n)});return p}canAssign_1_3_1_canAssign(stache,core$2),stache.safeString=function(e){return{toString:function(){return e}}},stache.async=function(e){var t=getIntermediateAndImports(e),a=t.imports.map(function(e){return canImportModule_1_2_0_canImportModule(e)});return Promise.all(a).then(function(){return stache(t.intermediate)})};var templates={};stache.from=mustache_core.getTemplateById=function(e){if(!templates[e]){var t=document$1().getElementById(e);t&&(templates[e]=stache("#"+e,t.innerHTML))}return templates[e]},stache.registerPartial=function(e,t){templates[e]="string"==typeof t?stache(t):t},stache.addBindings=canViewCallbacks_4_3_1_canViewCallbacks.attrs;var canStache_4_10_5_canStache=canNamespace_1_0_0_canNamespace.stache=stache,viewModelSymbol=canSymbol_1_6_1_canSymbol.for("can.viewModel"),canViewModel_4_0_1_canViewModel=canNamespace_1_0_0_canNamespace.viewModel=function(e,t,a){if("string"==typeof e?e=document$1().querySelector(e):canReflect_1_17_4_canReflect.isListLike(e)&&!e.nodeType&&(e=e[0]),canReflect_1_17_4_canReflect.isObservableLike(t)&&canReflect_1_17_4_canReflect.isMapLike(t))return void(e[viewModelSymbol]=t);var n=e[viewModelSymbol];switch(n||(n=new canSimpleMap_4_2_0_canSimpleMap,e[viewModelSymbol]=n),arguments.length){case 0:case 1:return n;case 2:return canReflect_1_17_4_canReflect.getKeyValue(n,t);default:return canReflect_1_17_4_canReflect.setKeyValue(n,t,a),e;}},isDomEventTarget$2=util.isDomEventTarget,canEvent={on:function(e,t,a){isDomEventTarget$2(this)?canDomEvents_1_3_0_canDomEvents.addEventListener(this,e,t,a):canReflect_1_17_4_canReflect.onKeyValue(this,e,t,a)},off:function(e,t,a){isDomEventTarget$2(this)?canDomEvents_1_3_0_canDomEvents.removeEventListener(this,e,t,a):canReflect_1_17_4_canReflect.offKeyValue(this,e,t,a)},one:function e(t,a,n){var e=function(){return canEvent.off.call(this,t,e,n),a.apply(this,arguments)};return canEvent.on.call(this,t,e,n),this}},canAttributeObservable_1_1_2_event=canEvent,isRadioInput=function(e){return"input"===e.nodeName.toLowerCase()&&"radio"===e.type},isValidProp=function(e,t){return"checked"===e&&!t.legacyBindings},canAttributeObservable_1_1_2_getEventName=function(e,t,a){var n="change";return isRadioInput(e)&&isValidProp(t,a)&&(n="can-attribute-observable-radiochange"),canAttributeObservable_1_1_2_behaviors.findSpecialListener(t)&&(n=t),n};function getRoot(){return document$1().documentElement}function findParentForm(e){for(;e&&!("FORM"===e.nodeName);)e=e.parentNode;return e}function shouldReceiveEventFromRadio(e,t){var a=e.getAttribute("name");return a&&a===t.getAttribute("name")&&findParentForm(e)===findParentForm(t)}function isRadioInput$1(e){return"INPUT"===e.nodeName&&"radio"===e.type}function attachRootListener(e,t){var a=getRoot(),n=function(a){var n=a.target;if(isRadioInput$1(n))for(var r in t){var s={type:r},o=t[r];o.forEach(function(t){shouldReceiveEventFromRadio(n,t)&&e.dispatch(t,s,!1)})}};return e.addEventListener(a,"change",n),n}function detachRootListener(e,t){var a=getRoot();e.removeEventListener(a,"change",t)}var radioChangeEvent={defaultEventType:"radiochange",addEventListener:function(e,t,a){if(!isRadioInput$1(e))throw new Error("Listeners for "+t+" must be radio inputs");var n=radioChangeEvent._eventTypeTrackedRadios;n||(n=radioChangeEvent._eventTypeTrackedRadios={},!radioChangeEvent._rootListener&&(radioChangeEvent._rootListener=attachRootListener(this,n)));var r=radioChangeEvent._eventTypeTrackedRadios[t];r||(r=radioChangeEvent._eventTypeTrackedRadios[t]=new Set),r.add(e),e.addEventListener(t,a)},removeEventListener:function(e,t,a){e.removeEventListener(t,a);var n=radioChangeEvent._eventTypeTrackedRadios;if(n){var r=n[t];if(r&&(r.delete(e),0===r.size)){for(var s in delete n[t],n)if(n.hasOwnProperty(s))return;delete radioChangeEvent._eventTypeTrackedRadios,detachRootListener(this,radioChangeEvent._rootListener),delete radioChangeEvent._rootListener}}}},canEventDomRadiochange_2_2_0_canEventDomRadiochange=canNamespace_1_0_0_canNamespace.domEventRadioChange=radioChangeEvent,internalRadioChangeEventType="can-attribute-observable-radiochange";canDomEvents_1_3_0_canDomEvents.addEvent(canEventDomRadiochange_2_2_0_canEventDomRadiochange,internalRadioChangeEventType);var isSelect=function(e){return"select"===e.nodeName.toLowerCase()},isMultipleSelect=function(e,t){return isSelect(e)&&"value"===t&&e.multiple},slice$4=Array.prototype.slice;function canUtilAEL(){var e=slice$4.call(arguments,0);return e.unshift(this),canDomEvents_1_3_0_canDomEvents.addEventListener.apply(null,e)}function canUtilREL(){var e=slice$4.call(arguments,0);return e.unshift(this),canDomEvents_1_3_0_canDomEvents.removeEventListener.apply(null,e)}function AttributeObservable(e,t,a,n){this.el=e,this.bound=!1,this.bindingData=a,this.prop=isMultipleSelect(e,t)?"values":t,this.event=n||canAttributeObservable_1_1_2_getEventName(e,t,a),this.handler=this.handler.bind(this)}AttributeObservable.prototype=Object.create(settable.prototype),Object.assign(AttributeObservable.prototype,{constructor:AttributeObservable,get:function(){return canObservationRecorder_1_2_0_canObservationRecorder.isRecording()&&(canObservationRecorder_1_2_0_canObservationRecorder.add(this),!this.bound&&canObservation_4_1_0_canObservation.temporarilyBind(this)),canAttributeObservable_1_1_2_behaviors.get(this.el,this.prop)},set:function(e){var t=canAttributeObservable_1_1_2_behaviors.setAttrOrProp(this.el,this.prop,e);return t||(this.value=e),e},handler:function(e){var t=this.value,a=[];this.value=canAttributeObservable_1_1_2_behaviors.get(this.el,this.prop),this.value!==t&&(a=[this.handlers.getNode([]),this,[e,t]],canQueues_1_1_3_canQueues.enqueueByQueue.apply(canQueues_1_1_3_canQueues,a))},onBound:function(){var e=this;e.bound=!0,e._handler=function(t){e.handler(canAttributeObservable_1_1_2_behaviors.get(e.el,e.prop),t)},e.event===internalRadioChangeEventType&&canAttributeObservable_1_1_2_event.on.call(e.el,"change",e._handler);var t=canAttributeObservable_1_1_2_behaviors.findSpecialListener(e.prop);t&&(e._specialDisposal=t.call(e.el,e.prop,e._handler,canUtilAEL)),canAttributeObservable_1_1_2_event.on.call(e.el,e.event,e._handler),this.value=canAttributeObservable_1_1_2_behaviors.get(this.el,this.prop)},onUnbound:function(){var e=this;e.bound=!1,e.event===internalRadioChangeEventType&&canAttributeObservable_1_1_2_event.off.call(e.el,"change",e._handler),e._specialDisposal&&(e._specialDisposal.call(e.el,canUtilREL),e._specialDisposal=null),canAttributeObservable_1_1_2_event.off.call(e.el,e.event,e._handler)},valueHasDependencies:function(){return!0},getValueDependencies:function(){return{keyDependencies:new Map([[this.el,new Set([this.prop])]])}}}),canReflect_1_17_4_canReflect.assignSymbols(AttributeObservable.prototype,{"can.isMapLike":!1,"can.getValue":AttributeObservable.prototype.get,"can.setValue":AttributeObservable.prototype.set,"can.onValue":AttributeObservable.prototype.on,"can.offValue":AttributeObservable.prototype.off,"can.valueHasDependencies":AttributeObservable.prototype.hasDependencies,"can.getValueDependencies":AttributeObservable.prototype.getValueDependencies});var canAttributeObservable_1_1_2_canAttributeObservable=AttributeObservable,bindings=new Map,onMatchStr="on:",vmMatchStr="vm:",elMatchStr="el:",byMatchStr=":by:",toMatchStr=":to",fromMatchStr=":from",bindMatchStr=":bind",viewModelBindingStr="viewModel",attributeBindingStr="attribute",scopeBindingStr="scope",viewModelOrAttributeBindingStr="viewModelOrAttribute",throwOnlyOneTypeOfBindingError=function(){throw new Error("can-stache-bindings - you can not have contextual bindings ( this:from='value' ) and key bindings ( prop:from='value' ) on one element.")},checkBindingState=function(e,t){var a=t.parentToChild&&t.child===viewModelBindingStr;if(a){var n=t.childName;if(a&&("this"===n||"."===n)){if(e.isSettingViewModel||e.isSettingOnViewModel)throwOnlyOneTypeOfBindingError();else return{isSettingViewModel:!0,initialViewModelData:void 0};}else if(e.isSettingViewModel)throwOnlyOneTypeOfBindingError();else return{isSettingOnViewModel:!0,initialViewModelData:e.initialViewModelData}}else return e},behaviors={viewModel:function(e,t,a,n,r){var s=[],o={},l={},d=canAssign_1_3_1_canAssign({},n),p={isSettingOnViewModel:!1,isSettingViewModel:!1,initialViewModelData:n||{}},c=!1,u;if(canReflect_1_17_4_canReflect.each(e.attributes||[],function(a){var n=makeDataBinding(a,e,{templateType:t.templateType,scope:t.scope,getViewModel:function(){return u},attributeViewModelBindings:d,alreadyUpdatedChild:!0,nodeList:t.parentNodeList,favorViewModel:!0});if(n){var r=n.bindingInfo;if(p=checkBindingState(p,r),c=!0,r.parentToChild){var i=r.stickyParentToChild?canViewScope_4_7_0_makeComputeLike(n.parent):n.canBinding.parentValue;void 0!==i&&(p.isSettingViewModel?p.initialViewModelData=i:p.initialViewModelData[cleanVMName(r.childName,t.scope)]=i)}s.push(n.canBinding.start.bind(n.canBinding)),o[a.name]=n.canBinding.stop.bind(n.canBinding)}}),!r||c){u=a(p.initialViewModelData,c,p);for(var y=0,h=s.length;y<h;y++)s[y]();var g;return p.isSettingViewModel||(g=canDomMutate_1_2_1_canDomMutate.onNodeAttributeChange(e,function(a){var n=a.attributeName,r=e.getAttribute(n);o[n]&&o[n]();var s=l[n]&&l[n].parent===attributeBindingStr;if(null!==r||s){var i=makeDataBinding({name:n,value:r},e,{templateType:t.templateType,scope:t.scope,getViewModel:function(){return u},attributeViewModelBindings:d,initializeValues:!0,nodeList:t.parentNodeList});i&&(i.canBinding.start(),l[n]=i.bindingInfo,o[n]=i.canBinding.stop.bind(i.canBinding))}})),function(){for(var e in g&&(g(),g=void 0),o)o[e]()}}},data:function(e,t){if(!canDomDataState_1_0_2_canDomDataState.get.call(e,"preventDataBindings")){var a=canObservationRecorder_1_2_0_canObservationRecorder.ignore(function(){return r||(r=canViewModel_4_0_1_canViewModel(e))}),n=makeDataBinding({name:t.attributeName,value:e.getAttribute(t.attributeName),nodeList:t.nodeList},e,{templateType:t.templateType,scope:t.scope,getViewModel:a,syncChildWithParent:!1}),r,s,o,i;n.canBinding.start();var l=function(n){var r=n.attributeName,o=e.getAttribute(r);if(r===t.attributeName&&(s&&s(),null!==o)){var i=makeDataBinding({name:r,value:o},e,{templateType:t.templateType,scope:t.scope,getViewModel:a,initializeValues:!0,nodeList:t.nodeList,syncChildWithParent:!1});i&&(i.canBinding.start(),s=i.canBinding.stop.bind(i.canBinding)),s=i.onTeardown}},d=function(){s&&(s(),s=void 0),i&&(i(),i=void 0),o&&(o(),o=void 0)};t.nodeList&&canViewNodelist_4_3_2_canViewNodelist.register([],d,t.nodeList,!1),s=n.canBinding.stop.bind(n.canBinding),o=canDomMutate_1_2_1_canDomMutate.onNodeAttributeChange(e,l),i=canDomMutate_1_2_1_canDomMutate.onNodeRemoval(e,function(){!1===e.ownerDocument.contains(e)&&d()})}},event:function(e,t){var a=canAttributeEncoder_1_1_0_canAttributeEncoder.decode(t.attributeName),n,r;if(-1!==a.indexOf(toMatchStr+":")||-1!==a.indexOf(fromMatchStr+":")||-1!==a.indexOf(bindMatchStr+":"))return this.data(e,t);if(startsWith.call(a,onMatchStr)){n=a.substr(onMatchStr.length);var s=e[canSymbol_1_6_1_canSymbol.for("can.viewModel")],o=t.scope;if(startsWith.call(n,elMatchStr))n=n.substr(elMatchStr.length),r=e;else{startsWith.call(n,vmMatchStr)?(n=n.substr(vmMatchStr.length),r=s,o=s):r=s||e;var i=n.indexOf(byMatchStr);0<=i&&(r=o.get(n.substr(i+byMatchStr.length)),n=n.substr(0,i))}}else throw new Error("can-stache-bindings - unsupported event bindings "+a);var l=function(n){var r=e.getAttribute(canAttributeEncoder_1_1_0_canAttributeEncoder.encode(a));if(r){var s=canViewModel_4_0_1_canViewModel(e),o=expression_1.parse(r,{lookupRule:function(){return expression_1.Lookup},methodRule:"call"});if(!(o instanceof expression_1.Call))throw new Error("can-stache-bindings: Event bindings must be a call expression. Make sure you have a () in "+t.attributeName+"="+JSON.stringify(r));var i={element:e,event:n,viewModel:s,arguments:arguments},l=t.scope.add(i,{special:!0}),d=function(){var t=o.value(l,{doNotWrapInObservation:!0});return t=canReflect_1_17_4_canReflect.isValueLike(t)?canReflect_1_17_4_canReflect.getValue(t):t,"function"==typeof t?t(e):t};canQueues_1_1_3_canQueues.batch.start();var p=[];p=[d,null,null,{}],canQueues_1_1_3_canQueues.mutateQueue.enqueue.apply(canQueues_1_1_3_canQueues.mutateQueue,p),canQueues_1_1_3_canQueues.batch.stop()}},d=function(){canAttributeObservable_1_1_2_event.off.call(r,n,l),p&&(p(),p=void 0),c&&(c(),c=void 0)},p,c;canAttributeObservable_1_1_2_event.on.call(r,n,l),p=canDomMutate_1_2_1_canDomMutate.onNodeAttributeChange(e,function(t){var n=t.attributeName===a,r=!e.getAttribute(a);n&&r&&d()}),c=canDomMutate_1_2_1_canDomMutate.onNodeRemoval(e,function(){e.ownerDocument.contains(e)||d()})}};bindings.set(/[\w\.:]+:to$/,behaviors.data),bindings.set(/[\w\.:]+:from$/,behaviors.data),bindings.set(/[\w\.:]+:bind$/,behaviors.data),bindings.set(/[\w\.:]+:raw$/,behaviors.data),bindings.set(/[\w\.:]+:to:on:[\w\.:]+/,behaviors.data),bindings.set(/[\w\.:]+:from:on:[\w\.:]+/,behaviors.data),bindings.set(/[\w\.:]+:bind:on:[\w\.:]+/,behaviors.data),bindings.set(/on:[\w\.:]+/,behaviors.event);var getObservableFrom={viewModelOrAttribute:function(e){var t=e[canSymbol_1_6_1_canSymbol.for("can.viewModel")];return t?this.viewModel.apply(this,arguments):this.attribute.apply(this,arguments)},scope:function(e,t,a,n,r){if(!a)return new canSimpleObservable_2_2_0_canSimpleObservable;if(r||0<=a.indexOf("(")){var s=expression_1.parse(a,{baseMethodType:"Call"});return s.value(t)}var o={};canReflect_1_17_4_canReflect.assignSymbols(o,{"can.getValue":function(){},"can.valueHasDependencies":function(){return!1},"can.setValue":function(e){t.set(cleanVMName(a,t),e)},"can.getWhatIChange":function(){var e=t.getDataForScopeSet(cleanVMName(a,t));return{mutate:{keyDependencies:new Map([[e.parent,new Set([e.key])]])}}},"can.getName":function(){}});var i=t.getDataForScopeSet(cleanVMName(a,t));return i.parent&&i.key&&canReflectDependencies_1_1_0_canReflectDependencies.addMutatedBy(i.parent,i.key,o),o},viewModel:function(e,t,a,n,r,s){var o=cleanVMName(a,t),i="."===a||"this"===a,l=i?[]:canStacheKey_1_4_0_canStacheKey.reads(a),d=new setter(function(){var e=n.getViewModel();return canStacheKey_1_4_0_canStacheKey.read(e,l,{}).value},function(e){var t=n.getViewModel();if(s){var a=canReflect_1_17_4_canReflect.getKeyValue(t,o);canReflect_1_17_4_canReflect.isObservableLike(a)?canReflect_1_17_4_canReflect.setValue(a,e):canReflect_1_17_4_canReflect.setKeyValue(t,o,new canSimpleObservable_2_2_0_canSimpleObservable(canReflect_1_17_4_canReflect.getValue(s)))}else i?canReflect_1_17_4_canReflect.setValue(t,e):canReflect_1_17_4_canReflect.setKeyValue(t,o,e)});return d},attribute:function(e,t,a,n,r,s,o){return new canAttributeObservable_1_1_2_canAttributeObservable(e,a,n,o)}},startsWith=String.prototype.startsWith||function(e){return 0===this.indexOf(e)};function getEventName(e){if(e.special.on!==void 0)return e.tokens[e.special.on+1]}var bindingRules={to:{childToParent:!0,parentToChild:!1,syncChildWithParent:!1},from:{childToParent:!1,parentToChild:!0,syncChildWithParent:!1},bind:{childToParent:!0,parentToChild:!0,syncChildWithParent:!0},raw:{childToParent:!1,parentToChild:!0,syncChildWithParent:!1}},bindingNames=[],special$1={vm:!0,on:!0};canReflect_1_17_4_canReflect.each(bindingRules,function(e,t){bindingNames.push(t),special$1[t]=!0});function tokenize(e){var t=e.split(":"),a={tokens:[],special:{}};return t.forEach(function(e){special$1[e]?a.special[e]=a.tokens.push(e)-1:a.tokens.push(e)}),a}var getChildBindingStr=function(e,t){return 0<=e.indexOf("vm")?viewModelBindingStr:0<=e.indexOf("el")?attributeBindingStr:t?viewModelBindingStr:viewModelOrAttributeBindingStr},getBindingInfo=function(e,t,a,n,r){var s=canAttributeEncoder_1_1_0_canAttributeEncoder.decode(e.name),o=e.value||"",i=tokenize(s),l,d,p;if(bindingNames.forEach(function(e){if(void 0!==i.special[e]&&0<i.special[e])return d=e,p=i.special[e],!1}),d){var c=getEventName(i),u=!(c&&"bind"!==d);return l=canAssign_1_3_1_canAssign({parent:scopeBindingStr,child:getChildBindingStr(i.tokens,r),childName:i.tokens[p-1],childEvent:c,bindingAttributeName:s,parentName:i.special.raw?"\""+o+"\"":o,initializeValues:u},bindingRules[d]),"~"===o.trim().charAt(0)&&(l.stickyParentToChild=!0),l}},makeDataBinding=function(e,t,a){var n=getBindingInfo(e,a.attributeViewModelBindings,a.templateType,t.nodeName.toLowerCase(),a.favorViewModel);if(n){var r=getObservableFrom[n.parent](t,a.scope,n.parentName,a,n.parentToChild,void 0,void 0,n),s=getObservableFrom[n.child](t,a.scope,n.childName,a,n.childToParent,n.stickyParentToChild&&r,n.childEvent,n),o=!!n.childToParent,i=!!n.parentToChild,l={child:s,childToParent:o,cycles:0,onInitDoNotUpdateChild:a.alreadyUpdatedChild,onInitSetUndefinedParentIfChildIsDefined:!0,parent:r,parentToChild:i,priority:a.nodeList?a.nodeList.nesting+1:void 0,queue:"domUI",sticky:n.syncChildWithParent?"childSticksToParent":void 0},d=new canBind_1_0_0_canBind(l);return d.startParent(),{bindingInfo:n,canBinding:d,parent:r}}},cleanVMName=function(e){return e.replace(/@/g,"")},canStacheBindings={behaviors:behaviors,getBindingInfo:getBindingInfo,bindings:bindings};canStacheBindings[canSymbol_1_6_1_canSymbol.for("can.callbackMap")]=bindings,canViewCallbacks_4_3_1_canViewCallbacks.attrs(canStacheBindings);var canStacheBindings_4_4_0_canStacheBindings=canStacheBindings,createdByCanComponentSymbol=canSymbol_1_6_1_canSymbol("can.createdByCanComponent"),getValueSymbol$3=canSymbol_1_6_1_canSymbol.for("can.getValue"),setValueSymbol$4=canSymbol_1_6_1_canSymbol.for("can.setValue"),viewInsertSymbol$2=canSymbol_1_6_1_canSymbol.for("can.viewInsert"),viewModelSymbol$1=canSymbol_1_6_1_canSymbol.for("can.viewModel");canStache_4_10_5_canStache.addBindings(canStacheBindings_4_4_0_canStacheBindings);function addContext(e,t,a){var n;canDomDataState_1_0_2_canDomDataState.set.call(e,"preventDataBindings",!0);var r=canStacheBindings_4_4_0_canStacheBindings.behaviors.viewModel(e,a,function(e,t,a){return a&&!0===a.isSettingOnViewModel?n=new canSimpleMap_4_2_0_canSimpleMap(e):n=new canSimpleObservable_2_2_0_canSimpleObservable(e)},void 0,!0);return r?canAssign_1_3_1_canAssign(canAssign_1_3_1_canAssign({},t),{teardown:r,scope:t.scope.add(n)}):t}function makeInsertionTagCallback(e,t,a,n,r){var s=a.options;return function a(o,i){var l=r(o)||i.subtemplate,d=l!==i.subtemplate;if(l){delete s.tags[e];var p=d?n.toLightContent?addContext(o,{scope:i.scope.cloneFromRef(),options:i.options},i):addContext(o,t,i):addContext(o,i,i);var c=canViewNodelist_4_3_2_canViewNodelist.register([o],function(){p.teardown&&p.teardown()},i.parentNodeList||!0,i.directlyNested);c.expression="<can-slot name='"+o.getAttribute("name")+"'/>";var u=l(p.scope,p.options,c),y=canReflect_1_17_4_canReflect.toArray(canChildNodes_1_2_0_canChildNodes(u)),h=canViewNodelist_4_3_2_canViewNodelist.update(c,y);canViewNodelist_4_3_2_canViewNodelist.replace(h,u),s.tags[e]=a}}}function getSetupFunctionForComponentVM(e){return function(t,a,n){var r=[],s=[],o;canReflect_1_17_4_canReflect.eachKey(e,function(e,t){var a=null!=e&&!!e[getValueSymbol$3],i=null!=e&&!!e[setValueSymbol$4];if(!0==a||i){var l=canStacheKey_1_4_0_canStacheKey.reads(t),d=new setter(function(){return canStacheKey_1_4_0_canStacheKey.read(o,l).value},function(e){canReflect_1_17_4_canReflect.setKeyValue(o,t,e)}),p=new canBind_1_0_0_canBind({child:d,parent:e,queue:"domUI"});p.startParent(),!0==a&&(n[t]=p.parentValue),r.push(p.start.bind(p)),s.push(p.stop.bind(p))}else n[t]=e}),o=a(n);for(var l=0,d=r.length;l<d;l++)r[l]();return function(){s.forEach(function(e){e()})}}}var Component=canConstruct_3_5_1_canConstruct.extend({setup:function(){if(canConstruct_3_5_1_canConstruct.setup.apply(this,arguments),Component){var e=this;void 0!==this.prototype.events&&0!==canReflect_1_17_4_canReflect.size(this.prototype.events)&&(this.Control=control.extend(this.prototype.events));var t=this.prototype.viewModel||this.prototype.scope;if(t&&this.prototype.ViewModel)throw new Error("Cannot provide both a ViewModel and a viewModel property");var a=canString_1_0_0_canString.capitalize(canString_1_0_0_canString.camelize(this.prototype.tag))+"VM";if(this.prototype.ViewModel?"function"==typeof this.prototype.ViewModel?this.ViewModel=this.prototype.ViewModel:this.ViewModel=map$2.extend(a,{},this.prototype.ViewModel):t?"function"==typeof t?canReflect_1_17_4_canReflect.isObservableLike(t.prototype)&&canReflect_1_17_4_canReflect.isMapLike(t.prototype)?this.ViewModel=t:this.viewModelHandler=t:canReflect_1_17_4_canReflect.isObservableLike(t)&&canReflect_1_17_4_canReflect.isMapLike(t)?this.viewModelInstance=t:(canLog_1_0_0_canLog.warn("can-component: "+this.prototype.tag+" is extending the viewModel into a can-simple-map"),this.ViewModel=canSimpleMap_4_2_0_canSimpleMap.extend(a,{},t)):this.ViewModel=canSimpleMap_4_2_0_canSimpleMap.extend(a,{},{}),this.prototype.template&&(this.renderer=this.prototype.template),this.prototype.view&&(this.renderer=this.prototype.view),"string"==typeof this.renderer){var n=canString_1_0_0_canString.capitalize(canString_1_0_0_canString.camelize(this.prototype.tag))+"View";this.renderer=canStache_4_10_5_canStache(n,this.renderer)}canViewCallbacks_4_3_1_canViewCallbacks.tag(this.prototype.tag,function(t,a){void 0===t[createdByCanComponentSymbol]&&new e(t,a)})}}},{setup:function(e,t){this._initialArgs=[e,t];var a=this,n={helpers:{},tags:{}};void 0===t&&(void 0===e?t={}:(t=e,e=void 0)),void 0===e&&(e=document$1().createElement(this.tag),e[createdByCanComponentSymbol]=!0),this.element=e;var r=t.content;void 0!==r&&("function"==typeof r?t.subtemplate=r:"string"==typeof r&&(t.subtemplate=canStache_4_10_5_canStache(r)));var s=t.scope;void 0!==s&&!1==s instanceof canViewScope_4_7_0_canViewScope&&(t.scope=new canViewScope_4_7_0_canViewScope(s));var o=t.templates;void 0!==o&&canReflect_1_17_4_canReflect.eachKey(o,function(e,t){if("string"==typeof e){o[t]=canStache_4_10_5_canStache(t+" template",e)}});var l=[],i=function(){for(var e=0,t=l.length;e<t;e++)l[e]()},d=canDomDataState_1_0_2_canDomDataState.get.call(e,"preventDataBindings"),p,c,u;if(d)p=e[viewModelSymbol$1];else{var y;y=t.setupBindings?t.setupBindings:t.viewModel?getSetupFunctionForComponentVM(t.viewModel):function(e,a,n){return canStacheBindings_4_4_0_canStacheBindings.behaviors.viewModel(e,t,a,n)},u=y(e,function(n){var r=a.constructor.ViewModel,s=a.constructor.viewModelHandler,o=a.constructor.viewModelInstance;if(s){var i=s.call(a,n,t.scope,e);canReflect_1_17_4_canReflect.isObservableLike(i)&&canReflect_1_17_4_canReflect.isMapLike(i)?o=i:canReflect_1_17_4_canReflect.isObservableLike(i.prototype)&&canReflect_1_17_4_canReflect.isMapLike(i.prototype)?r=i:r=canSimpleMap_4_2_0_canSimpleMap.extend(i)}return r&&(o=new a.constructor.ViewModel(n)),p=o,o},{})}if(this.viewModel=p,e[viewModelSymbol$1]=p,e.viewModel=p,canDomDataState_1_0_2_canDomDataState.set.call(e,"preventDataBindings",!0),void 0!==this.helpers&&canReflect_1_17_4_canReflect.eachKey(this.helpers,function(e,t){"function"==typeof e&&(n.helpers[t]=e.bind(p))}),this.constructor.Control)this._control=new this.constructor.Control(e,{scope:this.viewModel,viewModel:this.viewModel,destroy:i});else var h=canDomMutate_1_2_1_canDomMutate.onNodeRemoval(e,function(){e.ownerDocument.contains(e)||(h(),i())});var g={toLightContent:!0===this.leakScope,intoShadowContent:!0===this.leakScope},m=!!this.constructor.renderer,f,b;if(m){var v;v=g.intoShadowContent?{scope:t.scope.add(this.viewModel,{viewModel:!0}),options:n}:{scope:new canViewScope_4_7_0_canViewScope(this.viewModel,null,{viewModel:!0}),options:n},n.tags["can-slot"]=makeInsertionTagCallback("can-slot",t,v,g,function(e){var a=t.templates;if(a)return a[e.getAttribute("name")]}),n.tags.content=makeInsertionTagCallback("content",t,v,g,function(){return t.subtemplate}),f=this.constructor.renderer,b=v}else{var k={scope:t.scope.add(this.viewModel,{viewModel:!0}),options:n};b=k,f=t.subtemplate||e.ownerDocument.createDocumentFragment.bind(e.ownerDocument)}var L=canViewNodelist_4_3_2_canViewNodelist.register([],function(){a._torndown=!0,canDomEvents_1_3_0_canDomEvents.dispatch(e,"beforeremove",!1),u&&u(),S?S(e):"function"==typeof p.stopListening&&p.stopListening()},t.parentNodeList||!0,!1),S,E;if(L.expression="<"+this.tag+">",l.push(function(){canViewNodelist_4_3_2_canViewNodelist.unregister(L)}),this.nodeList=L,c=f(b.scope,b.options,L),canDomMutate_1_2_1_node.appendChild.call(e,c),canViewNodelist_4_3_2_canViewNodelist.update(L,canChildNodes_1_2_0_canChildNodes(e)),p&&p.connectedCallback)if(E=document$1().body.contains(e),E)S=p.connectedCallback(e);else var V=canDomMutate_1_2_1_canDomMutate.onNodeInsertion(e,function(){V(),S=p.connectedCallback(e)});a._torndown=!1}});Component.prototype[viewInsertSymbol$2]=function(e){return this._torndown&&this.setup.apply(this,this._initialArgs),e.nodeList.newDeepChildren.push(this.nodeList),this.element};var canComponent_4_4_2_canComponent=canNamespace_1_0_0_canNamespace.Component=Component,Compute$1=function(e){return arguments.length?canReflect_1_17_4_canReflect.setValue(this,e):canReflect_1_17_4_canReflect.getValue(this)},translationHelpers=new WeakMap,makeCompute=function(e){var t=Compute$1.bind(e);return t.on=t.bind=t.addEventListener=function(a,n){var r=translationHelpers.get(n);r||(r=function(e,a){n.call(t,{type:"change"},e,a)},translationHelpers.set(n,r)),canReflect_1_17_4_canReflect.onValue(e,r)},t.off=t.unbind=t.removeEventListener=function(t,a){canReflect_1_17_4_canReflect.offValue(e,translationHelpers.get(a))},canReflect_1_17_4_canReflect.assignSymbols(t,{"can.getValue":function(){return canReflect_1_17_4_canReflect.getValue(e)},"can.setValue":function(t){return canReflect_1_17_4_canReflect.setValue(e,t)},"can.onValue":function(t,a){return canReflect_1_17_4_canReflect.onValue(e,t,a)},"can.offValue":function(t,a){return canReflect_1_17_4_canReflect.offValue(e,t,a)},"can.valueHasDependencies":function(){return canReflect_1_17_4_canReflect.valueHasDependencies(e)},"can.getPriority":function(){return canReflect_1_17_4_canReflect.getPriority(e)},"can.setPriority":function(t){canReflect_1_17_4_canReflect.setPriority(e,t)},"can.isValueLike":!0,"can.isFunctionLike":!1}),t.isComputed=!0,t},urlDataObservable=new canSimpleObservable_2_2_0_canSimpleObservable(null),bindingProxy={defaultBinding:null,urlDataObservable:urlDataObservable,bindings:{},call:function(){var e=canReflect_1_17_4_canReflect.toArray(arguments),t=e.shift(),a=urlDataObservable.value;if(null===a)throw new Error("there is no current binding!!!");var n=a[0===t.indexOf("can.")?canSymbol_1_6_1_canSymbol.for(t):t];return n.apply?n.apply(a,e):n}},bindingProxy_1=bindingProxy,regexps={curlies:/\{\s*([\w.]+)\s*\}/g,colon:/\:([\w.]+)/g},map$3=function(e,t){var a=[],n;for(var r in n=canReflect_1_17_4_canReflect.assignMap({},e),canReflect_1_17_4_canReflect.eachKey(t,function(r,s){e&&e.hasOwnProperty(s)?t[s]!==e[s]&&a.push({key:s,type:"set",value:r}):a.push({key:s,type:"add",value:r}),delete n[s]}),n)a.push({key:r,type:"delete"});return a},removeBackslash=function(e){return e.replace(/\\/g,"")},wrapQuote=function(e){return(e+"").replace(/([.?*+\^$\[\]\\(){}|\-])/g,"\\$1")},RouteRegistry={routes:{},register:function(e,t){var a=bindingProxy_1.call("root");a.lastIndexOf("/")===a.length-1&&0===e.indexOf("/")&&(e=e.substr(1)),t=t||{};var n=[],r="",s=bindingProxy_1.call("querySeparator"),o=bindingProxy_1.call("matchSlashes"),i,l,d,p;for(l=regexps.colon.test(e)?regexps.colon:regexps.curlies,d=l.lastIndex=0;i=l.exec(e);)n.push(i[1]),r+=removeBackslash(e.substring(d,l.lastIndex-i[0].length)),p="\\"+(removeBackslash(e.substr(l.lastIndex,1))||s+(o?"":"|/")),r+="([^"+p+"]"+(t[i[1]]?"*":"+")+")",d=l.lastIndex;return r+=e.substr(d).replace("\\",""),RouteRegistry.routes[e]={test:new RegExp("^"+r+"($|"+wrapQuote(s)+")"),route:e,names:n,defaults:t,length:e.split("/").length}}},register=RouteRegistry,digitTest=/^\d+$/,keyBreaker=/([^\[\]]+)|(\[\])/g,paramTest=/([^?#]*)(#.*)?$/,entityRegex=/%([^0-9a-f][0-9a-f]|[0-9a-f][^0-9a-f]|[^0-9a-f][^0-9a-f])/i,prep=function(t){t=t.replace(/\+/g," ");try{return decodeURIComponent(t)}catch(a){return decodeURIComponent(t.replace(entityRegex,function(e,t){return"%25"+t}))}};function isArrayLikeName(e){return digitTest.test(e)||"[]"===e}function idenity(e){return e}var canDeparam_1_2_0_canDeparam=canNamespace_1_0_0_canNamespace.deparam=function(e,t){t=t||idenity;var a={},n,r;return e&&paramTest.test(e)&&(n=e.split("&"),n.forEach(function(e){var n=e.split("="),s=prep(n.shift()),o=prep(n.join("=")),i=a;if(s){n=s.match(keyBreaker);for(var d=0,p=n.length-1;d<p;d++){var l=n[d],c=n[d+1],u=isArrayLikeName(l)&&i instanceof Array;i[l]||(u?i.push(isArrayLikeName(c)?[]:{}):i[l]=isArrayLikeName(c)?[]:{}),i=u?i[i.length-1]:i[l]}r=n.pop(),isArrayLikeName(r)?i.push(t(o)):i[r]=t(o)}})),a},decode=function(e){try{return decodeURIComponent(e)}catch(t){return unescape(e)}};function toURLFragment(e){var t=bindingProxy_1.call("root");return t.lastIndexOf("/")===t.length-1&&0===e.indexOf("/")&&(e=e.substr(1)),e}function canRoute_getRule(e){e=toURLFragment(e);var t={length:-1};if(canReflect_1_17_4_canReflect.eachKey(register.routes,function(a){a.test.test(e)&&a.length>t.length&&(t=a)}),-1<t.length)return t}function canRoute_deparam(e){var t=canRoute_getRule(e),a=bindingProxy_1.call("querySeparator"),n=bindingProxy_1.call("paramsMatcher");if(e=toURLFragment(e),t){var r=e.match(t.test),s=r.shift(),o=e.substr(s.length-(r[r.length-1]===a?1:0)),l=o&&n.test(o)?canDeparam_1_2_0_canDeparam(o.slice(1)):{};return l=canReflect_1_17_4_canReflect.assignDeep(canReflect_1_17_4_canReflect.assignDeep({},t.defaults),l),r.forEach(function(e,n){e&&e!==a&&(l[t.names[n]]=decode(e))}),l}return e.charAt(0)!==a&&(e=a+e),n.test(e)?canDeparam_1_2_0_canDeparam(e.slice(1)):{}}canRoute_deparam.getRule=canRoute_getRule;var deparam_1=canRoute_deparam;function buildParam(e,t,a){if(Array.isArray(t))for(var n=0,r=t.length;n<r;++n)buildParam(e+"[]",t[n],a);else if(t&&"object"==typeof t)for(var s in t)buildParam(e+"["+s+"]",t[s],a);else a(e,t)}var canParam_1_1_0_canParam=canNamespace_1_0_0_canNamespace.param=function(e){var t=[],a=function(e,a){t.push(encodeURIComponent(e)+"="+encodeURIComponent(a))};for(var n in e)buildParam(n,e[n],a);return t.join("&").replace(/%20/g,"+")},matchesData=function(e,t){var a=0,n=0,r={};for(var s in e.defaults)e.defaults[s]===t[s]&&(r[s]=1,a++);for(;n<e.names.length;n++){if(!t.hasOwnProperty(e.names[n]))return-1;r[e.names[n]]||a++}return a};function getMatchedRoute(e,t){var a=0,n=0,r,s;return delete e.route,canReflect_1_17_4_canReflect.eachKey(e,function(){n++}),canReflect_1_17_4_canReflect.eachKey(register.routes,function(t){if(s=matchesData(t,e),s>a&&(r=t,a=s),s>=n)return!1}),register.routes[t]&&matchesData(register.routes[t],e)===a&&(r=register.routes[t]),r}function paramFromRoute(e,t){var a,n,r,s;return e?(a=canReflect_1_17_4_canReflect.assignMap({},t),s=regexps.colon.test(e.route)?regexps.colon:regexps.curlies,n=e.route.replace(s,function(n,r){return delete a[r],t[r]===e.defaults[r]?"":encodeURIComponent(t[r])}).replace("\\",""),canReflect_1_17_4_canReflect.eachKey(e.defaults,function(e,t){a[t]===e&&delete a[t]}),r=canParam_1_1_0_canParam(a),n+(r?bindingProxy_1.call("querySeparator")+r:"")):0===canReflect_1_17_4_canReflect.size(t)?"":bindingProxy_1.call("querySeparator")+canParam_1_1_0_canParam(t)}function canRoute_param(e,t){return paramFromRoute(getMatchedRoute(e,t),e)}var param_1=canRoute_param;canRoute_param.paramFromRoute=paramFromRoute,canRoute_param.getMatchedRoute=getMatchedRoute;var makeProps=function(e){var t=[];return canReflect_1_17_4_canReflect.eachKey(e,function(e,a){t.push(("className"===a?"class":a)+"=\""+("href"===a?e:canString_1_0_0_canString.esc(e))+"\"")}),t.join(" ")},matchCheck=function(e,t){for(var a in e){var n=e[a],r=t[a];if(n&&r&&"object"==typeof n&&"object"==typeof t)return matchCheck(n,r);if(n!=r)return!1}return!0};function canRoute_url(e,t){if(t){var a=deparam_1(bindingProxy_1.call("can.getValue"));e=canReflect_1_17_4_canReflect.assignMap(canReflect_1_17_4_canReflect.assignMap({},a),e)}return bindingProxy_1.call("root")+param_1(e)}var urlHelpers={url:canRoute_url,link:function(e,t,a,n){return"<a "+makeProps(canReflect_1_17_4_canReflect.assignMap({href:canRoute_url(t,n)},a))+">"+e+"</a>"},isCurrent:function(e,t){if(t){var a=deparam_1(bindingProxy_1.call("can.getValue"));return matchCheck(e,a)}return bindingProxy_1.call("can.getValue")===param_1(e)}},paramsMatcher=/^(?:&[^=]+=[^&]*)+/;function getHash(){var e=location();return e.href.split(/#!?/)[1]||""}function HashchangeObservable(){var e=this.dispatchHandlers.bind(this),t=this;this._value="",this.handlers=new canKeyTree_1_2_0_canKeyTree([Object,Array],{onFirst:function(){t._value=getHash(),canDomEvents_1_3_0_canDomEvents.addEventListener(window,"hashchange",e)},onEmpty:function(){canDomEvents_1_3_0_canDomEvents.removeEventListener(window,"hashchange",e)}})}HashchangeObservable.prototype=Object.create(canSimpleObservable_2_2_0_canSimpleObservable.prototype),HashchangeObservable.constructor=HashchangeObservable,canReflect_1_17_4_canReflect.assign(HashchangeObservable.prototype,{paramsMatcher:paramsMatcher,querySeparator:"&",matchSlashes:!1,root:"#!",dispatchHandlers:function(){var e=this._value;this._value=getHash(),e!==this._value&&canQueues_1_1_3_canQueues.enqueueByQueue(this.handlers.getNode([]),this,[this._value,e])},get:function(){return canObservationRecorder_1_2_0_canObservationRecorder.add(this),getHash()},set:function(e){var t=location();return(e||t.hash)&&(t.hash==="#"+e||(t.hash="!"+e)),e}}),Object.defineProperty(HashchangeObservable.prototype,"value",{get:function(){return canReflect_1_17_4_canReflect.getValue(this)},set:function(e){canReflect_1_17_4_canReflect.setValue(this,e)}}),canReflect_1_17_4_canReflect.assignSymbols(HashchangeObservable.prototype,{"can.getValue":HashchangeObservable.prototype.get,"can.setValue":HashchangeObservable.prototype.set,"can.onValue":HashchangeObservable.prototype.on,"can.offValue":HashchangeObservable.prototype.off,"can.isMapLike":!1,"can.valueHasDependencies":function(){return!0}});var canRouteHash_1_0_1_canRouteHash=HashchangeObservable,funcConstructor=Function;canGlobals_1_2_0_canGlobalsInstance.define("isWebWorker",function(){var e=funcConstructor("return this")();return"undefined"!=typeof WorkerGlobalScope&&e instanceof WorkerGlobalScope});var isWebWorker=canGlobals_1_2_0_canGlobalsInstance.makeExport("isWebWorker"),hashchangeObservable=new canRouteHash_1_0_1_canRouteHash;bindingProxy_1.bindings.hashchange=hashchangeObservable,bindingProxy_1.defaultBinding="hashchange",bindingProxy_1.urlDataObservable.value=hashchangeObservable;function canRoute(e,t){return register.register(e,t),canRoute}var currentRuleObservable=new canObservation_4_1_0_canObservation(function(){var e=bindingProxy_1.call("can.getValue");return canRoute.rule(e)}),timer;function updateUrl(){clearTimeout(timer),timer=setTimeout(function(){var e=canReflect_1_17_4_canReflect.serialize(canRoute.data),t=currentRuleObservable.get(),a=param_1.getMatchedRoute(e,t),n=param_1.paramFromRoute(a,e);bindingProxy_1.call("can.setValue",n);var r=canRoute._onStartComplete;r&&(canRoute._onStartComplete=void 0,r())},10)}function updateRouteData(){var e=bindingProxy_1.call("can.getValue");canQueues_1_1_3_canQueues.batch.start();var t=canRoute.deparam(e);delete t.route,canReflect_1_17_4_canReflect.update(canRoute.data,t),canQueues_1_1_3_canQueues.batch.stop()}Object.defineProperty(canRoute,"routes",{get:function(){return register.routes},set:function(e){return register.routes=e}}),Object.defineProperty(canRoute,"defaultBinding",{get:function(){return bindingProxy_1.defaultBinding},set:function(e){bindingProxy_1.defaultBinding=e;var t=bindingProxy_1.bindings[bindingProxy_1.defaultBinding];t&&(bindingProxy_1.urlDataObservable.value=t)}}),Object.defineProperty(canRoute,"urlData",{get:function(){return bindingProxy_1.urlDataObservable.value},set:function(e){canRoute._teardown(),bindingProxy_1.urlDataObservable.value=e}}),canReflect_1_17_4_canReflect.assignMap(canRoute,{param:param_1,deparam:deparam_1,map:function(e){canRoute.data=e},start:function(e){if(!0!==e&&(canRoute._setup(),isBrowserWindow()||isWebWorker())){var t=bindingProxy_1.call("can.getValue");canQueues_1_1_3_canQueues.batch.start();var a=canRoute.deparam(t);delete a.route,canReflect_1_17_4_canReflect.assign(canRoute.data,a),canQueues_1_1_3_canQueues.batch.stop(),updateUrl()}return canRoute},url:urlHelpers.url,link:urlHelpers.link,isCurrent:urlHelpers.isCurrent,bindings:bindingProxy_1.bindings,_setup:function(){if(!canRoute._canBinding){var e={parent:bindingProxy_1.urlDataObservable.value,setParent:updateUrl,child:canRoute.serializedObservation,setChild:updateRouteData,onInitDoNotUpdateChild:!0,cycles:1,queue:"notify"};canRoute._canBinding=new canBind_1_0_0_canBind(e),canRoute._canBinding.start()}},_teardown:function(){canRoute._canBinding&&(canRoute._canBinding.stop(),canRoute._canBinding=null),clearTimeout(timer)},stop:function(){return this._teardown(),canRoute},currentRule:makeCompute(currentRuleObservable),register:register.register,rule:function(e){var t=deparam_1.getRule(e);if(t)return t.route}});var bindToCanRouteData=function(e,t){return canRoute.data[e]?canRoute.data[e].apply(canRoute.data,t):canRoute.data.addEventListener.apply(canRoute.data,t)};["addEventListener","removeEventListener","bind","unbind","on","off"].forEach(function(e){canRoute[e]=function(t,a){return"__url"===t?bindingProxy_1.call("can.onValue",a):bindToCanRouteData(e,arguments)}}),["delegate","undelegate","removeAttr","compute","_get","___get","each"].forEach(function(e){canRoute[e]=function(){return bindToCanRouteData(e,arguments)}});var setRouteData=function(e){return routeData=e,routeData},routeData,serializedObservation,serializedCompute;Object.defineProperty(canRoute,"serializedObservation",{get:function(){return serializedObservation||(serializedObservation=new canObservation_4_1_0_canObservation(function(){return canReflect_1_17_4_canReflect.serialize(canRoute.data)})),serializedObservation}}),Object.defineProperty(canRoute,"serializedCompute",{get:function(){return serializedCompute||(serializedCompute=makeCompute(canRoute.serializedObservation)),serializedCompute}});var stringify=function(e){return e&&"object"==typeof e?(e=e&&"object"==typeof e&&"serialize"in e?e.serialize():"function"==typeof e.slice?e.slice():canReflect_1_17_4_canReflect.assign({},e),canReflect_1_17_4_canReflect.eachKey(e,function(t,a){e[a]=stringify(t)})):void 0!==e&&null!==e&&"function"==typeof e.toString&&(e=e.toString()),e},stringCoercingMapDecorator=function(e){var t=canSymbol_1_6_1_canSymbol.for("can.route.stringCoercingMapDecorator");if(!e.attr[t]){var a=e.attr;e.attr=function(e){var t="string"==typeof e&&(void 0===this.define||void 0===this.define[e]||!!this.define[e].serialize),n;return n=t?stringify(Array.apply(null,arguments)):arguments,a.apply(this,n)},canReflect_1_17_4_canReflect.setKeyValue(e.attr,t,!0)}return e},viewModelSymbol$2=canSymbol_1_6_1_canSymbol.for("can.viewModel");Object.defineProperty(canRoute,"data",{get:function(){return routeData?routeData:setRouteData(stringCoercingMapDecorator(new canSimpleMap_4_2_0_canSimpleMap))},set:function(e){canReflect_1_17_4_canReflect.isConstructorLike(e)&&(e=new e),e&&e[viewModelSymbol$2]!==void 0&&(e=e[viewModelSymbol$2]),"attr"in e?setRouteData(stringCoercingMapDecorator(e)):setRouteData(e)}}),canRoute.attr=function(e,t){return console.warn("can-route: can-route.attr is deprecated. Use methods on can-route.data instead."),"attr"in canRoute.data?canRoute.data.attr.apply(canRoute.data,arguments):1<arguments.length?(canReflect_1_17_4_canReflect.setKeyValue(canRoute.data,e,t),canRoute.data):"object"==typeof e?(canReflect_1_17_4_canReflect.assignDeep(canRoute.data,e),canRoute.data):1===arguments.length?canReflect_1_17_4_canReflect.getKeyValue(canRoute.data,e):canReflect_1_17_4_canReflect.unwrap(canRoute.data)},canReflect_1_17_4_canReflect.setKeyValue(canRoute,canSymbol_1_6_1_canSymbol.for("can.isFunctionLike"),!1),canRoute.matched=canRoute.currentRule,canRoute.current=canRoute.isCurrent;var canRoute_4_3_12_canRoute=canNamespace_1_0_0_canNamespace.route=canRoute,looksLikeOptions$1=core$2.looksLikeOptions,calculateArgs=function(){var e,t,a;return canReflect_1_17_4_canReflect.eachIndex(arguments,function(n){"boolean"==typeof n?t=n:n&&"object"==typeof n&&(looksLikeOptions$1(n)?a=n:e=core$2.resolveHash(n))}),!e&&a&&(e=core$2.resolveHash(a.hash)),{finalParams:e||{},finalMerge:t,optionsArg:a}};core$2.registerHelper("routeUrl",function(){var e=calculateArgs.apply(this,arguments);return canRoute_4_3_12_canRoute.url(e.finalParams,"boolean"==typeof e.finalMerge?e.finalMerge:void 0)});var routeCurrent=function(){var e=calculateArgs.apply(this,arguments),t=canRoute_4_3_12_canRoute.isCurrent(e.finalParams,"boolean"==typeof e.finalMerge?e.finalMerge:void 0);return e.optionsArg&&!(e.optionsArg instanceof expression_1.Call)?t?e.optionsArg.fn():e.optionsArg.inverse():t};routeCurrent.callAsMethod=!0,core$2.registerHelper("routeCurrent",routeCurrent);var canStacheRouteHelpers_1_1_1_canStacheRouteHelpers={},sub=function(e,t,a){var n=[];return e=e||"",n.push(e.replace(canKey_1_2_0_utils.strReplacer,function(e,r){var s=get_1(t,r);return!0===a&&_delete(t,r),void 0===s||null===s?(n=null,""):!canReflect_1_17_4_canReflect.isPrimitive(s)&&n?(n.push(s),""):""+s})),null===n?n:1>=n.length?n[0]:n},addSerializeToThis=function(e){return canReflect_1_17_4_canReflect.assignSymbols(e,{"can.serialize":function(){return this}})},set$2;function reverseArgs(e){return function(t,a){return e.call(this,a,t)}}var setComparisonsSymbol=canSymbol_1_6_1_canSymbol.for("can.setComparisons");function addComparators(e,t,a){var n=e[setComparisonsSymbol];e[setComparisonsSymbol]||(n=e[setComparisonsSymbol]=new Map);var r=n.get(e);r||(r=new Map,n.set(e,r));var s=r.get(t);if(s)for(var o in a)s.hasOwnProperty(o)&&console.warn("Overwriting "+e.name+" "+o+" "+t.name+" comparitor"),s[o]=a[o];else r.set(t,a)}function Identity(){}var typeMap={number:Identity,string:Identity,undefined:Identity,boolean:Identity},get$1={};["intersection","difference","union"].forEach(function(e){get$1[e]=function(t,a,n){if(n===set$2.UNIVERSAL){if("intersection"===e)return a;if("union"===e)return set$2.UNIVERSAL;if("difference"===e)return set$2.EMPTY}if(a===set$2.UNIVERSAL){if("intersection"===e)return a;if("union"===e)return set$2.UNIVERSAL}if(t&&t[e]){var r=t[e](a,n);return void 0===r&&!0===t.undefinedIsEmptySet?set$2.EMPTY:r}throw new Error("Unable to perform "+e+" between "+set$2.getType(a).name+" and "+set$2.getType(n).name)}}),set$2={UNIVERSAL:canReflect_1_17_4_canReflect.assignSymbols({name:"UNIVERSAL"},{"can.serialize":function(){return this},"can.isMember":function(){return!0}}),EMPTY:canReflect_1_17_4_canReflect.assignSymbols({name:"EMPTY"},{"can.serialize":function(){return this},"can.isMember":function(){return!1}}),UNDEFINABLE:addSerializeToThis({name:"UNDEFINABLE"}),UNKNOWABLE:addSerializeToThis({name:"UNKNOWABLE"}),Identity:Identity,isSpecial:function(e){return e===set$2.UNIVERSAL||e===set$2.EMPTY||e===set$2.UNDEFINABLE||e===set$2.UNKNOWABLE},isDefinedAndHasMembers:function(e){return!(e===set$2.EMPTY||e===set$2.UNDEFINABLE||e===set$2.UNKNOWABLE)&&e},getType:function(e){return e===set$2.UNIVERSAL?set$2.UNIVERSAL:e===set$2.EMPTY?set$2.EMPTY:e===set$2.UNKNOWABLE?set$2.UNKNOWABLE:null===e?Identity:typeMap.hasOwnProperty(typeof e)?typeMap[typeof e]:e.constructor},ownAndMemberValue:function(e,t){if(null!=e||null!=t){var a=null==e?e:e.valueOf(),n=null==t?t:t.valueOf();return null==e||null==t?{own:a,member:n}:(a.constructor!==n.constructor&&(n=new e.constructor(n).valueOf()),{own:a,member:n})}return{own:t,member:e}},getComparisons:function(e,t){var a=e[setComparisonsSymbol];if(a){var n=a.get(e);if(n)return n.get(t)}},hasComparisons:function(e){return!!e[setComparisonsSymbol]},defineComparison:function(e,t,a){if(addComparators(e,t,a),e!==t){var n={};for(var r in a)"difference"!=r&&(n[r]=reverseArgs(a[r]));addComparators(t,e,n)}},isSubset:function(e,t){if(e===t)return!0;var a=set$2.getType(e),n=set$2.getType(t),r=set$2.getComparisons(a,n);if(r){var s=get$1.intersection(r,e,t),o=get$1.difference(r,e,t);return s===set$2.UNKNOWABLE||o===set$2.UNKNOWABLE?void 0:s!==set$2.EMPTY&&o===set$2.EMPTY}throw new Error("Unable to perform subset comparison between "+a.name+" and "+n.name)},isProperSubset:function(e,t){return set$2.isSubset(e,t)&&!set$2.isEqual(e,t)},isEqual:function(e,t){if(e===set$2.UNKNOWABLE||t===set$2.UNKNOWABLE)return set$2.UNKNOWABLE;var a=set$2.isSpecial(e),n=set$2.isSpecial(t);if(a&&n)return a===n;var r=set$2.getType(e),s=set$2.getType(t);if(e===t)return!0;var o=set$2.getComparisons(r,s),i=set$2.getComparisons(s,r);if(o&&i){var l=get$1.intersection(o,e,t),d=get$1.difference(o,e,t);if(l!==set$2.EMPTY&&d===set$2.EMPTY){var p=get$1.intersection(i,t,e),c=get$1.difference(i,t,e);return p!==set$2.EMPTY&&c===set$2.EMPTY}return!1}var u=set$2.ownAndMemberValue(e,t);if(canReflect_1_17_4_canReflect.isPrimitive(u.own)&&canReflect_1_17_4_canReflect.isPrimitive(u.member))return u.own===u.member;throw new Error("Unable to perform equal comparison between "+r.name+" and "+s.name)},union:function(e,t){if(e===set$2.UNIVERSAL||t===set$2.UNIVERSAL)return set$2.UNIVERSAL;if(e===set$2.EMPTY)return t;if(t===set$2.EMPTY)return e;if(e===set$2.UNKNOWABLE||t===set$2.UNKNOWABLE)return set$2.UNKNOWABLE;var a=set$2.getType(e),n=set$2.getType(t),r=set$2.getComparisons(a,n);return get$1.union(r,e,t)},intersection:function(e,t){if(e===set$2.UNIVERSAL)return t;if(t===set$2.UNIVERSAL)return e;if(e===set$2.EMPTY||t===set$2.EMPTY)return set$2.EMPTY;if(e===set$2.UNKNOWABLE||t===set$2.UNKNOWABLE)return set$2.UNKNOWABLE;var a=set$2.getType(e),n=set$2.getType(t),r=set$2.getComparisons(a,n);if(r)return get$1.intersection(r,e,t);throw new Error("Unable to perform intersection comparison between "+a.name+" and "+n.name)},difference:function(e,t){if(e===set$2.EMPTY)return set$2.EMPTY;if(t===set$2.EMPTY)return e;if(e===set$2.UNKNOWABLE||t===set$2.UNKNOWABLE)return set$2.UNKNOWABLE;var a=set$2.getType(e),n=set$2.getType(t),r=set$2.getComparisons(a,n);if(r)return get$1.difference(r,e,t);throw new Error("Unable to perform difference comparison between "+a.name+" and "+n.name)},indexWithEqual:function(e,t){for(var a=0,n=e.length;a<n;a++)if(set$2.isEqual(e[a],t))return a;return-1}};function identityIntersection(e,t){return e===t?e:set$2.EMPTY}function identityDifference(e,t){return e===t?set$2.EMPTY:e}function identityUnion(e,t){return e===t?e:set$2.UNDEFINABLE}var identityComparitor={intersection:identityIntersection,difference:identityDifference,union:identityUnion};set$2.defineComparison(Identity,Identity,identityComparitor),set$2.defineComparison(set$2.UNIVERSAL,set$2.UNIVERSAL,identityComparitor);var set_1$1=set$2,replacer=/\{([^\}]+)\}/g,canFixture_3_0_0_dataFromUrl=function(e,t){if(!e)return{};var a=[],n=e.replace(".","\\.").replace("?","\\?"),r=new RegExp(n.replace(replacer,function(e,t){return a.push(t),"([^/]+)"})+"$").exec(t),s={};return r?(r.shift(),a.forEach(function(e){s[e]=r.shift()}),s):null};function getValue(e){return null==e?e:e.valueOf()}var arrayUnionIntersectionDifference=function(e,t){var a=new Set,n=[],r=[],s=e.slice(0);return e.forEach(function(e){a.add(getValue(e)),r.push(e)}),t.forEach(function(e){if(a.has(getValue(e))){n.push(e);var t=set_1$1.indexWithEqual(s,e);-1!==t&&s.splice(t,1)}else r.push(e)}),{intersection:n,union:r,difference:s}},isMemberSymbol$1=canSymbol_1_6_1_canSymbol.for("can.isMember"),comparisons={In:function(e){this.values=e},NotIn:function(e){this.values=e},GreaterThan:function(e){this.value=e},GreaterThanEqual:function(e){this.value=e},LessThan:function(e){this.value=e},LessThanEqual:function(e){this.value=e},And:function(e){this.values=e},Or:function(e){this.values=e}};comparisons.Or.prototype.orValues=function(){return this.values},comparisons.In.test=function(e,t){return e.some(function(e){var a=set_1$1.ownAndMemberValue(e,t);return a.own===a.member})},comparisons.NotIn.test=function(e,t){return!comparisons.In.test(e,t)},comparisons.NotIn.testValue=function(e,t){return!comparisons.In.testValue(e,t)};function nullIsFalse(e){return function(t,a){return null!=t&&null!=a&&e(t,a)}}function nullIsFalseTwoIsOk(e){return function(t,a){return!(t!==a)||null!=t&&null!=a&&e(t,a)}}comparisons.GreaterThan.test=nullIsFalse(function(e,t){return e>t}),comparisons.GreaterThanEqual.test=nullIsFalseTwoIsOk(function(e,t){return e>=t}),comparisons.LessThan.test=nullIsFalse(function(e,t){return e<t}),comparisons.LessThanEqual.test=nullIsFalseTwoIsOk(function(e,t){return e<=t});function isMemberThatUsesTest(e){var t=set_1$1.ownAndMemberValue(this.value,e);return this.constructor.test(t.member,t.own)}[comparisons.GreaterThan,comparisons.GreaterThanEqual,comparisons.LessThan,comparisons.LessThanEqual,comparisons.LessThan].forEach(function(e){e.prototype.isMember=isMemberThatUsesTest});function isMemberThatUsesTestOnValues(e){return this.constructor.test(this.values,e)}[comparisons.In,comparisons.NotIn].forEach(function(e){e.prototype.isMember=isMemberThatUsesTestOnValues}),comparisons.And.prototype.isMember=function(e){return this.values.every(function(t){return t.isMember(e)})},comparisons.Or.prototype.isMember=function(e){return this.values.some(function(t){return t.isMember(e)})},Object.keys(comparisons).forEach(function(e){comparisons[e].prototype[isMemberSymbol$1]=comparisons[e].prototype.isMember});function makeNot(e){return{test:function(t,a){return!e.test(t,a)}}}function makeEnum(e,t,n){return function(r,a){var s=arrayUnionIntersectionDifference(r.values,a.values);return s[e].length?new t(s[e]):n||set_1$1.EMPTY}}function swapArgs(e){return function(t,a){return e(a,t)}}function makeSecondValue(e,t){return function(a,n){return new e(n[t||"value"])}}function returnBiggerValue(e,t){return e.value<t.value?t:e}function returnSmallerValue(e,t){return e.value>t.value?t:e}function makeAndIf(e,t){return function(a,n){return e.test(a.value,n.value)?makeAnd([a,new t(n.value)]):set_1$1.EMPTY}}function make_InIfEqual_else_andIf(e,t){var n=makeAndIf(e,t);return function(e,t){return e.value===t.value?new is.In([e.value]):n(e,t)}}function make_filterFirstValueAgainstSecond(e,t,a){return function(n,r){var s=n.values.filter(function(t){return e.test(r,t)});return s.length?new t(s):a||set_1$1.EMPTY}}var isMemberTest={test:function(e,t){return e.isMember(t)}};function isOr(e){return e instanceof is.Or}function isAnd(e){return e instanceof is.And}function isAndOrOr(e){return isAnd(e)||isOr(e)}function combineFilterFirstValuesAgainstSecond(e){return function(t,a){var n=t.values.filter(function(t){return e.values.test(a,t)}),r;return r=e.complement?set_1$1.difference(set_1$1.UNIVERSAL,a):e.with?new e.with(a.value):a,n.length?e.combinedUsing([new e.arePut(n),r]):r}}function makeOrUnless(e,t){return function(a,n){return e.test(a.value,n.value)?t||set_1$1.UNIVERSAL:makeOr([a,n])}}function makeAndUnless(e,t){return function(a,n){return e.test(a.value,n.value)?t||set_1$1.EMPTY:makeAnd([a,n])}}function makeComplementSecondArgIf(e){return function(t,a){return e.test(t.value,a.value)?set_1$1.difference(set_1$1.UNIVERSAL,a):t}}function makeAnd(e){return comparisons.And?new comparisons.And(e):set_1$1.UNDEFINABLE}function makeOr(e){return comparisons.Or?new comparisons.Or(e):set_1$1.UNDEFINABLE}var is=comparisons;function combineValueWithRangeCheck(e,t,a){var n=new a(t.value),r=e.values.filter(function(e){return!n.isMember(e)});return r.length?r.length<e.values.length?makeOr([new is.In(r),n]):makeOr([e,t]):n}function makeOrWithInAndRange(e,t){if(t instanceof is.Or){var a=makeOrWithInAndRange(e,t.values[0]);if(!(a instanceof is.Or))return set_1$1.union(a,t.values[1]);var n=makeOrWithInAndRange(e,t.values[1]);return n instanceof is.Or?makeOr([e,t]):set_1$1.union(n,t.values[0])}return t instanceof is.GreaterThan?combineValueWithRangeCheck(e,t,is.GreaterThanEqual):t instanceof is.LessThan?combineValueWithRangeCheck(e,t,is.LessThanEqual):makeOr([e,t])}var In_RANGE={union:combineFilterFirstValuesAgainstSecond({values:makeNot(isMemberTest),arePut:is.In,combinedUsing:function(e){return makeOrWithInAndRange(e[0],e[1])}}),intersection:make_filterFirstValueAgainstSecond(isMemberTest,is.In,set_1$1.EMPTY),difference:make_filterFirstValueAgainstSecond(makeNot(isMemberTest),is.In,set_1$1.EMPTY)},RANGE_IN={difference:swapArgs(combineFilterFirstValuesAgainstSecond({values:isMemberTest,arePut:is.NotIn,combinedUsing:makeAnd}))},NotIn_RANGE=function(){return{union:make_filterFirstValueAgainstSecond(makeNot(isMemberTest),is.NotIn,set_1$1.UNIVERSAL),intersection:combineFilterFirstValuesAgainstSecond({values:isMemberTest,arePut:is.NotIn,combinedUsing:makeAnd}),difference:combineFilterFirstValuesAgainstSecond({values:makeNot(isMemberTest),arePut:is.NotIn,combinedUsing:makeAnd,complement:!0})}},RANGE_NotIn={difference:swapArgs(make_filterFirstValueAgainstSecond(isMemberTest,is.In,set_1$1.EMPTY))},RANGE_And_Union=function(e,t){var a=set_1$1.union(e,t.values[0]),n=set_1$1.union(e,t.values[1]);return isAndOrOr(a)||isAndOrOr(n)?new is.Or([e,t]):set_1$1.intersection(a,n)},RANGE_And_Intersection=function(e,t){var a=t.values[0],n=t.values[1],r=set_1$1.intersection(e,a),s=set_1$1.intersection(e,n);return r===set_1$1.EMPTY||s===set_1$1.EMPTY?set_1$1.EMPTY:isAndOrOr(r)?isAndOrOr(s)?new is.And([e,t]):new set_1$1.intersection(s,a):new set_1$1.intersection(r,n)},RANGE_And_Difference=function(e,t){var a=t.values[0],n=t.values[1],r=set_1$1.difference(e,a),s=set_1$1.difference(e,n);return r===set_1$1.EMPTY?s:s===set_1$1.EMPTY?r:new is.Or([r,s])},And_RANGE_Difference=function(e,t){var a=e.values[0],n=e.values[1],r=set_1$1.difference(a,t),s=set_1$1.difference(n,t);return set_1$1.intersection(r,s)},RANGE_Or={union:function(e,t){var a=t.values[0],n=t.values[1],r=set_1$1.union(e,a);if(!isAndOrOr(r))return set_1$1.union(r,n);var s=set_1$1.union(e,n);return isAndOrOr(s)?new is.Or([e,t]):set_1$1.union(a,s)},intersection:function(e,t){var a=t.values[0],n=t.values[1],r=set_1$1.intersection(e,a),s=set_1$1.intersection(e,n);return r===set_1$1.EMPTY?s:s===set_1$1.EMPTY?r:set_1$1.union(r,s)},difference:function(e,t){var a=t.values[0],n=t.values[1],r=set_1$1.difference(e,a),s=set_1$1.difference(e,n);return set_1$1.intersection(r,s)}},Or_RANGE={difference:function(e,t){var a=e.values[0],n=e.values[1],r=set_1$1.difference(a,t),s=set_1$1.difference(n,t);return set_1$1.union(r,s)}},comparators={In_In:{union:makeEnum("union",is.In),intersection:makeEnum("intersection",is.In),difference:makeEnum("difference",is.In)},UNIVERSAL_In:{difference:makeSecondValue(is.NotIn,"values")},In_NotIn:{union:swapArgs(makeEnum("difference",is.NotIn,set_1$1.UNIVERSAL)),intersection:makeEnum("difference",is.In),difference:makeEnum("intersection",is.In)},NotIn_In:{difference:makeEnum("union",is.NotIn)},In_GreaterThan:In_RANGE,GreaterThan_In:RANGE_IN,In_GreaterThanEqual:In_RANGE,GreaterThanEqual_In:RANGE_IN,In_LessThan:In_RANGE,LessThan_In:RANGE_IN,In_LessThanEqual:In_RANGE,LessThanEqual_In:RANGE_IN,In_And:In_RANGE,And_In:RANGE_IN,In_Or:In_RANGE,Or_In:RANGE_IN,NotIn_NotIn:{union:makeEnum("intersection",is.NotIn,set_1$1.UNIVERSAL),intersection:makeEnum("union",is.NotIn),difference:makeEnum("difference",is.In)},UNIVERSAL_NotIn:{difference:makeSecondValue(is.In,"values")},NotIn_GreaterThan:NotIn_RANGE(),GreaterThan_NotIn:RANGE_NotIn,NotIn_GreaterThanEqual:NotIn_RANGE(),GreaterThanEqual_NotIn:RANGE_NotIn,NotIn_LessThan:NotIn_RANGE(),LessThan_NotIn:RANGE_NotIn,NotIn_LessThanEqual:NotIn_RANGE(),LessThanEqual_NotIn:RANGE_NotIn,NotIn_And:NotIn_RANGE(),And_NotIn:RANGE_NotIn,NotIn_Or:NotIn_RANGE(),Or_NotIn:RANGE_NotIn,GreaterThan_GreaterThan:{union:returnSmallerValue,intersection:returnBiggerValue,difference:makeAndIf(is.LessThan,is.LessThanEqual)},UNIVERSAL_GreaterThan:{difference:makeSecondValue(is.LessThanEqual)},GreaterThan_GreaterThanEqual:{union:returnSmallerValue,intersection:returnBiggerValue,difference:makeAndIf(is.LessThan,is.LessThan)},GreaterThanEqual_GreaterThan:{difference:make_InIfEqual_else_andIf(is.LessThan,is.LessThanEqual)},GreaterThan_LessThan:{union:function(){var e=makeOrUnless(is.LessThan);return function(t,a){return comparisons.In.test([t.value],a.value)?new is.NotIn([t.value]):e(t,a)}}(),intersection:makeAndUnless(is.GreaterThan),difference:makeComplementSecondArgIf(is.LessThan)},LessThan_GreaterThan:{difference:makeComplementSecondArgIf(is.GreaterThan)},GreaterThan_LessThanEqual:{union:makeOrUnless(is.LessThanEqual),intersection:makeAndUnless(is.GreaterThanEqual),difference:makeComplementSecondArgIf(is.LessThanEqual)},LessThanEqual_GreaterThan:{difference:makeComplementSecondArgIf(is.GreaterThanEqual)},GreaterThan_And:{union:RANGE_And_Union,intersection:RANGE_And_Intersection,difference:RANGE_And_Difference},And_GreaterThan:{difference:And_RANGE_Difference},GreaterThan_Or:RANGE_Or,Or_GreaterThan:Or_RANGE,GreaterThanEqual_GreaterThanEqual:{union:returnSmallerValue,intersection:returnBiggerValue,difference:makeAndIf(is.LessThan,is.LessThan)},UNIVERSAL_GreaterThanEqual:{difference:makeSecondValue(is.LessThan)},GreaterThanEqual_LessThan:{union:makeOrUnless(is.LessThanEqual),intersection:makeAndUnless(is.GreaterThanEqual),difference:makeComplementSecondArgIf(is.LessThanEqual)},LessThan_GreaterThanEqual:{difference:makeComplementSecondArgIf(is.GreaterThanEqual)},GreaterThanEqual_LessThanEqual:{union:makeOrUnless(is.LessThanEqual),intersection:function(){var e=makeAndUnless(is.GreaterThan);return function(t,a){var n=new is.In([t.value]);return n.isMember(a.value)?n:e(t,a)}}(),difference:makeComplementSecondArgIf(is.LessThanEqual)},LessThanEqual_GreaterThanEqual:{difference:makeComplementSecondArgIf(is.GreaterThanEqual)},GreaterThanEqual_And:{union:RANGE_And_Union,intersection:RANGE_And_Intersection,difference:RANGE_And_Difference},And_GreaterThanEqual:{difference:And_RANGE_Difference},GreaterThanEqual_Or:RANGE_Or,Or_GreaterThanEqual:Or_RANGE,LessThan_LessThan:{union:returnBiggerValue,intersection:returnSmallerValue,difference:makeAndIf(is.GreaterThan,is.GreaterThanEqual)},UNIVERSAL_LessThan:{difference:makeSecondValue(is.GreaterThanEqual)},LessThan_LessThanEqual:{union:returnBiggerValue,intersection:returnSmallerValue,difference:makeAndIf(is.GreaterThan,is.GreaterThan)},LessThanEqual_LessThan:{difference:make_InIfEqual_else_andIf(is.GreaterThanEqual,is.GreaterThanEqual)},LessThan_And:{union:RANGE_And_Union,intersection:RANGE_And_Intersection,difference:RANGE_And_Difference},And_LessThan:{difference:And_RANGE_Difference},LessThan_Or:RANGE_Or,Or_LessThan:Or_RANGE,LessThanEqual_LessThanEqual:{union:returnBiggerValue,intersection:returnSmallerValue,difference:function(e,t){return e.value>=t.value?makeAnd([e,new is.GreaterThan(t.value)]):set_1$1.EMPTY}},UNIVERSAL_LessThanEqual:{difference:makeSecondValue(is.GreaterThan)},LessThanEqual_And:{union:RANGE_And_Union,intersection:RANGE_And_Intersection,difference:RANGE_And_Difference},And_LessThanEqual:{difference:And_RANGE_Difference},LessThanEqual_Or:RANGE_Or,Or_LessThanEqual:Or_RANGE,And_And:{union:function(e,t){var a=set_1$1.union(e,t.values[0]),n=set_1$1.union(e,t.values[1]);return(isAndOrOr(a)||isAndOrOr(n))&&(a=set_1$1.union(t,e.values[0]),n=set_1$1.union(t,e.values[1])),isAndOrOr(a)||isAndOrOr(n)?new is.Or([e,t]):set_1$1.intersection(a,n)},intersection:function(e,t){var a=set_1$1.intersection(e.values[0],t.values[0]),n=set_1$1.intersection(e.values[1],t.values[1]);return isAndOrOr(a)&&isAndOrOr(n)?(a=set_1$1.intersection(e.values[0],t.values[1]),n=set_1$1.intersection(e.values[1],t.values[0]),isAndOrOr(a)&&isAndOrOr(n)?new is.And([e,t]):set_1$1.intersection(a,n)):set_1$1.intersection(a,n)},difference:function(){return function(e,t){var a=set_1$1.difference(e,t.values[0]),n=set_1$1.difference(e,t.values[1]);return set_1$1.union(a,n)}}()},And_Or:{union:function(e,t){var a=set_1$1.union(e.values[0],t),n=set_1$1.union(e.values[1],t);return isAndOrOr(a)&&isAndOrOr(n)?new is.Or([e,t]):set_1$1.intersection(a,n)},intersection:function(e,t){var a=set_1$1.intersection(e,t.values[0]),n=set_1$1.intersection(e,t.values[1]);return isOr(a)||isOr(n)?new is.And([e,t]):set_1$1.union(a,n)},difference:function(e,t){var a=set_1$1.difference(e,t.values[0]),n=set_1$1.difference(e,t.values[1]);return set_1$1.intersection(a,n)}},Or_And:{difference:function(e,t){var a=set_1$1.difference(e,t.values[0]),n=set_1$1.difference(e,t.values[1]);return set_1$1.union(a,n)}},UNIVERSAL_And:{difference:function(e,t){var a=set_1$1.difference(e,t.values[0]),n=set_1$1.difference(e,t.values[1]);return set_1$1.union(a,n)}},Or_Or:{union:function(e,t){var a=set_1$1.union(e.values[0],t.values[0]),n=set_1$1.union(e.values[1],t.values[1]);return isAndOrOr(a)&&isAndOrOr(n)?(a=set_1$1.union(e.values[0],t.values[1]),n=set_1$1.union(e.values[1],t.values[0]),isAndOrOr(a)&&isAndOrOr(n)?new is.Or([e,t]):set_1$1.union(a,n)):set_1$1.union(a,n)},intersection:function(e,t){var a=t.values[0],n=t.values[1],r=set_1$1.intersection(e,a),s=set_1$1.intersection(e,n);return isOr(r)&&isOr(s)?(r=set_1$1.union(t,e.values[0]),s=set_1$1.union(t,e.values[1]),isOr(r)&&isOr(s)?new is.Or([e,t]):set_1$1.union(r,s)):set_1$1.union(r,s)},difference:function(e,t){var a=set_1$1.difference(e,t.values[0]),n=set_1$1.difference(e,t.values[1]);return set_1$1.intersection(a,n)}},UNIVERSAL_Or:{difference:function(e,t){var a=set_1$1.difference(e,t.values[0]),n=set_1$1.difference(e,t.values[1]);return set_1$1.intersection(a,n)}}},names=Object.keys(comparisons);names.forEach(function(e,t){comparators[e+"_"+e]?set_1$1.defineComparison(comparisons[e],comparisons[e],comparators[e+"_"+e]):console.warn("no "+e+"_"+e),comparators["UNIVERSAL_"+e]?set_1$1.defineComparison(set_1$1.UNIVERSAL,comparisons[e],comparators["UNIVERSAL_"+e]):console.warn("no UNIVERSAL_"+e);for(var a=t+1,n;a<names.length;a++)n=names[a],comparators[e+"_"+n]?set_1$1.defineComparison(comparisons[e],comparisons[n],comparators[e+"_"+n]):console.warn("no "+e+"_"+n),comparators[n+"_"+e]?set_1$1.defineComparison(comparisons[n],comparisons[e],comparators[n+"_"+e]):console.warn("no "+n+"_"+e)});var comparisons_1=comparisons,makeRealNumberRangeInclusive=function(e,t){function a(a,n){this.start=0<arguments.length?+a:e,this.end=1<arguments.length?+n:t,this.range=new comparisons_1.And([new comparisons_1.GreaterThanEqual(this.start),new comparisons_1.LessThanEqual(this.end)])}function n(e){return set_1$1.isSubset(l.range,e.range)}function r(e){var t={};if(e.values.forEach(function(e){e instanceof comparisons_1.GreaterThanEqual&&(t.start=e.value),e instanceof comparisons_1.GreaterThan&&(t.start=e.value+1),e instanceof comparisons_1.LessThanEqual&&(t.end=e.value),e instanceof comparisons_1.LessThan&&(t.end=e.value-1)}),"start"in t&&"end"in t)return new a(t.start,t.end)}function s(e){var t;if(e instanceof comparisons_1.And&&(t=r(e)),e instanceof comparisons_1.Or){var s=r(e.values[0]),o=r(e.values[1]);if(s&&o){var i=s.range.values,l=o.range.values;if(i[1].value+1===l[0].value)t=new a(i[0].value,l[1].value);else if(l[1].value+1===i[0].value)t=new a(l[0].value,i[1].value);else return set_1$1.UNDEFINABLE}else return set_1$1.UNDEFINABLE}return t&&n(t)?set_1$1.UNIVERSAL:t}function o(e,t){var a=s(set_1$1.intersection(e.range,t.range));return a?a:set_1$1.EMPTY}function i(e,t){var a=s(set_1$1.difference(e.range,t.range));return a?a:set_1$1.EMPTY}var l=new a(e,t);return set_1$1.defineComparison(a,a,{union:function(e,t){var a=s(set_1$1.union(e.range,t.range));return a?a:set_1$1.EMPTY},intersection:o,difference:i}),set_1$1.defineComparison(set_1$1.UNIVERSAL,a,{difference:function(e,t){return n(t)?set_1$1.EMPTY:i(l,t)}}),a},types={};function ValuesOr(e){this.values=e}ValuesOr.prototype.isMember=function(e){return this.values.some(function(t){return t&&t.isMember?t.isMember(e):t===e})},set_1$1.defineComparison(set_1$1.UNIVERSAL,ValuesOr,{difference:function(){return set_1$1.UNDEFINABLE}});var valuesOr=types.ValuesOr=ValuesOr;function NotIdentity(e){this.value=e}var Identity$1=set_1$1.Identity;set_1$1.defineComparison(set_1$1.UNIVERSAL,Identity$1,{difference:function(e,t){return new NotIdentity(t)}}),set_1$1.defineComparison(set_1$1.UNIVERSAL,NotIdentity,{difference:function(e,t){return t.value}}),set_1$1.defineComparison(NotIdentity,NotIdentity,{}),set_1$1.defineComparison(NotIdentity,Identity$1,{union:function(e,t){if(set_1$1.isEqual(e.value,t))return set_1$1.UNIVERSAL;throw new Error("Not,Identity Union is not filled out")},intersection:function(e,t){return set_1$1.isEqual(!e.value,t)?t:set_1$1.EMPTY},difference:function(e,t){return set_1$1.isEqual(e.value,t)?e:set_1$1.UNDEFINABLE}}),set_1$1.defineComparison(Identity$1,NotIdentity,{difference:function(e,t){return set_1$1.isEqual(e,t.value)?e:set_1$1.UNDEFINABLE}});var valuesNot=types.Not=NotIdentity;function KeysAnd(e){var t=this.values={};canReflect_1_17_4_canReflect.eachKey(e,function(e,a){t[a]=canReflect_1_17_4_canReflect.isPlainObject(e)&&!set_1$1.isSpecial(e)?new KeysAnd(e):e})}var isMemberSymbol$2=canSymbol_1_6_1_canSymbol.for("can.isMember");KeysAnd.prototype.isMember=function(e,t,a){var n=!0,r=a?a+".":"";return canReflect_1_17_4_canReflect.eachKey(this.values,function(a,s){var o=a&&(a[isMemberSymbol$2]||a.isMember);o?!o.call(a,get_1(e,s),t||e,r+s)&&(n=!1):a!==get_1(e,s)&&(n=!1)}),n};function checkIfUniversalAndReturnUniversal(e){return set_1$1.isEqual(e,set_1$1.UNIVERSAL)?set_1$1.UNIVERSAL:e}var MISSING={};function eachInUnique(e,t,a,n,r){var s=canAssign_1_3_1_canAssign({},a),o;for(var i in e){if(o=t(i,e[i],i in a?a[i]:MISSING,e,a),void 0!==o)return o;delete s[i]}for(i in s)if(o=n(i,MISSING,a[i],e,a),void 0!==o)return o;return r}function keyDiff(e,t){var a=arrayUnionIntersectionDifference(Object.keys(e),Object.keys(t));return{aOnlyKeys:a.difference,aAndBKeys:a.intersection,bOnlyKeys:arrayUnionIntersectionDifference(Object.keys(t),Object.keys(e)).difference}}function notEmpty(e){return e!==set_1$1.EMPTY}function difference(e,t){var a=e.values,n=t.values,r=keyDiff(a,n),s=r.aOnlyKeys,o=r.aAndBKeys,i=r.bOnlyKeys,l={},d={},p={};o.forEach(function(e){var t=set_1$1.difference(a[e],n[e]);if(t===set_1$1.EMPTY)l[e]=a[e];else{var r=set_1$1.intersection(a[e],n[e]),s=r!==set_1$1.EMPTY;s?d[e]={difference:t,intersection:r}:p[e]=a[e]}});var c=Object.keys(d),u;if(1===c.length&&(u={},u[c[0]]=d[c[0]].difference),Object.keys(p).length)return e;if(0===s.length&&0===i.length)return 1<c.length?set_1$1.UNDEFINABLE:1===c.length?(canAssign_1_3_1_canAssign(l,u),new KeysAnd(l)):set_1$1.EMPTY;if(0<s.length&&0===i.length)return 1<c.length?set_1$1.UNDEFINABLE:1===c.length?(canAssign_1_3_1_canAssign(l,u),s.forEach(function(e){l[e]=a[e]}),new KeysAnd(l)):set_1$1.EMPTY;if(0===s.length&&0<i.length){if(1<c.length)return set_1$1.UNDEFINABLE;var y;if(1===c.length){var h=c[0];y=canAssign_1_3_1_canAssign({},l),y[h]=d[h].difference,l[h]=d[h].intersection}var g=i.map(function(e){var t=canAssign_1_3_1_canAssign({},l),a=t[e]=set_1$1.difference(set_1$1.UNIVERSAL,n[e]);return a===set_1$1.EMPTY?a:new KeysAnd(t)}).filter(notEmpty);return y&&g.push(new KeysAnd(y)),1<g.length?new types.ValuesOr(g):1===g.length?g[0]:set_1$1.EMPTY}if(0<s.length&&0<i.length){if(c.length)throw new Error("Can't handle any productable keys right now");if(s.forEach(function(e){l[e]=a[e]}),1===i.length){var m=i[0],f=canAssign_1_3_1_canAssign({},l);return f[m]=set_1$1.difference(set_1$1.UNIVERSAL,n[m]),new KeysAnd(f)}return set_1$1.UNDEFINABLE}}set_1$1.defineComparison(KeysAnd,KeysAnd,{union:function(e,t){var a=keyDiff(e.values,t.values),n=[],r={};a.aAndBKeys.forEach(function(a){set_1$1.isEqual(e.values[a],t.values[a])?r[a]=e.values[a]:n.push(a)});var s={},o={};if(n.forEach(function(a){s[a]=e.values[a],o[a]=t.values[a]}),!a.aOnlyKeys.length&&!a.bOnlyKeys.length){if(1===n.length){var i=n[0],l=r[i]=set_1$1.union(e.values[i],t.values[i]);return 1===canReflect_1_17_4_canReflect.size(r)&&set_1$1.isEqual(l,set_1$1.UNIVERSAL)?set_1$1.UNIVERSAL:new KeysAnd(r)}if(0===n.length)return e}if(0===n.length){if(0<a.aOnlyKeys.length&&0===a.bOnlyKeys.length)return checkIfUniversalAndReturnUniversal(t);if(0===a.aOnlyKeys.length&&0<a.bOnlyKeys.length)return checkIfUniversalAndReturnUniversal(e)}return 0<a.aOnlyKeys.length&&0===a.bOnlyKeys.length&&set_1$1.isSubset(new KeysAnd(s),new KeysAnd(o))?t:0<a.bOnlyKeys.length&&0===a.aOnlyKeys.length&&set_1$1.isSubset(new KeysAnd(o),new KeysAnd(s))?e:new types.ValuesOr([e,t])},intersection:function(e,t){var a=e.values,n=t.values,r=!1,s={};return eachInUnique(a,function(e,t,a){s[e]=a===MISSING?t:set_1$1.intersection(t,a),s[e]===set_1$1.EMPTY&&(r=!0)},n,function(e,t,a){s[e]=a,s[e]===set_1$1.EMPTY&&(r=!0)}),r?set_1$1.EMPTY:new KeysAnd(s)},difference:difference}),set_1$1.defineComparison(set_1$1.UNIVERSAL,KeysAnd,{difference:function(e,t){return difference({values:{}},t)}});var keysAnd=types.KeysAnd=KeysAnd,andOrNot={KeysAnd:keysAnd,ValuesOr:valuesOr,ValuesNot:valuesNot},defaultCompare={$gt:function(e,t){return e>t},$lt:function(e,t){return e<t}},helpers$1={uniqueConcat:function(e,t,a){var n=new Set;return e.concat(t).filter(function(e){var t=a(e);return!n.has(t)&&(n.add(t),!0)})},getIndex:function(e,t,a){if(t&&t.length){if(-1===e(a,t[0]))return 0;if(1===e(a,t[t.length-1]))return t.length;for(var n=0,r=t.length;n<r;){var s=n+r>>>1,o=t[s],i=e(a,o);-1===i?r=s:n=s+1}return r}},sortData:function(e){return"-"===e[0]?{prop:e.slice(1),desc:!0}:{prop:e,desc:!1}},defaultCompare:defaultCompare,sorter:function(e,t){var a=helpers$1.sortData(e),n;return n=t&&t[a.prop]?t[a.prop]:defaultCompare,function(e,t){var r=canReflect_1_17_4_canReflect.getKeyValue(e,a.prop),s=canReflect_1_17_4_canReflect.getKeyValue(t,a.prop),o;return a.desc&&(o=r,r=s,s=o),n.$lt(r,s)?-1:n.$gt(r,s)?1:0}},valueHydrator:function(e){if(canReflect_1_17_4_canReflect.isBuiltIn(e))return e;throw new Error("can-query-logic doesn't support comparison operator: "+JSON.stringify(e))}},helpers_1$1=helpers$1,isMemberSymbol$3=canSymbol_1_6_1_canSymbol.for("can.isMember"),KeysAnd$1=andOrNot.KeysAnd,Or=andOrNot.ValuesOr,Not=andOrNot.ValuesNot,RecordRange=makeRealNumberRangeInclusive(0,1/0);function makeSort(e,t){function a(e){this.key=e,this.compare=helpers_1$1.sorter(e,n)}var n={};return canReflect_1_17_4_canReflect.eachKey(e,function(e,a){n[a]={$gt:function(n,r){var s=t({$gt:r},a,e,helpers_1$1.valueHydrator);return s[isMemberSymbol$3](n)},$lt:function(n,r){var s=t({$lt:r},a,e,helpers_1$1.valueHydrator);return s[isMemberSymbol$3](n)}}}),set_1$1.defineComparison(a,a,{intersection:function(e,t){return e.key===t.key?e:set_1$1.EMPTY},difference:function(e,t){return e.key===t.key?set_1$1.EMPTY:e},union:function(e,t){return e.key===t.key?e:set_1$1.UNDEFINABLE}}),a}var DefaultSort=makeSort({});function BasicQuery(e){canAssign_1_3_1_canAssign(this,e),this.filter||(this.filter=set_1$1.UNIVERSAL),this.page||(this.page=new RecordRange),this.sort||(this.sort="id"),"string"==typeof this.sort&&(this.sort=new DefaultSort(this.sort))}BasicQuery.KeysAnd=KeysAnd$1,BasicQuery.Or=Or,BasicQuery.Not=Not,BasicQuery.RecordRange=RecordRange,BasicQuery.makeSort=makeSort,canReflect_1_17_4_canReflect.assignMap(BasicQuery.prototype,{count:function(){return this.page.end-this.page.start+1},sortData:function(e){return e.slice(0).sort(this.sort.compare)},filterMembersAndGetCount:function(e,t){if(!t)t=new BasicQuery;else if(!set_1$1.isSubset(this,t))throw new Error("can-query-logic: Unable to get members from a set that is not a superset of the current set.");var a=e.filter(function(e){return this.filter.isMember(e)},this),n=a.length;n&&this.sort.key!==t.sort.key&&(a=this.sortData(a));var r=set_1$1.isEqual(this.page,set_1$1.UNIVERSAL),s=set_1$1.isEqual(t.page,set_1$1.UNIVERSAL);if(s)return r?{data:a,count:n}:{data:a.slice(this.page.start,this.page.end+1),count:n};if(this.sort.key===t.sort.key&&set_1$1.isEqual(t.filter,this.filter))return{data:a.slice(this.page.start-t.page.start,this.page.end-t.page.start+1),count:n};throw new Error("can-query-logic: Unable to get members from the parent set for this subset.")},filterFrom:function(e,t){return this.filterMembersAndGetCount(e,t).data},merge:function(e,t,a,n){var r=set_1$1.union(this,e);if(r!==set_1$1.UNDEFINABLE){var s=helpers_1$1.uniqueConcat(t,a,n);return r.sortData(s)}},index:function(e,t){var a=helpers_1$1.sortData(this.sort.key);return canReflect_1_17_4_canReflect.hasOwnKey(e,a.prop)?helpers_1$1.getIndex(this.sort.compare,t,e):void 0},isMember:function(e){return this.filter.isMember(e)},removePagination:function(){this.page=new RecordRange}});var CLAUSE_TYPES=["filter","page","sort"];function getDifferentClauseTypes(e,t){var a=[];return CLAUSE_TYPES.forEach(function(n){set_1$1.isEqual(e[n],t[n])||a.push(n)}),a}function isSubset(e,t,a){return!!a[e+"FilterIsSubset"]&&(!!a[t+"PageIsUniversal"]||a[e+"PageIsSubset"]&&a.sortIsEqual)}function MetaInformation(e,t){this.queryA=e,this.queryB=t}canReflect_1_17_4_canReflect.eachKey({pageIsEqual:function(){return set_1$1.isEqual(this.queryA.page,this.queryB.page)},aPageIsUniversal:function(){return set_1$1.isEqual(this.queryA.page,set_1$1.UNIVERSAL)},bPageIsUniversal:function(){return set_1$1.isEqual(this.queryB.page,set_1$1.UNIVERSAL)},pagesAreUniversal:function(){return this.pageIsEqual&&this.aPageIsUniversal},sortIsEqual:function(){return this.queryA.sort.key===this.queryB.sort.key},aFilterIsSubset:function(){return set_1$1.isSubset(this.queryA.filter,this.queryB.filter)},bFilterIsSubset:function(){return set_1$1.isSubset(this.queryB.filter,this.queryA.filter)},aPageIsSubset:function(){return set_1$1.isSubset(this.queryA.page,this.queryB.page)},bPageIsSubset:function(){return set_1$1.isSubset(this.queryB.page,this.queryA.page)},filterIsEqual:function(){return set_1$1.isEqual(this.queryA.filter,this.queryB.filter)},aIsSubset:function(){return isSubset("a","b",this)},bIsSubset:function(){return isSubset("b","a",this)}},function(e,t){canDefineLazyValue_1_1_0_defineLazyValue(MetaInformation.prototype,t,e)});function metaInformation(e,t){var a=new MetaInformation(e,t);return a}set_1$1.defineComparison(BasicQuery,BasicQuery,{union:function(e,t){var a=metaInformation(e,t),n=set_1$1.union(e.filter,t.filter);if(a.pagesAreUniversal)return new BasicQuery({filter:n,sort:a.sortIsEqual?e.sort.key:void 0});if(a.filterIsEqual)return a.sortIsEqual?new BasicQuery({filter:e.filter,sort:e.sort.key,page:set_1$1.union(e.page,t.page)}):a.aIsSubset?t:a.bIsSubset?e:set_1$1.UNDEFINABLE;throw new Error("different filters, non-universal pages")},intersection:function(e,t){var a=metaInformation(e,t);if(a.pagesAreUniversal){var n=set_1$1.intersection(e.filter,t.filter);return set_1$1.isDefinedAndHasMembers(n)?new BasicQuery({filter:n,sort:a.sortIsEqual?e.sort.key:void 0}):n}return set_1$1.intersection(e.filter,t.filter)===set_1$1.EMPTY?set_1$1.EMPTY:a.filterIsEqual?a.sortIsEqual?new BasicQuery({filter:e.filter,sort:e.sort.key,page:set_1$1.intersection(e.page,t.page)}):a.aIsSubset?e:a.bIsSubset?t:set_1$1.UNKNOWABLE:a.aIsSubset?e:a.bIsSubset?t:set_1$1.UNDEFINABLE},difference:function(e,t){var a=getDifferentClauseTypes(e,t),n=metaInformation(e,t),r;if(1<a.length)return n.aIsSubset?set_1$1.EMPTY:n.pagesAreUniversal?new BasicQuery({filter:set_1$1.difference(e.filter,t.filter),sort:e.sort.key}):set_1$1.UNDEFINABLE;switch(r=a[0]){case void 0:return set_1$1.EMPTY;case"sort":return n.pagesAreUniversal?set_1$1.EMPTY:set_1$1.UNKNOWABLE;case"page":case"filter":{var s=set_1$1.difference(e[r],t[r]);if(set_1$1.isSpecial(s))return s;var o={filter:e.filter,page:e.page,sort:e.sort.key};return o[r]=s,new BasicQuery(o)}}}});var basicQuery=BasicQuery,Serializer=function(e){this.serializers=new Map(e||[]),this.serialize=this.serialize.bind(this)};Serializer.prototype.add=function(e){canReflect_1_17_4_canReflect.assign(this.serializers,e instanceof Serializer?e.serializers:e)},Serializer.prototype.serialize=function(e){if(!e)return e;var t=e.constructor,a=this.serializers.get(t);return a?a(e,this.serialize):canReflect_1_17_4_canReflect.serialize(e)};var serializer=Serializer;function makeNew(e){return function(t){return new e(t)}}var hydrateMap={};function addHydrateFrom(e,t){hydrateMap[e]=function(a,n){return t(n?n(a[e]):a[e])},Object.defineProperty(hydrateMap[e],"name",{value:"hydrate "+e,writable:!0})}function addHydrateFromValues(e,t){hydrateMap[e]=function(a,n){var r=a[e];return n&&(r=r.map(function(e){return n(e)})),t(r)},Object.defineProperty(hydrateMap[e],"name",{value:"hydrate "+e,writable:!0})}addHydrateFrom("$eq",function(e){return new comparisons_1.In([e])}),addHydrateFrom("$ne",function(e){return new comparisons_1.NotIn([e])}),addHydrateFrom("$gt",makeNew(comparisons_1.GreaterThan)),addHydrateFrom("$gte",makeNew(comparisons_1.GreaterThanEqual)),addHydrateFromValues("$in",makeNew(comparisons_1.In)),addHydrateFrom("$lt",makeNew(comparisons_1.LessThan)),addHydrateFrom("$lte",makeNew(comparisons_1.LessThanEqual)),addHydrateFromValues("$nin",makeNew(comparisons_1.GreaterThan));var serializer$1=new serializer([[comparisons_1.In,function(e,t){return 1===e.values.length?t(e.values[0]):{$in:e.values.map(t)}}],[comparisons_1.NotIn,function(e,t){return 1===e.values.length?{$ne:t(e.values[0])}:{$nin:e.values.map(t)}}],[comparisons_1.GreaterThan,function(e,t){return{$gt:t(e.value)}}],[comparisons_1.GreaterThanEqual,function(e,t){return{$gte:t(e.value)}}],[comparisons_1.LessThan,function(e,t){return{$lt:t(e.value)}}],[comparisons_1.LessThanEqual,function(e,t){return{$lte:t(e.value)}}],[comparisons_1.And,function(e,t){var a={};return e.values.forEach(function(e){canReflect_1_17_4_canReflect.assignMap(a,t(e))}),a}]]),comparisons$1={hydrate:function(e,t){if(t||(t=function(){throw new Error("can-query-logic doesn't recognize operator: "+JSON.stringify(e))}),Array.isArray(e))return new comparisons_1.In(e);if(e&&"object"==typeof e){var a=Object.keys(e),n=a.every(function(e){return hydrateMap[e]});if(n){var r=a.map(function(a){var n={};n[a]=e[a];var r=hydrateMap[a];return r(n,t)});return 1<r.length?new comparisons_1.And(r):r[0]}return t(e)}return new comparisons_1.In([e])},serializer:serializer$1},schemaHelpers_1=schemaHelpers={isRangedType:function(e){return e&&canReflect_1_17_4_canReflect.isConstructorLike(e)&&!set_1$1.hasComparisons(e)&&!e[canSymbol_1_6_1_canSymbol.for("can.SetType")]&&e.prototype.valueOf&&e.prototype.valueOf!==Object.prototype.valueOf},categorizeOrValues:function(e){var t={primitives:[],valueOfTypes:[],others:[]};return e.forEach(function(e){canReflect_1_17_4_canReflect.isPrimitive(e)?t.primitives.push(e):schemaHelpers.isRangedType(e)?t.valueOfTypes.push(e):t.others.push(e)}),t}},comparisonSetTypeSymbol=canSymbol_1_6_1_canSymbol.for("can.ComparisonSetType"),isMemberSymbol$4=canSymbol_1_6_1_canSymbol.for("can.isMember"),schemaHelpers;function splitByRangeAndEnum(e,t){var a;if(t instanceof comparisons_1.And){var n=t.values.map(function(t){return splitByRangeAndEnum(e,t)});return n.reduce(function(e,t){return{range:set_1$1.intersection(e.range,t.range),enum:set_1$1.intersection(e.enum,t.enum)}},{range:set_1$1.UNIVERSAL,enum:e})}if(t instanceof comparisons_1.In){var r=t.values.filter(function(t){return e.isMember(t)});if(r.length){var s=t.values.slice(0);return canReflect_1_17_4_canReflect.removeValues(s,r),{enum:new comparisons_1.In(r),range:s.length?new comparisons_1.In(s):set_1$1.EMPTY}}return{enum:set_1$1.EMPTY,range:t}}if(t instanceof comparisons_1.NotIn){a=set_1$1.intersection(e,t);var o=t.values.filter(function(t){return!e.isMember(t)});return{range:o.length?new comparisons_1.NotIn(o):set_1$1.UNIVERSAL,enum:a}}return{enum:set_1$1.EMPTY,range:t}}function makeMaybe(e,t){function a(e){var t=splitByRangeAndEnum(n,e.range);if(this.range=t.range||set_1$1.EMPTY,this.enum=e.enum?t.enum===set_1$1.EMPTY?e.enum:set_1$1.union(t.enum,e.enum):t.enum,this.enum===set_1$1.EMPTY&&this.range===set_1$1.EMPTY)return set_1$1.EMPTY}var n=new comparisons_1.In(e);return a.prototype.orValues=function(){var e=[];return this.range!==set_1$1.EMPTY&&e.push(this.range),this.enum!==set_1$1.EMPTY&&e.push(this.enum),e},a.prototype[isMemberSymbol$4]=function(){var e=this.range[isMemberSymbol$4]||this.range.isMember,t=this.enum[isMemberSymbol$4]||this.enum.isMember;return e.apply(this.range,arguments)||t.apply(this.enum,arguments)},set_1$1.defineComparison(a,a,{union:function(e,t){var n=set_1$1.union(e.enum,t.enum),r=set_1$1.union(e.range,t.range);return new a({enum:n,range:r})},difference:function(e,t){var n=set_1$1.difference(e.enum,t.enum),r=set_1$1.difference(e.range,t.range);return new a({enum:n,range:r})},intersection:function(e,t){var n=set_1$1.intersection(e.enum,t.enum),r=set_1$1.intersection(e.range,t.range);return new a({enum:n,range:r})}}),a.inValues=e,set_1$1.defineComparison(set_1$1.UNIVERSAL,a,{difference:function(e,t){var r,s;if(t.range===set_1$1.UNIVERSAL)return new a({range:t.range,enum:set_1$1.difference(n,t.enum)});if(t.enum===set_1$1.EMPTY){var o=set_1$1.difference(set_1$1.UNIVERSAL,t.range),i=set_1$1.difference(n,t.range),l=set_1$1.difference(i,o);return new a({range:o,enum:l})}return r=set_1$1.difference(e,t.range),s=set_1$1.difference(n,t.enum),new a({enum:s,range:r})}}),t=t||function(e){return e},a.hydrate=function(e,n){return new a({range:n(e,t)})},a}makeMaybe.canMakeMaybeSetType=function(e){var t=canReflect_1_17_4_canReflect.getSchema(e);if(t&&"Or"===t.type){var a=schemaHelpers_1.categorizeOrValues(t.values);return 1===a.valueOfTypes.length&&a.valueOfTypes.length+a.primitives.length===t.values.length}return!1},makeMaybe.makeMaybeSetTypes=function(e){var t=canReflect_1_17_4_canReflect.getSchema(e),a=schemaHelpers_1.categorizeOrValues(t.values),n;return e[comparisonSetTypeSymbol]?n=e[comparisonSetTypeSymbol]:(n=function(t){this.value=canReflect_1_17_4_canReflect.new(e,t)},n.prototype.valueOf=function(){return this.value},canReflect_1_17_4_canReflect.assignSymbols(n.prototype,{"can.serialize":function(){return this.value}})),{Maybe:makeMaybe(a.primitives,function(e){return new n(e)}),ComparisonSetType:n}};var makeMaybe_1=makeMaybe,setTypeSymbol=canSymbol_1_6_1_canSymbol.for("can.SetType"),isMemberSymbol$5=canSymbol_1_6_1_canSymbol.for("can.isMember"),newSymbol$2=canSymbol_1_6_1_canSymbol.for("can.new");function makeEnumSetType(e,t){function a(e){var a=Array.isArray(e)?e:[e];this.values=t?a.map(t):a}canReflect_1_17_4_canReflect.assignSymbols(a.prototype,{"can.serialize":function(){return 1===this.values.length?this.values[0]:this.values}}),a.prototype[isMemberSymbol$5]=function(e){return this.values.some(function(t){return set_1$1.isEqual(t,e)})},a.UNIVERSAL=new a(e);var n=function(e,t){var n=arrayUnionIntersectionDifference(e.values,t.values);return n.difference.length?new a(n.difference):set_1$1.EMPTY};return set_1$1.defineComparison(a,a,{union:function(e,t){var n=arrayUnionIntersectionDifference(e.values,t.values);return n.union.length?new a(n.union):set_1$1.EMPTY},intersection:function(e,t){var n=arrayUnionIntersectionDifference(e.values,t.values);return n.intersection.length?new a(n.intersection):set_1$1.EMPTY},difference:n}),set_1$1.defineComparison(a,set_1$1.UNIVERSAL,{difference:function(t){return n(t,{values:e.slice(0)})}}),set_1$1.defineComparison(set_1$1.UNIVERSAL,a,{difference:function(t,a){return n({values:e.slice(0)},a)}}),a}function makeEnum$1(e,t,a){var n=makeEnumSetType(t,a);return e[setTypeSymbol]=n,e[isMemberSymbol$5]=function(e){return t.some(function(t){return set_1$1.isEqual(t,e)})},n}makeEnum$1.canMakeEnumSetType=function(e){var t=canReflect_1_17_4_canReflect.getSchema(e);if(t&&"Or"===t.type){var a=schemaHelpers_1.categorizeOrValues(t.values);return a.primitives.length===t.values.length}return!1},makeEnum$1.makeEnumSetType=function(e){var t=canReflect_1_17_4_canReflect.getSchema(e),a=schemaHelpers_1.categorizeOrValues(t.values),n=e[newSymbol$2]?e[newSymbol$2].bind(e):void 0;return makeEnumSetType(a.primitives,n)};var makeEnum_1=makeEnum$1,setTypeSymbol$1=canSymbol_1_6_1_canSymbol.for("can.SetType"),schemaSymbol=canSymbol_1_6_1_canSymbol.for("can.getSchema"),defaultQuery=new basicQuery({});function getSchemaProperties(e){var t=e.constructor;if(t&&t[schemaSymbol]){var a=t[schemaSymbol]();return a.keys||{}}return{}}function hydrateFilter(e,t,a){return e&&"object"==typeof e&&"$or"in e?hydrateOrs(e.$or,t,a):hydrateAndValues(e,t,a)}var setTypeMap=new WeakMap;function hydrateAndValue(e,t,a,n){if(a){var r=a[setTypeSymbol$1];return r?r.hydrate?r.hydrate(e,comparisons$1.hydrate):set_1$1.hasComparisons(r)?new r(e):comparisons$1.hydrate(e,function(e){return new r(e)}):makeEnum_1.canMakeEnumSetType(a)?(setTypeMap.has(a)||setTypeMap.set(a,makeEnum_1.makeEnumSetType(a)),r=setTypeMap.get(a),new r(e)):makeMaybe_1.canMakeMaybeSetType(a)?(setTypeMap.has(a)||setTypeMap.set(a,makeMaybe_1.makeMaybeSetTypes(a)),r=setTypeMap.get(a).Maybe,r.hydrate(e,comparisons$1.hydrate)):comparisons$1.hydrate(e,n)}return comparisons$1.hydrate(e,n)}function hydrateAndValues(e,t,a){function n(e){if(e){if(Array.isArray(e))return e.map(a);if(canReflect_1_17_4_canReflect.isPlainObject(e))return hydrateAndValues(e,getSchemaProperties(e))}return a?a(e):e}t=t||{};var r={};return canReflect_1_17_4_canReflect.eachKey(e,function(e,a){r[a]=hydrateAndValue(e,a,t[a],n)}),new basicQuery.KeysAnd(r)}function combineAnds(e){var t=Object.keys(e[0].values),a={},n=new comparisons_1.In(t);t.map(function(e){a[e]=[]});var r=e.every(function(e){return!!set_1$1.isEqual(n,new comparisons_1.In(Object.keys(e.values)))&&(canReflect_1_17_4_canReflect.eachKey(e.values,function(e,t){a[t].push(e)}),!0)});if(r){var s=[];if(t.forEach(function(e){var t=a[e].reduce(function(e,t){if(!1===t)return!1;if(void 0===t)return e;var a=set_1$1.isEqual(e,t);return!!a&&e});t||s.push(e)}),1===s.length){var o=s[0],i=a[o].reduce(function(e,t){return set_1$1.union(e,t)},set_1$1.EMPTY),l={};return t.map(function(e){l[e]=a[e][0]}),l[o]=i,new basicQuery.KeysAnd(l)}}}function hydrateOrs(e,t,a){var n=e.map(function(e){return hydrateAndValues(e,t,a)}),r=combineAnds(n);return r?r:new basicQuery.Or(n)}function recursivelyAddOrs(e,t,a,n){t.orValues().forEach(function(t){if("function"==typeof t.orValues)recursivelyAddOrs(e,t,a,n);else{var r={};r[n]=a(t),e.push(r)}})}var basicQuery$1=function(e){var t=e.identity&&e.identity[0],a=e.keys,n=[[basicQuery.Or,function(e,t){return e.values.map(function(e){return t(e)})}],[basicQuery.KeysAnd,function(e,t){var a=[],n={};return canReflect_1_17_4_canReflect.eachKey(e.values,function(e,r){"function"==typeof e.orValues?recursivelyAddOrs(a,e,t,r):n[r]=t(e)}),a.length?1===a.length?a[0]:{$or:a.map(function(e){return canReflect_1_17_4_canReflect.assign(canReflect_1_17_4_canReflect.serialize(n),e)})}:n}],[basicQuery.RecordRange,function(e){return{start:e.start,end:e.end}}],[basicQuery,function(e,a){var n=set_1$1.isEqual(e.filter,set_1$1.UNIVERSAL)?{}:a(e.filter),r={};return 0!==canReflect_1_17_4_canReflect.size(n)&&(r.filter=n),set_1$1.isEqual(e.page,defaultQuery.page)||(r.page={start:e.page.start},e.page.end!==defaultQuery.page.end&&(r.page.end=e.page.end)),e.sort.key!==t&&(r.sort=e.sort.key),r}]],r=basicQuery.makeSort(a,hydrateAndValue),s=new serializer(n);return s.add(comparisons$1.serializer),{hydrate:function(e){var n=canReflect_1_17_4_canReflect.serialize(e.filter),s=hydrateFilter(n,a,helpers_1$1.valueHydrator),o={filter:s};return e.page&&(o.page=new basicQuery.RecordRange(e.page.start,e.page.end)),o.sort=e.sort?new r(e.sort):new r(t),new basicQuery(o)},serializer:s}},schemaSymbol$1=canSymbol_1_6_1_canSymbol.for("can.getSchema"),newSymbol$3=canSymbol_1_6_1_canSymbol.for("can.new");function QueryLogic(e,t){e=e||{};var a=t&&t.toQuery,n=t&&t.toParams,r;r=e[schemaSymbol$1]?e[schemaSymbol$1]():e;var s=r.identity&&r.identity[0];s||(r.identity=["id"]);var o=basicQuery$1(r),i,l;i=a?function(e){return o.hydrate(a(e))}:o.hydrate,l=n?function(e){return n(o.serializer.serialize(e))}:o.serializer.serialize,this.hydrate=i,this.serialize=l,this.schema=r}function makeNewSet(e){return function(t,a){var n=this.hydrate(t),r=this.hydrate(a),s=set_1$1[e](n,r);return this.serialize(s)}}function makeReturnValue(e){return function(t,a){var n=this.hydrate(t),r=this.hydrate(a);return set_1$1[e](n,r)}}for(var prop$2 in canReflect_1_17_4_canReflect.assignSymbols(QueryLogic.prototype,{"can.getSchema":function(){return this.schema}}),canReflect_1_17_4_canReflect.assign(QueryLogic.prototype,{union:makeNewSet("union"),difference:makeNewSet("difference"),intersection:makeNewSet("intersection"),isEqual:makeReturnValue("isEqual"),isProperSubset:makeReturnValue("isProperSubset"),isSubset:makeReturnValue("isSubset"),isSpecial:set_1$1.isSpecial,isDefinedAndHasMembers:set_1$1.isDefinedAndHasMembers,count:function(e){var t=this.hydrate(e);return t.page.end-t.page.start+1},identityKeys:function(){return this.schema.identity},filterMembers:function(e,t,a){var n=this.hydrate(e);if(3<=arguments.length){var r=this.hydrate(t);return n.filterFrom(a,r)}return n.filterFrom(t)},filterMembersAndGetCount:function(e,t,a){var n=this.hydrate(e),r=this.hydrate(t);return n.filterMembersAndGetCount(a,r)},unionMembers:function(e,t,a,n){var r=this.hydrate(e),s=this.hydrate(t),o=this.schema;return r.merge(s,a,n,function(e){return canReflect_1_17_4_canReflect.getIdentity(e,o)})},isMember:function(e,t){return this.hydrate(e).isMember(t)},memberIdentity:function(e){return canReflect_1_17_4_canReflect.getIdentity(e,this.schema)},index:function(e,t,a){return this.hydrate(e).index(a,t)},insert:function(e,t,a){var n=this.index(e,t,a);void 0===n&&(n=t.length);var r=t.slice(0);return r.splice(n,0,a),r},isPaginated:function(e){var t=this.hydrate(e);return!set_1$1.isEqual(t.page,set_1$1.UNIVERSAL)},removePagination:function(e){var t=this.hydrate(e);return t.removePagination(),this.serialize(t)}}),set_1$1)void 0===QueryLogic[prop$2]&&(QueryLogic[prop$2]=set_1$1[prop$2]);QueryLogic.makeEnum=function(e){var t=function(){};return t[newSymbol$3]=function(e){return e},makeEnum_1(t,e),t},QueryLogic.KeysAnd=basicQuery.KeysAnd,QueryLogic.ValuesOr=basicQuery.Or,QueryLogic.In=comparisons_1.In,QueryLogic.NotIn=comparisons_1.NotIn,QueryLogic.GreaterThan=comparisons_1.GreaterThan,QueryLogic.GreaterThanEqual=comparisons_1.GreaterThanEqual,QueryLogic.LessThan=comparisons_1.LessThan,QueryLogic.LessThanEqual=comparisons_1.LessThanEqual,QueryLogic.ValueAnd=comparisons_1.And,QueryLogic.ValueOr=comparisons_1.Or;var canQueryLogic_1_1_0_canQueryLogic=QueryLogic;function deepMatches(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t))return e.every(function(e,a){return deepMatches(e,t[a])});if(e&&t&&canReflect_1_17_4_canReflect.isPlainObject(e)&&canReflect_1_17_4_canReflect.isPlainObject(t)){for(var a in e){if(!t.hasOwnProperty(a))return!1;if(!deepMatches(e[a],t[a]))return!1}return!0}return!1}function removeFixtureAndXHR(e){if(e.fixture||e.xhr||e.data){var t=canReflect_1_17_4_canReflect.serialize(e);return delete t.fixture,delete t.xhr,delete t.data,t}return e}function identityIntersection$1(e,t){return e.value===t.value?e:set_1$1.EMPTY}function identityDifference$1(e,t){return e.value===t.value?set_1$1.EMPTY:e}function identityUnion$1(e,t){return e.value===t.value?e:set_1$1.UNDEFINABLE}var identityComparitor$1={intersection:identityIntersection$1,difference:identityDifference$1,union:identityUnion$1};function makeComparatorType(e){var t=function(){},a=function(e){this.value=e};return a.prototype.isMember=function(t,a,n){return e(this.value,t,a,n)},canReflect_1_17_4_canReflect.assignSymbols(t,{"can.SetType":a}),set_1$1.defineComparison(a,a,identityComparitor$1),set_1$1.defineComparison(set_1$1.UNIVERSAL,a,{difference:function(){return set_1$1.UNDEFINABLE}}),t}function quickEqual(e,t){var a=e.data,n=t.data;if(a&&n&&!deepMatches(a,n))return!1;var r=new canQueryLogic_1_1_0_canQueryLogic.KeysAnd(removeFixtureAndXHR(e)),s=new canQueryLogic_1_1_0_canQueryLogic.KeysAnd(removeFixtureAndXHR(t));return set_1$1.isEqual(r,s)}function quickSubset(e,t){return set_1$1.isSubset(new canQueryLogic_1_1_0_canQueryLogic.KeysAnd(e),new canQueryLogic_1_1_0_canQueryLogic.KeysAnd(t))}var types$1={};canReflect_1_17_4_canReflect.eachKey({IsEmptyOrNull:function(e,t){return!(null!=e||0!==canReflect_1_17_4_canReflect.size(t))||null==t&&0===canReflect_1_17_4_canReflect.size(e)||quickEqual(e,t)},isEmptyOrSubset:function(e,t){return!(null!=e||0!==canReflect_1_17_4_canReflect.size(t))||null==t&&0===canReflect_1_17_4_canReflect.size(e)||quickSubset(e,t)},TemplateUrl:function(e,t){return!!canFixture_3_0_0_dataFromUrl(e,t)},StringIgnoreCase:function(e,t){return t&&e?e.toLowerCase()===t.toLowerCase():t===e},Ignore:function(){return!0}},function(e,t){types$1[t]=makeComparatorType(e)});var schema$1={identity:["id"],keys:{url:types$1.TemplateUrl,fixture:types$1.Ignore,xhr:types$1.Ignore,type:types$1.StringIgnoreCase,method:types$1.StringIgnoreCase,helpers:types$1.Ignore,headers:types$1.IsEmptyOrNull,data:types$1.IsEmptyOrSubset}},query=new canQueryLogic_1_1_0_canQueryLogic(schema$1),canFixture_3_0_0_matches={fixture:quickEqual,request:function(e,t){return query.isMember({filter:t},e)},matches:function(e,t,a){return a?this.fixture(e,t):this.request(e,t)},makeComparatorType:makeComparatorType};function getItems(e){return Array.isArray(e)?e:e.data}function indexOf(e,t,a){for(var n=canReflect_1_17_4_canReflect.getSchema(a),r=0;r<e.length;r++)if(t===canReflect_1_17_4_canReflect.getIdentity(e[r],n))return r;return-1}function makeSimpleStore(e){e.constructor=makeSimpleStore;var t=Object.create(e);return canReflect_1_17_4_canReflect.assignMap(t,{getRecordFromParams:function(e){var t=canReflect_1_17_4_canReflect.getIdentity(e,this.queryLogic.schema);return this.getRecord(t)},log:function(){this._log=!0},getSets:function(){return this.getQueries()},getQueries:function(){return Promise.resolve(this.getQueriesSync())},getQueriesSync:function(){return this.getQueryDataSync().map(function(e){return e.query})},getListData:function(e){e=e||{};var t=this.getListDataSync(e);return t?Promise.resolve(t):Promise.reject({title:"no data",status:"404",detail:"No data available for this query.\nAvailable queries: "+JSON.stringify(this.getQueriesSync())})},getPaginatedListDataSync:function(e){var t=this.getAllRecords(),a=this.queryLogic.removePagination(e.query),n=this.queryLogic.filterMembersAndGetCount(a,{},t),r=indexOf(n.data,e.startIdentity,this.queryLogic),s=n.data.slice(r,r+this.queryLogic.count(e.query));return{count:n.data.length,data:s}},getListDataSync:function(e){for(var t=this.getQueryDataSync(),a=this.queryLogic.isPaginated(e),n=0,r,s;n<t.length;n++)s=t[n].query,this.queryLogic.isSubset(e,s)&&(r=t[n]);var o=this.getAllRecords();if(a&&this.queryLogic.isPaginated(r.query)){var l=this.getPaginatedListDataSync(r);return this.queryLogic.filterMembersAndGetCount(e,r.query,l.data)}var d=this.queryLogic.filterMembersAndGetCount(e,{},o);return d&&d.count?d:r?{count:0,data:[]}:void 0},updateListData:function(e,t){var a=this.getQueryDataSync();t=t||{};var n=canReflect_1_17_4_canReflect.serialize(e),r=getItems(n);this.updateRecordsSync(r);var s=this.queryLogic.isPaginated(t),o=r.length?canReflect_1_17_4_canReflect.getIdentity(r[0],this.queryLogic.schema):void 0;if(s){for(var l=0;l<a.length;l++){var d=a[l].query,p=this.queryLogic.union(d,t);if(this.queryLogic.isDefinedAndHasMembers(p)){var c=this.getPaginatedListDataSync(a[l]),u=this.queryLogic.unionMembers(d,t,c.data,r);return o=canReflect_1_17_4_canReflect.getIdentity(u[0],this.queryLogic.schema),a[l]={query:p,startIdentity:o},this.updateQueryDataSync(a),Promise.resolve()}}return a.push({query:t,startIdentity:o}),this.updateQueryDataSync(a),Promise.resolve()}var y=this.getAllRecords(),h=this.queryLogic.filterMembers(t,y);if(h.length){var g=new Map;h.forEach(function(e){g.set(canReflect_1_17_4_canReflect.getIdentity(e,this.queryLogic.schema),e)},this),r.forEach(function(e){g.delete(canReflect_1_17_4_canReflect.getIdentity(e,this.queryLogic.schema))},this),this.destroyRecords(canReflect_1_17_4_canReflect.toArray(g.values()))}var m=this.getQueryDataSync(),f=m.filter(function(e){return!this.queryLogic.isSubset(e.query,t)},this),b=f.filter(function(e){return this.queryLogic.isSubset(t,e.query)},this);return b.length?this.updateQueryDataSync(f):this.updateQueryDataSync(f.concat([{query:t,startIdentity:o}])),Promise.resolve()},getData:function(e){var t=canReflect_1_17_4_canReflect.getIdentity(e,canReflect_1_17_4_canReflect.getSchema(this.queryLogic)),a=this.getRecord(t);return a?Promise.resolve(a):Promise.reject({title:"no data",status:"404",detail:"No record with matching identity ("+t+")."})},createData:function(e){return this.updateRecordsSync([e]),Promise.resolve(canReflect_1_17_4_canReflect.assignMap({},this.getRecordFromParams(e)))},updateData:function(e){if(this.errorOnMissingRecord&&!this.getRecordFromParams(e)){var t=canReflect_1_17_4_canReflect.getIdentity(e,this.queryLogic.schema);return Promise.reject({title:"no data",status:"404",detail:"No record with matching identity ("+t+")."})}return this.updateRecordsSync([e]),Promise.resolve(canReflect_1_17_4_canReflect.assignMap({},this.getRecordFromParams(e)))},destroyData:function(e){var t=canReflect_1_17_4_canReflect.getIdentity(e,this.queryLogic.schema),a=this.getRecordFromParams(e);return this.errorOnMissingRecord&&!a?Promise.reject({title:"no data",status:"404",detail:"No record with matching identity ("+t+")."}):(this.destroyRecords([e]),Promise.resolve(canReflect_1_17_4_canReflect.assignMap({},a||e)))}})}var canMemoryStore_1_0_0_makeSimpleStore=makeSimpleStore,canMemoryStore_1_0_0_canMemoryStore=canNamespace_1_0_0_canNamespace.memoryStore=function e(t){t.constructor=e;var a=Object.create(canMemoryStore_1_0_0_makeSimpleStore(t));return canReflect_1_17_4_canReflect.assignMap(a,{clear:function(){this._instances={},this._queries=[]},_queryData:[],updateQueryDataSync:function(e){this._queryData=e},getQueryDataSync:function(){return this._queryData},_instances:{},getRecord:function(e){return this._instances[e]},getAllRecords:function(){var e=[];for(var t in this._instances)e.push(this._instances[t]);return e},destroyRecords:function(e){canReflect_1_17_4_canReflect.eachIndex(e,function(e){var t=canReflect_1_17_4_canReflect.getIdentity(e,this.queryLogic.schema);delete this._instances[t]},this)},updateRecordsSync:function(e){e.forEach(function(e){var t=canReflect_1_17_4_canReflect.getIdentity(e,this.queryLogic.schema);this._instances[t]=e},this)}}),a},connectToConnection=function(e,t){return function(a,n){this.connection[e](t.call(this,a.data)).then(function(e){n(e)},function(e){n(parseInt(e.status,10),e)})}},makeMakeItems=function(e,t){return function(){var a=[],n=0;return e.forEach(function(e){a.push(canReflect_1_17_4_canReflect.serialize(e)),n=Math.max(e[t],n)}),{maxId:n,items:a}}},stringToAny=function(e){switch(e){case"NaN":case"Infinity":return+e;case"null":return null;case"undefined":return;case"true":case"false":return"true"===e;default:var t=+e;return isNaN(t)?e:t;}},Store=function(e,t,a){var n=e.queryLogic.schema,r=n.identity[0],s=n.keys;for(var o in s&&s[r]||console.warn("No type specified for identity key. Going to convert strings to reasonable type."),this.connection=e,this.makeItems=t,this.idProp=a,this.reset(),Store.prototype)this[o]=this[o].bind(this)},doNotConvert=function(e){return e};function typeConvert(e){var t=this.connection.queryLogic.schema,a=t.identity[0],n=t.keys;n&&n[a]||(n={},n[a]=function(e){return"string"==typeof e?stringToAny(e):e});var r={};return canReflect_1_17_4_canReflect.eachKey(e,function(e,t){r[t]=n[t]?canReflect_1_17_4_canReflect.convert(e,n[t]):e}),r}canReflect_1_17_4_canReflect.assignMap(Store.prototype,{getListData:connectToConnection("getListData",doNotConvert),getData:connectToConnection("getData",typeConvert),createData:function(e,t){var a=this.idProp;e.data[a]=++this.maxId,this.connection.createData(typeConvert.call(this,e.data)).then(function(e){t(e)},function(e){t(403,e)})},createInstance:function(e){var t=this.idProp;return t in e||(e[t]=++this.maxId),this.connection.createData(e)},updateData:connectToConnection("updateData",typeConvert),updateInstance:function(e){return this.connection.updateData(e)},destroyInstance:function(e){return this.connection.destroyData(e)},destroyData:connectToConnection("destroyData",typeConvert),reset:function(e){e&&(this.makeItems=makeMakeItems(e,this.idProp));var t=this.makeItems();this.maxId=t.maxId,this.connection.updateListData(t.items,{})},get:function(e){var t=this.connection.queryLogic.memberIdentity(e);return this.connection.getRecord(t)},getList:function(e){return this.connection.getListDataSync(e)}});function looksLikeAQueryLogic(e){return e&&"identityKeys"in e}Store.make=function(e,t,a){var n,r;"number"==typeof e?(a?!looksLikeAQueryLogic(a)&&(a=new canQueryLogic_1_1_0_canQueryLogic(a)):a=new canQueryLogic_1_1_0_canQueryLogic({}),r=a.identityKeys()[0]||"id",n=function(){for(var a=[],n=0,s=0,o;s<e;s++)o=t(s,a),o[r]||(o[r]=s),n=Math.max(o[r],n),a.push(o);return{maxId:n,items:a}}):Array.isArray(e)&&(a=t,a?!looksLikeAQueryLogic(a)&&(a=new canQueryLogic_1_1_0_canQueryLogic(a)):a=new canQueryLogic_1_1_0_canQueryLogic({}),r=a.identityKeys()[0]||"id",n=makeMakeItems(e,r));var s=canMemoryStore_1_0_0_canMemoryStore({queryLogic:a,errorOnMissingRecord:!0});return new Store(s,n,r)};var canFixture_3_0_0_store=Store,canFixture_3_0_0_core=createCommonjsModule(function(e,t){function a(e){return e&&(e.getData||e.getListData)}function n(e){var t=e.match(/(GET|POST|PUT|DELETE|PATCH) (.+)/i);if(!t)return[void 0,e];var a=t[1],n=t[2];return[a,n]}function r(e){var t=/\{(.*)\}/,a=e.match(t),n=a&&2===a.length;if(n)return a[1]}function s(e,t){if(t=t||r(e),!t)return[void 0,e];var a=new RegExp("\\/\\{"+t+"\\}.*"),n=a.test(e),s=n?e.replace(a,""):e,o=n?e:e.trim()+"/{"+t+"}";return[o,s]}function o(e,t){var a={},r=n(e),o=r[0],i=r[1],l=s(i,t.idProp),d=l[0],c=l[1];if(o){var u=["fixture(\""+e+"\", fixture) must use a store method, not a store directly."];if(d){var y=p.item[o];if(y){a[o+" "+d]=t[y];u.push("Replace with fixture(\""+o+" "+d+"\", fixture."+y+") for items.")}}var h=p.list[o];if(h){a[o+" "+c]=t[h];u.push("Replace with fixture(\""+o+" "+c+"\", fixture."+h+") for lists.")}var g=u.join(" ");dev.warn(g)}else{var m=p.item;for(var f in m){var b=m[f];a[f+" "+d]=t[b]}var v=p.list;for(var k in v){var L=v[k];a[k+" "+c]=t[L]}}return a}function i(e){var t=n(e),a=t[0],r=t[1];return a?{type:a,url:r}:{url:r}}function l(e,a,n){var r=t.index(a,!0);if(-1<r&&d.splice(r,1),null!=n){if("object"==typeof n){var s=n;n=function(){return s}}a.fixture=n,d.unshift(a)}}var d=[];t.fixtures=d;var p={item:{GET:"getData",PUT:"updateData",DELETE:"destroyData"},list:{GET:"getListData",POST:"createData"}};t.add=function(e,n){return void 0===n?void canReflect_1_17_4_canReflect.eachKey(e,function(e,a){t.add(a,e)}):a(n)?(e=o(e,n),void t.add(e)):void("string"==typeof e&&(e=i(e)),l(d,e,n))};var c=t.add;c.on=!0,c.delay=10,t.callDynamicFixture=function(e,a,n){e.data=a.data;var r=function(){var a=t.extractResponse.apply(e,arguments);return n.apply(this,a)},s=function(){var t=a.fixture(e,r,e.headers,a);t!==void 0&&r(200,t)};return e.async?setTimeout(s,c.delay):(s(),null)},t.index=function(e,t){for(var a=0;a<d.length;a++)if(canFixture_3_0_0_matches.matches(e,d[a],t))return a;return-1},t.get=function(e){if(c.on){var a=t.index(e,!0);-1===a&&(a=t.index(e,!1));var n=0<=a?canReflect_1_17_4_canReflect.assignMap({},d[a]):void 0;if(n){var r=n.fixture,s=canFixture_3_0_0_dataFromUrl(n.url,e.url);if("string"==typeof n.fixture)s&&(r=sub(r,s)),n.url=r,n.data=null,n.type="GET",n.error||(n.error=function(e,t,a){throw"fixtures.js Error "+t+" "+a});else if(canReflect_1_17_4_canReflect.isPlainObject(e.data)||null==e.data){var o=canReflect_1_17_4_canReflect.assignMap({},e.data||{});n.data=canReflect_1_17_4_canReflect.assignMap(o,s)}else n.data=e.data}return n}},t.matches=canFixture_3_0_0_matches,t.extractResponse=function(e,t,a,n){return"number"!=typeof e&&(a=t,t=e,e=200),"string"==typeof a&&(n=a,a={}),[e,t,a,n]}}),canFixture_3_0_0_core_1=canFixture_3_0_0_core.fixtures,canFixture_3_0_0_core_2=canFixture_3_0_0_core.add,canFixture_3_0_0_core_3=canFixture_3_0_0_core.callDynamicFixture,canFixture_3_0_0_core_4=canFixture_3_0_0_core.index,canFixture_3_0_0_core_5=canFixture_3_0_0_core.get,canFixture_3_0_0_core_6=canFixture_3_0_0_core.matches,canFixture_3_0_0_core_7=canFixture_3_0_0_core.extractResponse,XHR=XMLHttpRequest,GLOBAL="undefined"==typeof commonjsGlobal?window:commonjsGlobal,props$2=["type","url","async","response","responseText","responseType","responseXML","responseURL","status","statusText","readyState"],events=["abort","error","load","loadend","loadstart","progress","readystatechange"];(function(){var e=new XHR;for(var t in e)0===t.indexOf("on")?-1===events.indexOf(t.substr(2))&&events.push(t.substr(2)):-1===props$2.indexOf(t)&&"function"!=typeof e[t]&&props$2.push(t)})();function callEvents(e,t){for(var a=e.__events[t]||[],n=0,r=a.length,s;n<r;n++)s=a[n],s.call(e)}GLOBAL.XMLHttpRequest=function(){var e=this,t=new XHR;this._xhr=t,this._requestHeaders={},this.__events={},events.forEach(function(a){t["on"+a]=function(){if(callEvents(e,a),e["on"+a])return e["on"+a].apply(e,arguments)}}),this.onload=null},GLOBAL.XMLHttpRequest._XHR=XHR,canReflect_1_17_4_canReflect.assignMap(XMLHttpRequest.prototype,{setRequestHeader:function(e,t){this._requestHeaders[e]=t},open:function(e,t,a){this.type=e,this.url=t,this.async=!1!==a},getAllResponseHeaders:function(){return this._xhr.getAllResponseHeaders.apply(this._xhr,arguments)},addEventListener:function(e,t){var a=this.__events[e]=this.__events[e]||[];a.push(t)},removeEventListener:function(e,t){var a=this.__events[e]=this.__events[e]||[],n=a.indexOf(t);0<=n&&a.splice(n,1)},setDisableHeaderCheck:function(e){this._disableHeaderCheck=!!e},getResponseHeader:function(e){return this._xhr.getResponseHeader(e)},abort:function(){var e=this._xhr;return void 0!==this.timeoutId&&(clearTimeout(this.timeoutId),e.open(this.type,this.url,!1!==this.async),e.send()),e.abort()},send:function(e){var t=this.type.toLowerCase()||"get",a={url:this.url,data:e,headers:this._requestHeaders,type:t,method:t,async:this.async,xhr:this};if((a.data||"get"!==a.type)&&"delete"!==a.type||(a.data=canDeparam_1_2_0_canDeparam(a.url.split("?")[1]),a.url=a.url.split("?")[0]),"string"==typeof a.data)try{a.data=JSON.parse(a.data)}catch(t){a.data=canDeparam_1_2_0_canDeparam(a.data)}var n=canFixture_3_0_0_core.get(a),r=this;if(n&&"function"==typeof n.fixture)return void(this.timeoutId=canFixture_3_0_0_core.callDynamicFixture(a,n,function(e,t,a,n){t="string"==typeof t?t:JSON.stringify(t),r._xhr={open:function(){},send:function(){},abort:function(){},getResponseHeader:function(){}},canReflect_1_17_4_canReflect.assignMap(r,{readyState:4,status:e});200<=e&&300>e||304===e?canReflect_1_17_4_canReflect.assignMap(r,{statusText:n||"OK",responseText:t}):canReflect_1_17_4_canReflect.assignMap(r,{statusText:n||"error",responseText:t}),r.getAllResponseHeaders=function(){var e=[];return canReflect_1_17_4_canReflect.eachKey(a||{},function(t,a){Array.prototype.push.apply(e,[a,": ",t,"\r\n"])}),e.join("")},r.onreadystatechange&&r.onreadystatechange({target:r}),callEvents(r,"progress"),r.onprogress&&r.onprogress(),callEvents(r,"load"),r.onload&&r.onload(),callEvents(r,"loadend"),r.onloadend&&r.onloadend()}));var s=function(){return r._xhr.open(r._xhr.type,r._xhr.url,r._xhr.async),r._requestHeaders&&Object.keys(r._requestHeaders).forEach(function(e){r._xhr.setRequestHeader(e,r._requestHeaders[e])}),r._xhr.send(e)};return n&&"number"==typeof n.fixture?(canLog_1_0_0_canLog.log("can-fixture: "+a.url+" => delay "+n.fixture+"ms"),void(this.timeoutId=setTimeout(s,n.fixture))):(n&&(canLog_1_0_0_canLog.log("can-fixture: "+a.url+" => "+n.url),canReflect_1_17_4_canReflect.assignMap(r,n)),s())}}),props$2.forEach(function(e){Object.defineProperty(XMLHttpRequest.prototype,e,{get:function(){return this._xhr[e]},set:function(t){try{this._xhr[e]=t}catch(t){}}})});var fixture=canFixture_3_0_0_core.add,noop$2=function(){};canReflect_1_17_4_canReflect.assignMap(fixture,{rand:function e(t,a,n){var r=Math.floor;if("number"==typeof t)return"number"==typeof a?t+r(Math.random()*(a-t+1)):r(Math.random()*(t+1));var s=t.slice(0);a===void 0?(a=1,n=s.length):n===void 0&&(n=a);for(var o=[],l=a+Math.round(e(n-a)),d=0;d<l;d++){var p=e(s.length-1),c=s.splice(p,1)[0];o.push(c)}return o},xhr:function(e){return canReflect_1_17_4_canReflect.assignMap({},{abort:noop$2,getAllResponseHeaders:function(){return""},getResponseHeader:function(){return""},open:noop$2,overrideMimeType:noop$2,readyState:4,responseText:"",responseXML:null,send:noop$2,setRequestHeader:noop$2,status:200,statusText:"OK"},e)},store:canFixture_3_0_0_store.make,fixtures:canFixture_3_0_0_core.fixtures}),"undefined"!=typeof window&&"function"!=typeof commonjsRequire.resolve&&(window.fixture=fixture);var canFixture_3_0_0_fixture=canNamespace_1_0_0_canNamespace.fixture=fixture,behaviorsMap={};function behavior(e,t){"string"!=typeof e&&(t=e,e=void 0);var a=function(a){var n=function(){};Object.defineProperty(n,"name",{value:e,configurable:!0}),n.prototype=a;var r=new n,s="function"==typeof t?t.apply(r,arguments):t;for(var o in s)s.hasOwnProperty(o)?Object.defineProperty(r,o,Object.getOwnPropertyDescriptor(s,o)):r[o]=s[o];return r.__behaviorName=e,r};return e&&(a.behaviorName=e,behaviorsMap[e]=a),a.isBehavior=!0,a}behavior.map=behaviorsMap;var canConnect_3_0_2_behavior=behavior,behavior$1=canConnect_3_0_2_behavior,connect=function(e,t){e=e.map(function(e,t){var a=-1;return"string"==typeof e?(a=connect.order.indexOf(e),e=e.map[e]):e.isBehavior?a=connect.order.indexOf(e.behaviorName):e=connect.behavior(e),{originalIndex:t,sortedIndex:a,behavior:e}}),e.sort(function(e,t){return~e.sortedIndex&&~t.sortedIndex?e.sortedIndex-t.sortedIndex:e.originalIndex-t.originalIndex}),e=e.map(function(e){return e.behavior});var a=connect.base(connect.behavior("options",function(){return t})());return e.forEach(function(e){a=e(a)}),a.init&&a.init(),a};connect.order=["data/localstorage-cache","data/url","data/parse","cache-requests","data/combine-requests","constructor","constructor/store","can/map","can/ref","fall-through-cache","data/worker","real-time","data/callbacks-cache","data/callbacks","constructor/callbacks-once"],connect.behavior=behavior$1;var canConnect_3_0_2_connect=connect,base=canConnect_3_0_2_behavior("base",function(e){var t;return{id:function(e){if(this.queryLogic)return canReflect_1_17_4_canReflect.getIdentity(e,this.queryLogic.schema);if(this.idProp)return e[this.idProp];throw new Error("can-connect/base/base - Please add a queryLogic option.")},listQuery:function(e){return e[this.listQueryProp]},listQueryProp:canSymbol_1_6_1_canSymbol.for("can.listQuery"),init:function(){},get queryLogic(){if(t)return t;return e.queryLogic?e.queryLogic:e.algebra?e.algebra:void 0},set queryLogic(e){t=e}}});canConnect_3_0_2_connect.base=base;var canConnect_3_0_2_canConnect=canNamespace_1_0_0_canNamespace.connect=canConnect_3_0_2_connect,assign$2=canReflect_1_17_4_canReflect.assignMap,WeakReferenceMap=function(){this.set={}};assign$2(WeakReferenceMap.prototype,{has:function(e){return!!this.set[e]},addReference:function(e,t,a){if("undefined"==typeof e)throw new Error("can-connect: You must provide a key to store a value in a WeakReferenceMap");var n=this.set[e];n||(n=this.set[e]={item:t,referenceCount:0,key:e}),n.referenceCount+=a||1},referenceCount:function(e){var t=this.set[e];if(t)return t.referenceCount},deleteReference:function(e){var t=this.set[e];t&&(t.referenceCount--,0===t.referenceCount&&delete this.set[e])},get:function(e){var t=this.set[e];if(t)return t.item},forEach:function(e){for(var t in this.set)e(this.set[t].item,t)}});var weakReferenceMap=WeakReferenceMap,updateDeepExceptIdentity=function(e,t,a){if(a||(a=canReflect_1_17_4_canReflect.getSchema(e)),!a)throw new Error("can-diff/update-except-id is unable to update without a schema.");a.identity.forEach(function(a){var n=canReflect_1_17_4_canReflect.getKeyValue(e,a);void 0!==n&&canReflect_1_17_4_canReflect.setKeyValue(t,a,n)}),canReflect_1_17_4_canReflect.updateDeep(e,t)},idMerge=function(e,t,n,a){var r=list(e,t,function(e,t){return n(e)===n(t)});r.forEach(function(t){canReflect_1_17_4_canReflect.splice(e,t.index,t.deleteCount,t.insert.map(a))})},makeArray=canReflect_1_17_4_canReflect.toArray,assign$3=canReflect_1_17_4_canReflect.assignMap,constructor_1=canConnect_3_0_2_behavior("constructor",function(){var e={cidStore:new weakReferenceMap,_cid:0,get:function(e){var t=this;return this.getData(e).then(function(e){return t.hydrateInstance(e)})},getList:function(e){e=e||{};var t=this;return this.getListData(e).then(function(a){return t.hydrateList(a,e)})},hydrateList:function(e,t){Array.isArray(e)&&(e={data:e});for(var a=[],n=0;n<e.data.length;n++)a.push(this.hydrateInstance(e.data[n]));if(e.data=a,this.list)return this.list(e,t);var r=e.data.slice(0);return r[this.listQueryProp||"__listQuery"]=t,copyMetadata(e,r),r},hydrateInstance:function(e){return this.instance?this.instance(e):assign$3({},e)},save:function(e){var t=this.serializeInstance(e),a=this.id(e),n=this;if(void 0===a){var r=this._cid++;return this.cidStore.addReference(r,e),this.createData(t,r).then(function(t){return void 0!==t&&n.createdInstance(e,t),n.cidStore.deleteReference(r,e),e})}return this.updateData(t).then(function(t){return void 0!==t&&n.updatedInstance(e,t),e})},destroy:function(e){var t=this.serializeInstance(e),a=this;return this.destroyData(t).then(function(t){return void 0!==t&&a.destroyedInstance(e,t),e})},createdInstance:function(e,t){assign$3(e,t)},updatedInstance:function(e,t){updateDeepExceptIdentity(e,t,this.queryLogic.schema)},updatedList:function(e,t){for(var a=[],n=0;n<t.data.length;n++)a.push(this.hydrateInstance(t.data[n]));idMerge(e,a,this.id.bind(this),this.hydrateInstance.bind(this)),copyMetadata(t,e)},destroyedInstance:function(e,t){updateDeepExceptIdentity(e,t,this.queryLogic.schema)},serializeInstance:function(e){return assign$3({},e)},serializeList:function(e){var t=this;return makeArray(e).map(function(e){return t.serializeInstance(e)})},isNew:function(e){var t=this.id(e);return!(t||0===t)}};return e});function copyMetadata(e,t){for(var a in e)"data"!=a&&("function"==typeof t.set?t.set(a,e[a]):"function"==typeof t.attr?t.attr(a,e[a]):t[a]=e[a])}var assignDeepExceptIdentity=function(e,t,a){if(a||(a=canReflect_1_17_4_canReflect.getSchema(e)),!a)throw new Error("can-diff/update-except-id is unable to update without a schema.");a.identity.forEach(function(a){var n=canReflect_1_17_4_canReflect.getKeyValue(e,a);void 0!==n&&canReflect_1_17_4_canReflect.setKeyValue(t,a,n)}),canReflect_1_17_4_canReflect.assignDeep(e,t)};function smartMerge(e,t){return t=canReflect_1_17_4_canReflect.serialize(t),canReflect_1_17_4_canReflect.isMoreListLikeThanMapLike(e)?mergeList(e,t):mergeMap(e,t),e}function mergeMap(e,t){canReflect_1_17_4_canReflect.eachKey(e,function(a,n){if(!canReflect_1_17_4_canReflect.hasKey(t,n))return void canReflect_1_17_4_canReflect.deleteKeyValue(e,n);var r=canReflect_1_17_4_canReflect.getKeyValue(t,n);if(canReflect_1_17_4_canReflect.deleteKeyValue(t,n),canReflect_1_17_4_canReflect.isPrimitive(a))return void canReflect_1_17_4_canReflect.setKeyValue(e,n,r);var s=Array.isArray(r),o=canReflect_1_17_4_canReflect.isMoreListLikeThanMapLike(a);if(o&&s)mergeList(a,r);else if(!s&&!o&&canReflect_1_17_4_canReflect.isMapLike(a)&&canReflect_1_17_4_canReflect.isPlainObject(r)){var i=canReflect_1_17_4_canReflect.getSchema(a);if(i&&i.identity&&i.identity.length){var l=canReflect_1_17_4_canReflect.getIdentity(a,i);if(null!=l&&l===canReflect_1_17_4_canReflect.getIdentity(r,i))return void mergeMap(a,r)}canReflect_1_17_4_canReflect.setKeyValue(e,n,canReflect_1_17_4_canReflect.new(a.constructor,r))}else canReflect_1_17_4_canReflect.setKeyValue(e,n,r)}),canReflect_1_17_4_canReflect.eachKey(t,function(t,a){canReflect_1_17_4_canReflect.setKeyValue(e,a,t)})}function mergeList(e,t){var a=canReflect_1_17_4_canReflect.getSchema(e),n,r;a&&(n=a.values),n&&(r=canReflect_1_17_4_canReflect.getSchema(n)),!r&&0<canReflect_1_17_4_canReflect.size(e)&&(r=canReflect_1_17_4_canReflect.getSchema(canReflect_1_17_4_canReflect.getKeyValue(e,0)));var s=r&&r.identity&&r.identity.length?function(e,t){var a=canReflect_1_17_4_canReflect.getIdentity(e,r),n=canReflect_1_17_4_canReflect.getIdentity(t,r),s=a===n;return s&&mergeMap(e,t),s}:function(e,t){var a=e===t;return a&&mergeMap(e,t),a};var o=list(e,t,s),i=n?canReflect_1_17_4_canReflect.new.bind(canReflect_1_17_4_canReflect,n):function(e){return e};return o.length?void o.forEach(function(t){applyPatch(e,t,i)}):e}function applyPatch(e,t,a){var n=a&&t.insert.map(function(e){return a(e)})||t.insert,r=[t.index,t.deleteCount].concat(n);return e.splice.apply(e,r),e}smartMerge.applyPatch=applyPatch;var mergeDeep=smartMerge,each$1=canReflect_1_17_4_canReflect.each,isPlainObject$1=canReflect_1_17_4_canReflect.isPlainObject,getNameSymbol$1=canSymbol_1_6_1_canSymbol.for("can.getName");function smartMergeExceptIdentity(e,t,a){if(a||(a=canReflect_1_17_4_canReflect.getSchema(e)),!a)throw new Error("can-connect/can/map/ is unable to update without a schema.");a.identity.forEach(function(a){var n=canReflect_1_17_4_canReflect.getKeyValue(e,a);void 0!==n&&canReflect_1_17_4_canReflect.setKeyValue(t,a,n)}),mergeDeep(e,t)}var canMapBehavior=canConnect_3_0_2_behavior("can/map",function(e){var t={init:function(){if(!this.Map)throw new Error("can-connect/can/map/map must be configured with a Map type");if(this[getNameSymbol$1]||(this[getNameSymbol$1]=function(){return this.name?"Connection{"+this.name+"}":this.Map?"Connection{"+canReflect_1_17_4_canReflect.getName(this.Map)+"}":"string"==typeof this.url?"Connection{"+this.url+"}":"Connection{}"}),this.List=this.List||this.Map.List,!this.List)throw new Error("can-connect/can/map/map - "+canReflect_1_17_4_canReflect.getName(this)+" must be configured with a List type.");overwrite(this,this.Map,mapOverwrites),overwrite(this,this.List,listOverwrites),this.queryLogic||(this.queryLogic=new canQueryLogic_1_1_0_canQueryLogic(this.Map));var t=this;if(this.Map[canSymbol_1_6_1_canSymbol.for("can.onInstanceBoundChange")]){var a=function(e,a){var n=a?"addInstanceReference":"deleteInstanceReference";t[n]&&t[n](e)};this.Map[canSymbol_1_6_1_canSymbol.for("can.onInstanceBoundChange")](a)}else console.warn("can-connect/can/map is unable to listen to onInstanceBoundChange on the Map type");if(this.List[canSymbol_1_6_1_canSymbol.for("can.onInstanceBoundChange")]){var n=function(e,a){var n=a?"addListReference":"deleteListReference";t[n]&&t[n](e)};this.List[canSymbol_1_6_1_canSymbol.for("can.onInstanceBoundChange")](n)}else console.warn("can-connect/can/map is unable to listen to onInstanceBoundChange on the List type");this.Map[canSymbol_1_6_1_canSymbol.for("can.onInstancePatches")]?this.Map[canSymbol_1_6_1_canSymbol.for("can.onInstancePatches")](function(e,a){a.forEach(function(a){("add"===a.type||"set"===a.type)&&a.key===t.idProp&&e[canSymbol_1_6_1_canSymbol.for("can.isBound")]()&&t.addInstanceReference(e)})}):console.warn("can-connect/can/map is unable to listen to onInstancePatches on the Map type"),e.init.apply(this,arguments)},serializeInstance:function(e){return canReflect_1_17_4_canReflect.serialize(e)},serializeList:function(e){return canReflect_1_17_4_canReflect.serialize(e)},instance:function(e){var t=this.Map;return new t(e)},list:function(e,t){var a=this.List||this.Map&&this.Map.List,n=new a(e.data);return canReflect_1_17_4_canReflect.eachKey(e,function(e,t){"data"!==t&&canReflect_1_17_4_canReflect.setKeyValue(n,t,e)}),n[this.listQueryProp]=t,n},updatedList:function(){canQueues_1_1_3_canQueues.batch.start();canQueues_1_1_3_canQueues.mutateQueue.enqueue(e.updatedList,this,arguments,{}),canQueues_1_1_3_canQueues.batch.stop()},save:function(t){canReflect_1_17_4_canReflect.setKeyValue(t,"_saving",!0);var a=function(){canReflect_1_17_4_canReflect.setKeyValue(t,"_saving",!1)},n=e.save.apply(this,arguments);return n.then(a,a),n},destroy:function(t){canReflect_1_17_4_canReflect.setKeyValue(t,"_destroying",!0);var a=function(){canReflect_1_17_4_canReflect.setKeyValue(t,"_destroying",!1)},n=e.destroy.apply(this,arguments);return n.then(a,a),n}};return each$1(["created","updated","destroyed"],function(e){t[e+"Instance"]=function(t,a){a&&"object"==typeof a&&("destroyed"===e&&0===canReflect_1_17_4_canReflect.size(a)||(this.constructor.removeAttr?updateDeepExceptIdentity(t,a,this.queryLogic.schema):this.updateInstanceWithAssignDeep?assignDeepExceptIdentity(t,a,this.queryLogic.schema):smartMergeExceptIdentity(t,a,this.queryLogic.schema))),"created"===e&&this.moveCreatedInstanceToInstanceStore&&this.moveCreatedInstanceToInstanceStore(t),canMapBehavior.callbackInstanceEvents(e,t)}}),t});canMapBehavior.callbackInstanceEvents=function(e,t){var a=t.constructor;canQueues_1_1_3_canQueues.batch.start(),map$1.dispatch.call(t,{type:e,target:t}),map$1.dispatch.call(a,e,[t]),canQueues_1_1_3_canQueues.batch.stop()};var mapOverwrites={static:{getList:function(e,t){return function(e){return t.getList(e)}},findAll:function(e,t){return function(e){return t.getList(e)}},get:function(e,t){return function(e){return t.get(e)}},findOne:function(e,t){return function(e){return t.get(e)}}},prototype:{isNew:function(e,t){return function(){return t.isNew(this)}},isSaving:function(){return function(){return!!canReflect_1_17_4_canReflect.getKeyValue(this,"_saving")}},isDestroying:function(){return function(){return!!canReflect_1_17_4_canReflect.getKeyValue(this,"_destroying")}},save:function(e,t){return function(e,a){var n=t.save(this);return n.then(e,a),n}},destroy:function(e,t){return function(e,a){var n;return this.isNew()?(n=Promise.resolve(this),t.destroyedInstance(this,{})):n=t.destroy(this),n.then(e,a),n}}},properties:{_saving:{enumerable:!1,value:!1,configurable:!0,writable:!0},_destroying:{enumerable:!1,value:!1,configurable:!0,writable:!0}}},listOverwrites={static:{_bubbleRule:function(e){return function(t,a){var n=e(t,a);return n.push("destroyed"),n}}},prototype:{setup:function(e,t){return function(a){isPlainObject$1(a)&&!Array.isArray(a)?(this[t.listQueryProp]=a,e.apply(this),this.replace(canReflect_1_17_4_canReflect.isPromise(a)?a:t.getList(a))):e.apply(this,arguments)}}},properties:{}},overwrite=function(e,t,a){for(var n in a.properties)canReflect_1_17_4_canReflect.defineInstanceKey(t,n,a.properties[n]);for(n in a.prototype)t.prototype[n]=a.prototype[n](t.prototype[n],e);if(a.static)for(n in a.static)t[n]=a.static[n](t[n],e)},map$5=canMapBehavior,assign$4=canReflect_1_17_4_canReflect.assignMap,WeakReferenceSet=function(){this.set=[]};assign$4(WeakReferenceSet.prototype,{has:function(e){return-1!==this._getIndex(e)},addReference:function(e,t){var a=this._getIndex(e),n=this.set[a];n||(n={item:e,referenceCount:0},this.set.push(n)),n.referenceCount+=t||1},deleteReference:function(e){var t=this._getIndex(e),a=this.set[t];a&&(a.referenceCount--,0===a.referenceCount&&this.set.splice(t,1))},delete:function(e){var t=this._getIndex(e);-1!==t&&this.set.splice(t,1)},get:function(e){var t=this.set[this._getIndex(e)];if(t)return t.item},referenceCount:function(e){var t=this.set[this._getIndex(e)];if(t)return t.referenceCount},_getIndex:function(e){var t;return this.set.every(function(a,n){if(a.item===e)return t=n,!1}),void 0===t?-1:t},forEach:function(e){return this.set.forEach(e)}});var weakReferenceSet=WeakReferenceSet,sortedSetJson=function(e){return null==e?e:JSON.stringify(canReflect_1_17_4_canReflect.cloneKeySort(e))},store=createCommonjsModule(function(e){var t=0,a=null,n={increment:function(){t++,clearTimeout(a)},decrement:function(){t--,0==t&&(a=setTimeout(function(){n.dispatch("end")},e.exports.requestCleanupDelay)),0>t&&(t=0)},count:function(){return t}};map$1(n);var r=canConnect_3_0_2_canConnect.behavior("constructor/store",function(e){var t={instanceStore:new weakReferenceMap,newInstanceStore:new weakReferenceSet,listStore:new weakReferenceMap,init:function(){e.init&&e.init.apply(this,arguments),this.hasOwnProperty("_requestInstances")||(this._requestInstances={}),this.hasOwnProperty("_requestLists")||(this._requestLists={}),n.on("end",function(){for(var e in this._requestInstances)this.instanceStore.deleteReference(e);for(e in this._requestInstances={},this._requestLists)this.listStore.deleteReference(e),this._requestLists[e].forEach(this.deleteInstanceReference.bind(this));this._requestLists={}}.bind(this))},_finishedRequest:function(){n.decrement(this)},addInstanceReference:function(e,t){var a=t||this.id(e);a===void 0?this.newInstanceStore.addReference(e):this.instanceStore.addReference(a,e)},createdInstance:function(t){e.createdInstance.apply(this,arguments),this.moveCreatedInstanceToInstanceStore(t)},moveCreatedInstanceToInstanceStore:function(e){var t=this.id(e);if(this.newInstanceStore.has(e)&&t!==void 0){var a=this.newInstanceStore.referenceCount(e);this.newInstanceStore.delete(e),this.instanceStore.addReference(t,e,a)}},addInstanceMetaData:function(e,t,a){var n=this.instanceStore.set[this.id(e)];n&&(n[t]=a)},getInstanceMetaData:function(e,t){var a=this.instanceStore.set[this.id(e)];if(a)return a[t]},deleteInstanceMetaData:function(e,t){var a=this.instanceStore.set[this.id(e)];delete a[t]},deleteInstanceReference:function(e){var t=this.id(e);t===void 0?this.newInstanceStore.deleteReference(e):this.instanceStore.deleteReference(this.id(e),e)},addListReference:function(e,t){var a=sortedSetJson(t||this.listQuery(e));a&&(this.listStore.addReference(a,e),e.forEach(function(e){this.addInstanceReference(e)}.bind(this)))},deleteListReference:function(e,t){var a=sortedSetJson(t||this.listQuery(e));a&&(this.listStore.deleteReference(a,e),e.forEach(this.deleteInstanceReference.bind(this)))},hydratedInstance:function(e){if(0<n.count()){var t=this.id(e);this._requestInstances[t]||(this.addInstanceReference(e),this._requestInstances[t]=e)}},hydrateInstance:function(t){var a=this.id(t);if((a||0===a)&&this.instanceStore.has(a)){var n=this.instanceStore.get(a);return this.updatedInstance(n,t),n}var r=e.hydrateInstance.call(this,t);return this.hydratedInstance(r),r},hydratedList:function(e,t){if(0<n.count()){var a=sortedSetJson(t||this.listQuery(e));a&&!this._requestLists[a]&&(this.addListReference(e,t),this._requestLists[a]=e)}},hydrateList:function(t,a){a=a||this.listQuery(t);var n=sortedSetJson(a);if(n&&this.listStore.has(n)){var r=this.listStore.get(n);return this.updatedList(r,t,a),r}var s=e.hydrateList.call(this,t,a);return this.hydratedList(s,a),s},getList:function(t){var a=this;n.increment(this);var r=e.getList.call(this,t);return r.then(function(){a._finishedRequest()},function(){a._finishedRequest()}),r},get:function(t){var a=this;n.increment(this);var r=e.get.call(this,t);return r.then(function(){a._finishedRequest()},function(){a._finishedRequest()}),r},save:function(t){var a=this;n.increment(this);var r=!this.isNew(t);r&&this.addInstanceReference(t);var s=e.save.call(this,t);return s.then(function(){r&&a.deleteInstanceReference(t),a._finishedRequest()},function(){a._finishedRequest()}),s},destroy:function(t){var a=this;this.addInstanceReference(t),n.increment(this);var r=e.destroy.call(this,t);return r.then(function(e){a._finishedRequest(),a.deleteInstanceReference(e)},function(){a._finishedRequest()}),r},updatedList:function(t,a,n){var r=t.slice(0);a.data||"number"!=typeof a.length||(a={data:a}),e.updatedList?(e.updatedList.call(this,t,a,n),t.forEach(function(e){this.addInstanceReference(e)}.bind(this))):a.data&&a.data.forEach(function(e){this.addInstanceReference(e)}.bind(this)),r.forEach(this.deleteInstanceReference.bind(this))}};return t});r.requests=n,r.requestCleanupDelay=10,e.exports=r}),each$2=canReflect_1_17_4_canReflect.each,pairs={getListData:"gotListData",createData:"createdData",updateData:"updatedData",destroyData:"destroyedData"},dataCallbackBehavior=canConnect_3_0_2_canConnect.behavior("data/callbacks",function(e){var t={};return each$2(pairs,function(a,n){t[n]=function(t,r){var s=this;return e[n].call(this,t).then(function(e){return s[a]?s[a].call(s,e,t,r):e})}}),t}),callbacks=dataCallbackBehavior,each$3=canReflect_1_17_4_canReflect.each,parse$1=canConnect_3_0_2_behavior("data/parse",function(e){var t={parseListData:function(t){e.parseListData&&(t=e.parseListData.apply(this,arguments));var a;if(Array.isArray(t))a={data:t};else{var n=this.parseListProp||"data";if(t.data=get_1(t,n),a=t,"data"!==n&&delete t[n],!Array.isArray(a.data))throw new Error("Could not get any raw data while converting using .parseListData")}for(var r=[],s=0;s<a.data.length;s++)r.push(this.parseInstanceData(a.data[s]));return a.data=r,a},parseInstanceData:function(t){return e.parseInstanceData&&(t=e.parseInstanceData.apply(this,arguments)||t),this.parseInstanceProp?get_1(t,this.parseInstanceProp)||t:t}};return each$3(pairs$1,function(a,n){t[n]=function(t){var r=this;return e[n].call(this,t).then(function(){return r[a].apply(r,arguments)})}}),t}),pairs$1={getListData:"parseListData",getData:"parseInstanceData",createData:"parseInstanceData",updateData:"parseInstanceData",destroyData:"parseInstanceData"},xhrs=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return new ActiveXObject("MSXML2.XMLHTTP.3.0")},function(){return new ActiveXObject("MSXML2.XMLHTTP")}],_xhrf=null,originUrl=canParseUri_1_2_0_canParseUri(global_1().location.href),globalSettings={},makeXhr=function(){if(null!=_xhrf)return _xhrf();for(var e=0,t=xhrs.length;e<t;e++)try{var a=xhrs[e],n=a();if(null!=n)return _xhrf=a,n}catch(t){continue}return function(){}},contentTypes={json:"application/json",form:"application/x-www-form-urlencoded"},_xhrResp=function(e,t){var a=t.dataType||e.getResponseHeader("Content-Type").split(";")[0];return a&&(e.responseText||e.responseXML)?"text/xml"===a||"xml"===a?e.responseXML:"text/json"===a||"application/json"===a||"text/javascript"===a||"application/javascript"===a||"application/x-javascript"===a||"json"===a?e.responseText&&JSON.parse(e.responseText):e.responseText:e};function ajax(t){var e=makeXhr(),a=0,r={},s=new Promise(function(e,t){r.resolve=e,r.reject=t}),i,l,d;if(s.abort=function(){e.abort()},t=[{userAgent:"XMLHttpRequest",lang:"en",type:"GET",data:null,dataType:"json"},globalSettings,t].reduce(function(e,t){return canReflect_1_17_4_canReflect.assignDeep(e,t)}),t.contentType||(t.contentType="GET"===t.type.toUpperCase()?contentTypes.form:contentTypes.json),null==t.crossDomain)try{d=canParseUri_1_2_0_canParseUri(t.url),t.crossDomain=!!(d.protocol&&d.protocol!==originUrl.protocol||d.host&&d.host!==originUrl.host)}catch(a){t.crossDomain=!0}t.timeout&&(i=setTimeout(function(){e.abort(),t.timeoutFn&&t.timeoutFn(t.url)},t.timeout)),e.onreadystatechange=function(){try{4===e.readyState?(i&&clearTimeout(i),300>e.status?t.success&&t.success(_xhrResp(e,t)):t.error&&t.error(e,e.status,e.statusText),t.complete&&t.complete(e,e.statusText),200<=e.status&&300>e.status?r.resolve(_xhrResp(e,t)):r.reject(_xhrResp(e,t))):t.progress&&t.progress(++a)}catch(t){r.reject(t)}};var p=t.url,c=null,u=t.type.toUpperCase(),y=t.contentType===contentTypes.json,h="POST"===u||"PUT"===u;!h&&t.data&&(p+="?"+(y?JSON.stringify(t.data):canParam_1_1_0_canParam(t.data))),e.open(u,p);var g=t.crossDomain&&-1!==["GET","POST","HEAD"].indexOf(u);if(l="undefined"!=typeof FormData&&t.data instanceof FormData,h){c=l?t.data:y&&!g?"object"==typeof t.data?JSON.stringify(t.data):t.data:canParam_1_1_0_canParam(t.data);var m=y&&!g?"application/json":"application/x-www-form-urlencoded";e.setRequestHeader("Content-Type",m)}else e.setRequestHeader("Content-Type",t.contentType);if(g||e.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.beforeSend&&t.beforeSend.call(t,e,t),t.xhrFields)for(var b in t.xhrFields)e[b]=t.xhrFields[b];return e.send(c),s}var canAjax_2_1_0_canAjax=canNamespace_1_0_0_canNamespace.ajax=ajax,ajaxSetup=function(e){globalSettings=e||{}};canAjax_2_1_0_canAjax.ajaxSetup=ajaxSetup;function isArrayLike(e){var t=typeof e;if("string"==t)return!0;if("number"==t)return!1;var a=e&&"boolean"!=t&&"number"!=typeof e&&"length"in e&&e.length;return"function"!=typeof e&&(0===a||"number"==typeof a&&0<a&&a-1 in e)}var isArrayLike_1=canNamespace_1_0_0_canNamespace.isArrayLike=isArrayLike,isIterable=function(e){return e&&!!e[canSymbol_1_6_1_canSymbol.iterator||canSymbol_1_6_1_canSymbol.for("iterator")]},has=Object.prototype.hasOwnProperty;function each$4(e,t,a){var n=0,r,s,o;if(e)if(isArrayLike_1(e))for(s=e.length;n<s&&(o=e[n],!1!==t.call(a||o,o,n,e));n++);else if(isIterable(e))for(var l=e[canSymbol_1_6_1_canSymbol.iterator||canSymbol_1_6_1_canSymbol.for("iterator")](),d,p;!(d=l.next()).done;)p=d.value,t.call(a||e,Array.isArray(p)?p[1]:p,p[0]);else if("object"==typeof e)for(r in e)if(has.call(e,r)&&!1===t.call(a||e[r],e[r],r,e))break;return e}var each_1=canNamespace_1_0_0_canNamespace.each=each$4,methodMapping={item:{GET:"getData",PUT:"updateData",DELETE:"destroyData"},list:{GET:"getListData",POST:"createData"}};function inferIdProp(e){var t=/\{(.*)\}/,a=e.match(t),n=a&&2===a.length;if(n)return a[1]}function getItemAndListUrls(e,t){t=t||inferIdProp(e)||"id";var a=new RegExp("\\/\\{"+t+"\\}.*"),n=a.test(e),r=n?e.replace(a,""):e,s=n?e:e.trim()+"/{"+t+"}";return{item:s,list:r}}var canMakeRest_0_1_3_canMakeRest=function(e,t){var a={};return each_1(getItemAndListUrls(e,t),function(e,t){each_1(methodMapping[t],function(t,n){a[t]={method:n,url:e}})}),a},makePromise=function(e){return e&&"function"==typeof e.then&&!canReflect_1_17_4_canReflect.isPromise(e)?new Promise(function(t,a){e.then(t,a)}):e},defaultRest=canMakeRest_0_1_3_canMakeRest("/resource/{id}"),urlBehavior=canConnect_3_0_2_behavior("data/url",function(e){var t={};return canReflect_1_17_4_canReflect.eachKey(defaultRest,function(a,n){t[n]=function(t){var r=methodMetaData[n];if("object"==typeof this.url){if("function"==typeof this.url[n])return makePromise(this.url[n](t));if(this.url[n]){var s=makeAjax(this.url[n],t,a.method,this.ajax||canAjax_2_1_0_canAjax,findContentType(this.url,a.method),r);return makePromise(s)}}var o="string"==typeof this.url?this.url:this.url.resource;if(o){var i=canReflect_1_17_4_canReflect.getSchema(this.queryLogic).identity,l=o.replace(/\/+$/,""),d=canMakeRest_0_1_3_canMakeRest(l,i[0])[n];return makePromise(makeAjax(d.url,t,d.method,this.ajax||canAjax_2_1_0_canAjax,findContentType(this.url,d.method),r))}return e[name].call(this,t)}}),t}),methodMetaData={getListData:{},getData:{},createData:{},updateData:{},destroyData:{includeData:!1}},findContentType=function(e,t){if("object"==typeof e&&e.contentType){var a="application/x-www-form-urlencoded"===e.contentType||"application/json"===e.contentType;if(a)return e.contentType}return"GET"===t?"application/x-www-form-urlencoded":"application/json"};function urlParamEncoder(e,t){return encodeURIComponent(t)}var makeAjax=function(e,t,a,n,r,s){var o={};if("string"==typeof e){var i=e.split(/\s+/);o.url=i.pop(),i.length&&(o.type=i.pop())}else canReflect_1_17_4_canReflect.assignMap(o,e);return o.data="object"!=typeof t||Array.isArray(t)?t:canReflect_1_17_4_canReflect.assignMap(o.data||{},t),o.url=replaceWith(o.url,o.data,urlParamEncoder,!0),o.contentType=r,!1===s.includeData&&delete o.data,n(canReflect_1_17_4_canReflect.assignMap({type:a||"post",dataType:"json"},o))},url=urlBehavior,indexByIdentity=function(e,t,a){var n=canReflect_1_17_4_canReflect.size(e);if(!a&&0<n&&(a=canReflect_1_17_4_canReflect.getSchema(e[0])),a||(a=canReflect_1_17_4_canReflect.getSchema(t)),!a)throw new Error("No schema to use to get identity.");for(var r=canReflect_1_17_4_canReflect.getIdentity(t,a),s=0,o;s<n;s++)if(o=canReflect_1_17_4_canReflect.getIdentity(e[s],a),r===o)return s;return-1},spliceSymbol=canSymbol_1_6_1_canSymbol.for("can.splice");function updateList(e,t,a,n){-1===a?-1!==n&&canReflect_1_17_4_canReflect.splice(e,n,0,[t()]):-1===n?canReflect_1_17_4_canReflect.splice(e,a,1,[]):n!==a&&(a<n?(canReflect_1_17_4_canReflect.splice(e,n,0,[t()]),canReflect_1_17_4_canReflect.splice(e,a,1,[])):(canReflect_1_17_4_canReflect.splice(e,a,1,[]),canReflect_1_17_4_canReflect.splice(e,n,0,[t()])))}function updateListWithItem(e,t,a,n,r,s){if(-1===a||n!==a+1&&n!==a)if(void 0!==e[spliceSymbol])updateList(e,function(){return r.hydrateInstance(t)},a,n);else{var o=r.serializeList(e);updateList(o,function(){return t},a,n),r.updatedList(e,{data:o},s)}}var realTime=canConnect_3_0_2_canConnect.behavior("real-time",function(e){var t=Promise.resolve(),a;return a={createData:function(){var a=e.createData.apply(this,arguments),n=a.catch(function(){return""});return t=Promise.all([t,n]),a},createInstance:function(e){var a=this;return new Promise(function(n){t.then(function(){setTimeout(function(){var t=a.id(e),r=a.instanceStore.get(t),s;r?n(a.updateInstance(e)):(r=a.hydrateInstance(e),s=a.serializeInstance(r),a.addInstanceReference(r),Promise.resolve(a.createdData(e,s)).then(function(){a.deleteInstanceReference(r),n(r)}))},1)})})},createdData:function(e,t,a){var n;return n=void 0===a?this.instanceStore.get(this.id(e)):this.cidStore.get(a),this.addInstanceReference(n,this.id(e)),this.createdInstance(n,e),create.call(this,this.serializeInstance(n)),void this.deleteInstanceReference(n)},updatedData:function(e,t){var a=this.instanceStore.get(this.id(t));return this.updatedInstance(a,e),void update$1.call(this,this.serializeInstance(a))},updateInstance:function(e){var t=this.id(e),a=this.instanceStore.get(t);a||(a=this.hydrateInstance(e)),this.addInstanceReference(a);var n=this.serializeInstance(a),r=this;return Promise.resolve(this.updatedData(e,n)).then(function(){return r.deleteInstanceReference(a),a})},destroyedData:function(e,t){var a=this.id(t||e),n=this.instanceStore.get(a);n||(n=this.hydrateInstance(e));var r=this.serializeInstance(n);return this.destroyedInstance(n,e),void destroy.call(this,r)},destroyInstance:function(e){var t=this.id(e),a=this.instanceStore.get(t);a||(a=this.hydrateInstance(e)),this.addInstanceReference(a);var n=this.serializeInstance(a),r=this;return Promise.resolve(this.destroyedData(e,n)).then(function(){return r.deleteInstanceReference(a),a})}},a}),create=function(e){var t=this;this.listStore.forEach(function(a,n){var r=JSON.parse(n),s=indexByIdentity(a,e,t.queryLogic.schema);if(t.queryLogic.isMember(r,e)){var o=t.queryLogic.index(r,a,e);updateListWithItem(a,e,s,o,t,r)}})},update$1=function(e){var t=this;this.listStore.forEach(function(a,n){var r=JSON.parse(n),s=indexByIdentity(a,e,t.queryLogic.schema);if(t.queryLogic.isMember(r,e)){var o=t.queryLogic.index(r,a,e);updateListWithItem(a,e,s,o,t,r)}else-1!==s&&updateListWithItem(a,e,s,-1,t,r)})},destroy=function(e){var t=this;this.listStore.forEach(function(a,n){var r=JSON.parse(n),s=indexByIdentity(a,e,t.queryLogic.schema);-1!==s&&updateListWithItem(a,e,s,-1,t,r)})},forEach=[].forEach,callbacks$1=["createdInstance","updatedInstance","destroyedInstance"],callbacksOnceBehavior=canConnect_3_0_2_canConnect.behavior("constructor/callbacks-once",function(e){var t={};return forEach.call(callbacks$1,function(a){t[a]=function(t,n){var r=this.getInstanceMetaData(t,"last-data-"+a),s=sortedSetJson(n);if(r!==s){var o=e[a].apply(this,arguments);return this.addInstanceMetaData(t,"last-data-"+a,s),o}}}),t}),callbacksOnce=callbacksOnceBehavior;function realtimeRestModel(e){var t=[constructor_1,map$5,store,callbacks,parse$1,url,realTime,callbacksOnce];return canConnect_3_0_2_canConnect(t,e)}var canRealtimeRestModel_1_0_0_canRealtimeRestModel=canNamespace_1_0_0_canNamespace.realtimeRestModel=realtimeRestModel;function restModel(e){var t=[base,url,parse$1,constructor_1,map$5].reduce(function(e,t){return t(e)},e);return t.init(),t}var canRestModel_1_0_0_canRestModel=canNamespace_1_0_0_canNamespace.restModel=restModel,getItems$1=function(e){return Array.isArray(e)?e:e.data},forEach$1=Array.prototype.forEach,cacheRequestsBehaviour=canConnect_3_0_2_canConnect.behavior("cache-requests",function(e){return{getDiff:function(e,t){var a=this,n;return forEach$1.call(t,function(t){var r=a.queryLogic.difference(e,t),s;if(a.queryLogic.isDefinedAndHasMembers(r)){var o=a.queryLogic.intersection(e,t);s={needed:r,cached:!!a.queryLogic.isDefinedAndHasMembers(o)&&o,count:a.queryLogic.count(r)}}else a.queryLogic.isSubset(e,t)&&(s={cached:e,count:0});s&&(!n||s.count<n.count)&&(n=s)}),n?{needed:n.needed,cached:n.cached}:{needed:e}},unionMembers:function(e,t,a,n){return{data:this.queryLogic.unionMembers(t.needed,t.cached,getItems$1(a),getItems$1(n))}},getListData:function(t){t=t||{};var a=this;return this.cacheConnection.getSets(t).then(function(n){var r=a.getDiff(t,n);if(!r.needed)return a.cacheConnection.getListData(r.cached);if(!r.cached)return e.getListData(r.needed).then(function(e){return a.cacheConnection.updateListData(getItems$1(e),r.needed).then(function(){return e})});var s=a.cacheConnection.getListData(r.cached),o=e.getListData(r.needed),i=o.then(function(e){return a.cacheConnection.updateListData(getItems$1(e),r.needed).then(function(){return e})}),l=Promise.all([s,o]).then(function(e){var n=e[0],s=e[1];return a.unionMembers(t,r,s,n)});return Promise.all([l,i]).then(function(e){return e[0]})})}}}),cacheRequests=cacheRequestsBehaviour,assign$5=canReflect_1_17_4_canReflect.assignMap,each$5=canReflect_1_17_4_canReflect.each,pairs$2={createdData:"createData",updatedData:"updateData",destroyedData:"destroyData"},callbackCache=canConnect_3_0_2_canConnect.behavior("data/callbacks-cache",function(e){var t={};return each$5(pairs$2,function(a,n){t[n]=function(t,r,s){return this.cacheConnection[a](assign$5(assign$5({},r),t)),e[n]?e[n].call(this,t,r,s):t}}),t}),callbacksCache=callbackCache,deferred=function(){var e={};return e.promise=new Promise(function(t,a){e.resolve=t,e.reject=a}),e},forEach$2=[].forEach,combineRequests=canConnect_3_0_2_canConnect.behavior("data/combine-requests",function(e){var t;return{unionPendingRequests:function(e){var t=this;e.sort(function(e,a){return t.queryLogic.isSubset(e.set,a.set)?1:t.queryLogic.isSubset(a.set,e.set)?-1:0});var a=[],n;return doubleLoop(e,{start:function(e){n={set:e.set,pendingRequests:[e]},a.push(n)},iterate:function(e){var a=t.queryLogic.union(n.set,e.set);if(t.queryLogic.isDefinedAndHasMembers(a))return n.set=a,n.pendingRequests.push(e),!0}}),Promise.resolve(a)},time:1,getListData:function(a){a=a||{};var n=this;t||(t=[],setTimeout(function(){var a=n.unionPendingRequests(t);t=null,a.then(function(t){forEach$2.call(t,function(t){var a=canReflect_1_17_4_canReflect.serialize(t.set);e.getListData(a).then(function(e){1===t.pendingRequests.length?t.pendingRequests[0].deferred.resolve(e):forEach$2.call(t.pendingRequests,function(a){a.deferred.resolve({data:n.queryLogic.filterMembers(a.set,t.set,getItems$1(e))})})},function(e){1===t.pendingRequests.length?t.pendingRequests[0].deferred.reject(e):forEach$2.call(t.pendingRequests,function(t){t.deferred.reject(e)})})})})},this.time||1));var r=deferred();return t.push({deferred:r,set:a}),r.promise}}}),combineRequests_1=combineRequests,doubleLoop=function(e,t){for(var a=0;a<e.length;){t.start(e[a]);for(var n=a+1;n<e.length;)!0===t.iterate(e[n])?e.splice(n,1):n++;a++}},canLocalStore_1_0_0_canLocalStore=canNamespace_1_0_0_canNamespace.localStore=function e(t){t.constructor=e;var a=Object.create(canMemoryStore_1_0_0_makeSimpleStore(t));return canReflect_1_17_4_canReflect.assignMap(a,{clear:function(){return localStorage.removeItem(this.name+"/queries"),localStorage.removeItem(this.name+"/records"),this._recordsMap=null,Promise.resolve()},updateQueryDataSync:function(e){localStorage.setItem(this.name+"/queries",JSON.stringify(e))},getQueryDataSync:function(){return JSON.parse(localStorage.getItem(this.name+"/queries"))||[]},getRecord:function(e){return this._recordsMap||this.getAllRecords(),this._recordsMap[e]},getAllRecords:function(){if(!this.cacheLocalStorageReads||!this._recordsMap){var e=JSON.parse(localStorage.getItem(this.name+"/records"))||{};this._recordsMap=e}var t=[];for(var a in this._recordsMap)t.push(this._recordsMap[a]);return t},destroyRecords:function(e){this._recordsMap||this.getAllRecords(),canReflect_1_17_4_canReflect.eachIndex(e,function(e){var t=canReflect_1_17_4_canReflect.getIdentity(e,this.queryLogic.schema);delete this._recordsMap[t]},this),localStorage.setItem(this.name+"/records",JSON.stringify(this._recordsMap))},updateRecordsSync:function(e){this._recordsMap||this.getAllRecords(),e.forEach(function(e){var t=canReflect_1_17_4_canReflect.getIdentity(e,this.queryLogic.schema);this._recordsMap[t]=e},this),localStorage.setItem(this.name+"/records",JSON.stringify(this._recordsMap))}}),a},localstorageCache=canLocalStore_1_0_0_canLocalStore,memoryCache=canMemoryStore_1_0_0_canMemoryStore,fallThroughCache=canConnect_3_0_2_canConnect.behavior("fall-through-cache",function(e){return{hydrateList:function(t,a){a=a||this.listQuery(t);var n=sortedSetJson(a),r=e.hydrateList.call(this,t,a);return this._getHydrateListCallbacks[n]&&(this._getHydrateListCallbacks[n].shift()(r),!this._getHydrateListCallbacks[n].length&&delete this._getHydrateListCallbacks[n]),r},_getHydrateListCallbacks:{},_getHydrateList:function(e,t){var a=sortedSetJson(e);this._getHydrateListCallbacks[a]||(this._getHydrateListCallbacks[a]=[]),this._getHydrateListCallbacks[a].push(t)},getListData:function(t){t=t||{};var a=this;return this.cacheConnection.getListData(t).then(function(n){return a._getHydrateList(t,function(n){a.addListReference(n,t),setTimeout(function(){e.getListData.call(a,t).then(function(e){a.cacheConnection.updateListData(e,t),a.updatedList(n,e,t),a.deleteListReference(n,t)},function(t){canLog_1_0_0_canLog.log("REJECTED",t)})},1)}),n},function(){var n=e.getListData.call(a,t);return n.then(function(e){a.cacheConnection.updateListData(e,t)}),n})},hydrateInstance:function(t){var a=this.id(t),n=e.hydrateInstance.apply(this,arguments);return this._getMakeInstanceCallbacks[a]&&(this._getMakeInstanceCallbacks[a].shift()(n),!this._getMakeInstanceCallbacks[a].length&&delete this._getMakeInstanceCallbacks[a]),n},_getMakeInstanceCallbacks:{},_getMakeInstance:function(e,t){this._getMakeInstanceCallbacks[e]||(this._getMakeInstanceCallbacks[e]=[]),this._getMakeInstanceCallbacks[e].push(t)},getData:function(t){var a=this;return this.cacheConnection.getData(t).then(function(n){return a._getMakeInstance(a.id(n)||a.id(t),function(n){a.addInstanceReference(n),setTimeout(function(){e.getData.call(a,t).then(function(e){a.cacheConnection.updateData(e),a.updatedInstance(n,e),a.deleteInstanceReference(n)},function(t){canLog_1_0_0_canLog.log("REJECTED",t)})},1)}),n},function(){var n=e.getData.call(a,t);return n.then(function(e){a.cacheConnection.updateData(e)}),n})}}}),fallThroughCache_1=fallThroughCache,makeRef=function(e){var t=canReflect_1_17_4_canReflect.getSchema(e.queryLogic).identity[0],a=function(){return function(n,r){"object"==typeof n&&(r=n,n=r[t]);var s=a.store.get(n);return s?(r&&!s._value&&(r instanceof e.Map?s._value=r:s._value=e.hydrateInstance(r)),s):void(this[t]=n,r&&(r instanceof e.Map?this._value=r:this._value=e.hydrateInstance(r)),0<store.requests.count()&&!a._requestInstances[n]&&(a.store.addReference(n,this),a._requestInstances[n]=this))}}();a.store=new weakReferenceMap,a._requestInstances={},a.type=function(e){return e&&"object"!=typeof e?new a(e):new a(e[t],e)};var n={promise:{get:function(){if(this._value)return Promise.resolve(this._value);var a={};return a[t]=this[t],e.Map.get(a)}},_state:{get:function(e,t){return t&&this.promise.then(function(){t("resolved")},function(){t("rejected")}),"pending"}},value:{get:function(e,t){return this._value?this._value:void(t&&this.promise.then(function(e){t(e)}))}},reason:{get:function(e,t){this._value||this.promise.catch(function(e){t(e)})}}};n[t]={type:"*",set:function(){this._value=void 0}},canDefine_2_5_8_canDefine(a.prototype,n),a.prototype.unobservedId=canObservationRecorder_1_2_0_canObservationRecorder.ignore(function(){return this[t]}),a.prototype.isResolved=function(){return!!this._value||"resolved"===this._state},a.prototype.isRejected=function(){return"rejected"===this._state},a.prototype.isPending=function(){return!this._value&&("resolved"!==this._state||"rejected"!==this._state)},a.prototype.serialize=function(){return this[t]},canReflect_1_17_4_canReflect.assignSymbols(a.prototype,{"can.serialize":a.prototype.serialize,"can.getName":function(){return canReflect_1_17_4_canReflect.getName(this.constructor)+"{"+this[t]+"}"}});var r=a.prototype._eventSetup;a.prototype._eventSetup=function(){return a.store.addReference(this.unobservedId(),this),r.apply(this,arguments)};var s=a.prototype._eventTeardown;return a.prototype._eventTeardown=function(){return a.store.deleteReference(this.unobservedId(),this),s.apply(this,arguments)},store.requests.on("end",function(){for(var e in a._requestInstances)a.store.deleteReference(e);a._requestInstances={}}),a},ref=canConnect_3_0_2_canConnect.behavior("can/ref",function(e){return{init:function(){e.init.apply(this,arguments),this.Map.Ref=makeRef(this)}}}),$=global_1().$;canConnect_3_0_2_canConnect.superMap=function(e){var t=[constructor_1,map$5,ref,store,callbacks,combineRequests_1,parse$1,url,realTime,callbacksOnce];return"undefined"!=typeof localStorage&&(!e.cacheConnection&&(e.cacheConnection=canConnect_3_0_2_canConnect([localstorageCache],{name:e.name+"Cache",idProp:e.idProp,queryLogic:e.queryLogic})),t.push(callbacksCache,fallThroughCache_1)),$&&$.ajax&&(e.ajax=$.ajax),canConnect_3_0_2_canConnect(t,e)};var superMap=canConnect_3_0_2_canConnect.superMap,$$1=global_1().$;canConnect_3_0_2_canConnect.baseMap=function(e){var t=[constructor_1,map$5,ref,store,callbacks,parse$1,url,realTime,callbacksOnce];return $$1&&$$1.ajax&&(e.ajax=$$1.ajax),canConnect_3_0_2_canConnect(t,e)};var baseMap=canConnect_3_0_2_canConnect.baseMap;canConnect_3_0_2_canConnect.cacheRequests=cacheRequests,canConnect_3_0_2_canConnect.constructor=constructor_1,canConnect_3_0_2_canConnect.constructorCallbacksOnce=callbacksOnce,canConnect_3_0_2_canConnect.constructorStore=store,canConnect_3_0_2_canConnect.dataCallbacks=callbacks,canConnect_3_0_2_canConnect.dataCallbacksCache=callbacksCache,canConnect_3_0_2_canConnect.dataCombineRequests=combineRequests_1,canConnect_3_0_2_canConnect.dataLocalStorageCache=localstorageCache,canConnect_3_0_2_canConnect.dataMemoryCache=memoryCache,canConnect_3_0_2_canConnect.dataParse=parse$1,canConnect_3_0_2_canConnect.dataUrl=url,canConnect_3_0_2_canConnect.fallThroughCache=fallThroughCache_1,canConnect_3_0_2_canConnect.realTime=realTime,canConnect_3_0_2_canConnect.superMap=superMap,canConnect_3_0_2_canConnect.baseMap=baseMap;var canConnect_3_0_2_all=canConnect_3_0_2_canConnect,methodsToOverwrite=["pushState","replaceState"],cleanRoot=function(){var e=location(),t=e.protocol+"//"+e.host,a=bindingProxy_1.call("root"),n=a.indexOf(t);return 0===n?a.substr(t.length):a};function getCurrentUrl(){var e=cleanRoot(),t=location(),a=t.pathname+t.search,n=a.indexOf(e);return a.substr(n+e.length)}function PushstateObservable(){this.options={replaceStateOnceKeys:[],replaceStateKeys:[]},this.dispatchHandlers=this.dispatchHandlers.bind(this);var e=this;this.anchorClickHandler=function(t){PushstateObservable.prototype.anchorClickHandler.call(e,this,t)},this.handlers=new canKeyTree_1_2_0_canKeyTree([Object,Array],{onFirst:this.setup.bind(this),onEmpty:this.teardown.bind(this)}),this.keepHash=!0}PushstateObservable.prototype=Object.create(canSimpleObservable_2_2_0_canSimpleObservable.prototype),PushstateObservable.constructor=PushstateObservable,canReflect_1_17_4_canReflect.assign(PushstateObservable.prototype,{root:"/",matchSlashes:!1,paramsMatcher:/^\?(?:[^=]+=[^&]*&)*[^=]+=[^&]*/,querySeparator:"?",dispatchHandlers:function(){var e=this.value,t=[];this.value=getCurrentUrl(),e!==this.value&&(t=[this.handlers.getNode([]),this,[this.value,e]],canQueues_1_1_3_canQueues.enqueueByQueue.apply(canQueues_1_1_3_canQueues,t))},anchorClickHandler:function(t,a){if(a.isDefaultPrevented?!a.isDefaultPrevented():!0!==a.defaultPrevented){var e=t.host||window.location.host;if("javascript://"===t.href)return;if("_blank"===t.target)return;if(a.altKey||a.ctrlKey||a.metaKey||a.shiftKey)return;if(window.location.host===e){var n=cleanRoot();if(0===t.pathname.indexOf(n)){var r=t.pathname+t.search,s=r.substr(n.length);if(void 0!==canRoute_4_3_12_canRoute.rule(s)){0<=t.href.indexOf("#")&&(this.keepHash=!0);var o=window.location.pathname+window.location.search,i=r!==o||t.hash===window.location.hash;window.history.pushState(null,null,t.href),i&&a.preventDefault&&a.preventDefault()}}}}},setup:function(){if(!isNode()){this.value=getCurrentUrl(),canDomEvents_1_3_0_canDomEvents.addDelegateListener(document.documentElement,"click","a",this.anchorClickHandler);var e=this.originalMethods={},t=this.dispatchHandlers;canReflect_1_17_4_canReflect.eachKey(methodsToOverwrite,function(a){this.originalMethods[a]=window.history[a],window.history[a]=function(n,r,s){var o=0===s.indexOf("http"),i=location(),l=i.search+i.hash;(!o&&s!==i.pathname+l||o&&s!==i.href+l)&&(e[a].apply(window.history,arguments),t())}},this),canDomEvents_1_3_0_canDomEvents.addEventListener(window,"popstate",this.dispatchHandlers)}},teardown:function(){canDomEvents_1_3_0_canDomEvents.removeDelegateListener(document.documentElement,"click","a",this.anchorClickHandler),canReflect_1_17_4_canReflect.eachKey(methodsToOverwrite,function(e){window.history[e]=this.originalMethods[e]},this),canDomEvents_1_3_0_canDomEvents.removeEventListener(window,"popstate",this.dispatchHandlers)},get:function(){return canObservationRecorder_1_2_0_canObservationRecorder.add(this),getCurrentUrl()},set:function(e){var t=canRoute_4_3_12_canRoute.deparam(e),a=canRoute_4_3_12_canRoute.deparam(getCurrentUrl()),n="pushState",r;if(this.keepHash&&-1===e.indexOf("#")&&window.location.hash&&(e+=window.location.hash),r={},map$3(a,t).forEach(function(e){return r[e.key]=!0}),this.options.replaceStateKeys.length&&this.options.replaceStateKeys.forEach(function(e){r[e]&&(n="replaceState")}),this.options.replaceStateOnceKeys.length)for(var s=this.options.replaceStateOnceKeys.length-1,o;0<=s;s--)o=this.options.replaceStateOnceKeys[s],r[o]&&(n="replaceState",this.options.replaceStateOnceKeys.splice(s,1));window.history[n](null,null,bindingProxy_1.call("root")+e)},replaceStateOn:function(){canReflect_1_17_4_canReflect.addValues(this.options.replaceStateKeys,canReflect_1_17_4_canReflect.toArray(arguments))},replaceStateOnce:function(){canReflect_1_17_4_canReflect.addValues(this.options.replaceStateOnceKeys,canReflect_1_17_4_canReflect.toArray(arguments))},replaceStateOff:function(){canReflect_1_17_4_canReflect.removeValues(this.options.replaceStateKeys,canReflect_1_17_4_canReflect.toArray(arguments)),canReflect_1_17_4_canReflect.removeValues(this.options.replaceStateOnceKeys,canReflect_1_17_4_canReflect.toArray(arguments))}});var pushstateObservableProto={"can.getValue":PushstateObservable.prototype.get,"can.setValue":PushstateObservable.prototype.set,"can.onValue":PushstateObservable.prototype.on,"can.offValue":PushstateObservable.prototype.off,"can.isMapLike":!1,"can.valueHasDependencies":function(){return!0}};canReflect_1_17_4_canReflect.assignSymbols(PushstateObservable.prototype,pushstateObservableProto);var canRoutePushstate_5_0_2_canRoutePushstate=PushstateObservable;function shouldCheckSet(e,t,a){return"set"===e.type&&t&&a&&"object"==typeof t&&"object"==typeof a}function makeIdentityFromMapSchema$1(e){if(e.identity&&e.identity.length)return function(t,a){var n=canReflect_1_17_4_canReflect.getIdentity(t,e),r=canReflect_1_17_4_canReflect.getIdentity(a,e);return n===r}}function makeDiffListIdentityComparison(e,t,n,r){var a=canReflect_1_17_4_canReflect.getSchema(e),s=canReflect_1_17_4_canReflect.size(e),o,i;return null!=a&&null!=a.values&&(o=canReflect_1_17_4_canReflect.getSchema(a.values)),null==o&&0<s&&(o=canReflect_1_17_4_canReflect.getSchema(canReflect_1_17_4_canReflect.getKeyValue(e,0))),o&&(i=makeIdentityFromMapSchema$1(o)),function(e,t,a){if(canReflect_1_17_4_canReflect.isPrimitive(e))return e===t;if(canReflect_1_17_4_canReflect.isPrimitive(t))return e===t;if(i&&i(e,t)){var s=diffDeep(e,t,n?n+"."+a:""+a);return r.push.apply(r,s),!0}return 0===diffDeep(e,t).length}}function diffDeep(e,t,a){if(e&&canReflect_1_17_4_canReflect.isMoreListLikeThanMapLike(e)){var n=[],r=makeDiffListIdentityComparison(e,t,a,n),s=list(e,t,r).map(function(e){return a&&(e.key=a),e});return n.concat(s)}a=a?a+".":"";var o=map$3(e,t),i=[];return o.forEach(function(n){var r=n.key;n.key=a+n.key;var s=e&&canReflect_1_17_4_canReflect.getKeyValue(e,r),o=t&&canReflect_1_17_4_canReflect.getKeyValue(t,r);if(shouldCheckSet(n,s,o)){var l=diffDeep(s,o,n.key);i.push.apply(i,l)}else i.push(n)}),i}var deep=diffDeep,diff={deep:deep,list:list,map:map$3,mergeDeep:mergeDeep,Patcher:patcher},canDiff_1_4_1_canDiff=canNamespace_1_0_0_canNamespace.diff=diff;function makeMap$2(e){var t={},a=e.split(",");return a.forEach(function(e){t[e]=!0}),t}var canMakeMap_1_2_0_canMakeMap=makeMap$2;function makeMutationEvent(e,t,a){var n=new Map;return{_subscriptions:n,defaultEventType:e,addEventListener:function(e,r,s){var o=this.dispatch,i=n.get(e);i||(i={removeListener:null,listeners:new Set},n.set(e,i)),0===i.listeners.size&&(i.removeListener=t(e,function(t){var n={type:r};for(var s in t)n[s]=t[s];o(e,n,!1!==a)})),i.listeners.add(s),e.addEventListener(r,s)},removeEventListener:function(e,t,a){e.removeEventListener(t,a);var r=n.get(e);r&&(r.listeners["delete"](a),0===r.listeners.size&&(r.removeListener(),n["delete"](e)))}}}var canDomMutate_1_2_1_domEvents=canNamespace_1_0_0_canNamespace.domMutateDomEvents={attributes:makeMutationEvent("attributes",canDomMutate_1_2_1_canDomMutate.onNodeAttributeChange),inserted:makeMutationEvent("inserted",canDomMutate_1_2_1_canDomMutate.onNodeInsertion,!1),removed:makeMutationEvent("removed",canDomMutate_1_2_1_canDomMutate.onNodeRemoval)};function flatten(e){return e.reduce(function(e,t){return e.concat(t)},[])}function makeInterfaceValidator(e){var t=flatten(e);return function(e){var a=t.reduce(function(t,a){return a in e?t:t.concat(a)},[]);return a.length?{message:"missing expected properties",related:a}:void 0}}var canValidateInterface_1_0_2_index=makeInterfaceValidator;export default canNamespace_1_0_0_canNamespace;export{canDefine_2_5_8_canDefine as define,map$2 as DefineMap,list$1 as DefineList,canValue_1_0_1_canValue as value,canObservation_4_1_0_canObservation as Observation,canObservationRecorder_1_2_0_canObservationRecorder as ObservationRecorder,canSimpleMap_4_2_0_canSimpleMap as SimpleMap,canBind_1_0_0_canBind as bind,map$1 as mapEventBindings,value as valueEventBindings,canSimpleObservable_2_2_0_canSimpleObservable as SimpleObservable,canComponent_4_4_2_canComponent as Component,canStache_4_10_5_canStache as stache,canStacheBindings_4_4_0_canStacheBindings as stacheBindings,canStacheRouteHelpers_1_1_1_canStacheRouteHelpers as stacheRouteHelpers,canViewCallbacks_4_3_1_canViewCallbacks as viewCallbacks,canViewLive_4_2_0_canViewLive as viewLive,canViewModel_4_0_1_canViewModel as viewModel,canViewNodelist_4_3_2_canViewNodelist as nodeList,canViewParser_4_1_0_canViewParser as viewParser,canViewScope_4_7_0_canViewScope as Scope,canViewTarget_4_1_0_canViewTarget as target,canFixture_3_0_0_fixture as fixture,canQueryLogic_1_1_0_canQueryLogic as QueryLogic,canRealtimeRestModel_1_0_0_canRealtimeRestModel as realtimeRestModel,canRestModel_1_0_0_canRestModel as restModel,canConnect_3_0_2_all as connect,canLocalStore_1_0_0_canLocalStore as localStore,canMemoryStore_1_0_0_canMemoryStore as memoryStore,canRoute_4_3_12_canRoute as route,canRouteHash_1_0_1_canRouteHash as RouteHash,canRoutePushstate_5_0_2_canRoutePushstate as RoutePushstate,canParam_1_1_0_canParam as param,canDeparam_1_2_0_canDeparam as deparam,canAssign_1_3_1_canAssign as assign,canDefineLazyValue_1_1_0_defineLazyValue as defineLazyValue,canDiff_1_4_1_canDiff as diff,canGlobals_1_2_0_canGlobals as globals,canKey_1_2_0_canKey as key,canKeyTree_1_2_0_canKeyTree as KeyTree,canMakeMap_1_2_0_canMakeMap as makeMap,canParseUri_1_2_0_canParseUri as parseURI,canQueues_1_1_3_canQueues as queues,canString_1_0_0_canString as string,canStringToAny_1_2_0_canStringToAny as stringToAny,canAjax_2_1_0_canAjax as ajax,canAttributeEncoder_1_1_0_canAttributeEncoder as attributeEncoder,canChildNodes_1_2_0_canChildNodes as childNodes,canControl_4_2_0_canControl as Control,canDomEvents_1_3_0_canDomEvents as domEvents,canDomMutate_1_2_1_canDomMutate as domMutate,canDomMutate_1_2_1_node as domMutateNode,canDomMutate_1_2_1_domEvents as domMutateDomEvents,canFragment_1_2_0_canFragment as fragment,canValidateInterface_1_0_2_index as makeInterfaceValidator,canCid_1_3_0_canCid as cid,canConstruct_3_5_1_canConstruct as Construct,maybeBoolean as MaybeBoolean,maybeDate as MaybeDate,maybeNumber as MaybeNumber,maybeString as MaybeString,canNamespace_1_0_0_canNamespace as can,canReflect_1_17_4_canReflect as Reflect,canReflectDependencies_1_1_0_canReflectDependencies as reflectDependencies,canReflectPromise_2_1_0_canReflectPromise as reflectPromise};